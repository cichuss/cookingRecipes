import{A as os,B as Zu,C as mt,D as Ut,a as z,b as Re,c as Mg,d as A,e as LE,f as zu,g as BE,h as jE,i as UE,j as Ag,k as Rg,l as qu,m as Tc,n as Pg,o as Wu,p as Qu,q as $E,r as Og,s as xe,t as Tn,u as Hn,v as Ku,w as Wr,x as Yu,y as Ju,z as HE}from"./chunk-BFD35O4I.js";var GE=null;var Ng=1,kg=Symbol("SIGNAL");function Pe(t){let e=GE;return GE=t,e}var zE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function VO(t){if(!(Lg(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ng)){if(!t.producerMustRecompute(t)&&!Fg(t)){t.dirty=!1,t.lastCleanEpoch=Ng;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ng}}function qE(t){return t&&(t.nextProducerIndex=0),Pe(t)}function WE(t,e){if(Pe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Lg(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Vg(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Fg(t){Xu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(VO(n),i!==n.version))return!0}return!1}function QE(t){if(Xu(t),Lg(t))for(let e=0;e<t.producerNode.length;e++)Vg(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Vg(t,e){if(LO(t),Xu(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)Vg(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Xu(r),r.producerIndexOfThis[i]=e}}function Lg(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Xu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function LO(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function BO(){throw new Error}var jO=BO;function KE(t){jO=t}function ie(t){return typeof t=="function"}function ss(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ed=ss(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Qr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var nt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(ie(i))try{i()}catch(o){e=o instanceof ed?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{YE(o)}catch(s){e=e??[],s instanceof ed?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ed(e)}}add(e){var n;if(e&&e!==this)if(this.closed)YE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Qr(n,e)}remove(e){let{_finalizers:n}=this;n&&Qr(n,e),e instanceof t&&e._removeParent(this)}};nt.EMPTY=(()=>{let t=new nt;return t.closed=!0,t})();var Bg=nt.EMPTY;function td(t){return t instanceof nt||t&&"closed"in t&&ie(t.remove)&&ie(t.add)&&ie(t.unsubscribe)}function YE(t){ie(t)?t():t.unsubscribe()}var Sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var as={setTimeout(t,e,...n){let{delegate:i}=as;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=as;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function nd(t){as.setTimeout(()=>{let{onUnhandledError:e}=Sn;if(e)e(t);else throw t})}function Kr(){}var JE=jg("C",void 0,void 0);function ZE(t){return jg("E",void 0,t)}function XE(t){return jg("N",t,void 0)}function jg(t,e,n){return{kind:t,value:e,error:n}}var Yr=null;function cs(t){if(Sn.useDeprecatedSynchronousErrorHandling){let e=!Yr;if(e&&(Yr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Yr;if(Yr=null,n)throw i}}else t()}function eD(t){Sn.useDeprecatedSynchronousErrorHandling&&Yr&&(Yr.errorThrown=!0,Yr.error=t)}var Jr=class extends nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,td(e)&&e.add(this)):this.destination=HO}static create(e,n,i){return new wi(e,n,i)}next(e){this.isStopped?$g(XE(e),this):this._next(e)}error(e){this.isStopped?$g(ZE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$g(JE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},UO=Function.prototype.bind;function Ug(t,e){return UO.call(t,e)}var Hg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){id(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){id(i)}else id(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){id(n)}}},wi=class extends Jr{constructor(e,n,i){super();let r;if(ie(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Ug(e.next,o),error:e.error&&Ug(e.error,o),complete:e.complete&&Ug(e.complete,o)}):r=e}this.destination=new Hg(r)}};function id(t){Sn.useDeprecatedSynchronousErrorHandling?eD(t):nd(t)}function $O(t){throw t}function $g(t,e){let{onStoppedNotification:n}=Sn;n&&as.setTimeout(()=>n(t,e))}var HO={closed:!0,next:Kr,error:$O,complete:Kr};var ls=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(t){return t}function rd(...t){return Gg(t)}function Gg(t){return t.length===0?It:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var re=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=zO(n)?n:new wi(n,i,r);return cs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=tD(i),new i((r,o)=>{let s=new wi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[ls](){return this}pipe(...n){return Gg(n)(this)}toPromise(n){return n=tD(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function tD(t){var e;return(e=t??Sn.Promise)!==null&&e!==void 0?e:Promise}function GO(t){return t&&ie(t.next)&&ie(t.error)&&ie(t.complete)}function zO(t){return t&&t instanceof Jr||GO(t)&&td(t)}function zg(t){return ie(t?.lift)}function le(t){return e=>{if(zg(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(t,e,n,i,r){return new qg(t,e,n,i,r)}var qg=class extends Jr{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function us(){return le((t,e)=>{let n=null;t._refCount++;let i=oe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var ds=class extends re{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,zg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nt;let n=this.getSubject();e.add(this.source.subscribe(oe(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nt.EMPTY)}return e}refCount(){return us()(this)}};var nD=ss(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class t extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new od(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new nD}next(n){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Bg:(this.currentObservers=null,o.push(n),new nt(()=>{this.currentObservers=null,Qr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new re;return n.source=this,n}}return t.create=(e,n)=>new od(e,n),t})(),od=class extends Me{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:Bg}};var st=class extends Me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Sc={now(){return(Sc.delegate||Date).now()},delegate:void 0};var sd=class extends Me{constructor(e=1/0,n=1/0,i=Sc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}};var ad=class extends nt{constructor(e,n){super()}schedule(e,n=0){return this}};var xc={setInterval(t,e,...n){let{delegate:i}=xc;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=xc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var hs=class extends ad{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return xc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&xc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Qr(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var fs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};fs.now=Sc.now;var ps=class extends fs{constructor(e,n=fs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var Xi=new ps(hs),Wg=Xi;var cd=class extends hs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var ld=class extends ps{};var Qg=new ld(cd);var ht=new re(t=>t.complete());function ud(t){return t&&ie(t.schedule)}function Kg(t){return t[t.length-1]}function er(t){return ie(Kg(t))?t.pop():void 0}function Gn(t){return ud(Kg(t))?t.pop():void 0}function iD(t,e){return typeof Kg(t)=="number"?t.pop():e}var gs=t=>t&&typeof t.length=="number"&&typeof t!="function";function dd(t){return ie(t?.then)}function hd(t){return ie(t[ls])}function fd(t){return Symbol.asyncIterator&&ie(t?.[Symbol.asyncIterator])}function pd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gd=qO();function md(t){return ie(t?.[gd])}function _d(t){return BE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield zu(n.read());if(r)return yield zu(void 0);yield yield zu(i)}}finally{n.releaseLock()}})}function yd(t){return ie(t?.getReader)}function Ee(t){if(t instanceof re)return t;if(t!=null){if(hd(t))return WO(t);if(gs(t))return QO(t);if(dd(t))return KO(t);if(fd(t))return rD(t);if(md(t))return YO(t);if(yd(t))return JO(t)}throw pd(t)}function WO(t){return new re(e=>{let n=t[ls]();if(ie(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function QO(t){return new re(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function KO(t){return new re(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,nd)})}function YO(t){return new re(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function rD(t){return new re(e=>{ZO(t,e).catch(n=>e.error(n))})}function JO(t){return rD(_d(t))}function ZO(t,e){var n,i,r,o;return LE(this,void 0,void 0,function*(){try{for(n=jE(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function Kt(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function Yt(t,e=0){return le((n,i)=>{n.subscribe(oe(i,r=>Kt(i,t,()=>i.next(r),e),()=>Kt(i,t,()=>i.complete(),e),r=>Kt(i,t,()=>i.error(r),e)))})}function pn(t,e=0){return le((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function oD(t,e){return Ee(t).pipe(pn(e),Yt(e))}function sD(t,e){return Ee(t).pipe(pn(e),Yt(e))}function aD(t,e){return new re(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function cD(t,e){return new re(n=>{let i;return Kt(n,e,()=>{i=t[gd](),Kt(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>ie(i?.return)&&i.return()})}function vd(t,e){if(!t)throw new Error("Iterable cannot be null");return new re(n=>{Kt(n,e,()=>{let i=t[Symbol.asyncIterator]();Kt(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function lD(t,e){return vd(_d(t),e)}function uD(t,e){if(t!=null){if(hd(t))return oD(t,e);if(gs(t))return aD(t,e);if(dd(t))return sD(t,e);if(fd(t))return vd(t,e);if(md(t))return cD(t,e);if(yd(t))return lD(t,e)}throw pd(t)}function me(t,e){return e?uD(t,e):Ee(t)}function J(...t){let e=Gn(t);return me(t,e)}function ms(t,e){let n=ie(t)?t:()=>t,i=r=>r.error(n());return new re(e?r=>e.schedule(i,0,r):i)}function Yg(t){return!!t&&(t instanceof re||ie(t.lift)&&ie(t.subscribe))}var bi=ss(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function dD(t){return t instanceof Date&&!isNaN(t)}function Z(t,e){return le((n,i)=>{let r=0;n.subscribe(oe(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:XO}=Array;function eN(t,e){return XO(e)?t(...e):t(e)}function _s(t){return Z(e=>eN(t,e))}var{isArray:tN}=Array,{getPrototypeOf:nN,prototype:iN,keys:rN}=Object;function wd(t){if(t.length===1){let e=t[0];if(tN(e))return{args:e,keys:null};if(oN(e)){let n=rN(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function oN(t){return t&&typeof t=="object"&&nN(t)===iN}function bd(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function tr(...t){let e=Gn(t),n=er(t),{args:i,keys:r}=wd(t);if(i.length===0)return me([],e);let o=new re(sN(i,e,r?s=>bd(r,s):It));return n?o.pipe(_s(n)):o}function sN(t,e,n=It){return i=>{hD(e,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)hD(e,()=>{let u=me(t[c],e),d=!1;u.subscribe(oe(i,f=>{o[c]=f,d||(d=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function hD(t,e,n){t?Kt(n,t,e):e()}function fD(t,e,n,i,r,o,s,a){let c=[],u=0,d=0,f=!1,g=()=>{f&&!c.length&&!u&&e.complete()},_=x=>u<i?D(x):c.push(x),D=x=>{o&&e.next(x),u++;let T=!1;Ee(n(x,d++)).subscribe(oe(e,V=>{r?.(V),o?_(V):e.next(V)},()=>{T=!0},void 0,()=>{if(T)try{for(u--;c.length&&u<i;){let V=c.shift();s?Kt(e,s,()=>D(V)):D(V)}g()}catch(V){e.error(V)}}))};return t.subscribe(oe(e,_,()=>{f=!0,g()})),()=>{a?.()}}function qe(t,e,n=1/0){return ie(e)?qe((i,r)=>Z((o,s)=>e(i,o,r,s))(Ee(t(i,r))),n):(typeof e=="number"&&(n=e),le((i,r)=>fD(i,r,t,n)))}function nr(t=1/0){return qe(It,t)}function pD(){return nr(1)}function ir(...t){return pD()(me(t,Gn(t)))}function Ed(t){return new re(e=>{Ee(t()).subscribe(e)})}function Jg(...t){let e=er(t),{args:n,keys:i}=wd(t),r=new re(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;Ee(n[d]).subscribe(oe(o,g=>{f||(f=!0,u--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(i?bd(i,a):a),o.complete())}))}});return e?r.pipe(_s(e)):r}var aN=["addListener","removeListener"],cN=["addEventListener","removeEventListener"],lN=["on","off"];function gn(t,e,n,i){if(ie(n)&&(i=n,n=void 0),i)return gn(t,e,n).pipe(_s(i));let[r,o]=hN(t)?cN.map(s=>a=>t[s](e,a,n)):uN(t)?aN.map(gD(t,e)):dN(t)?lN.map(gD(t,e)):[];if(!r&&gs(t))return qe(s=>gn(s,e,n))(Ee(t));if(!r)throw new TypeError("Invalid event target");return new re(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function gD(t,e){return n=>i=>t[n](e,i)}function uN(t){return ie(t.addListener)&&ie(t.removeListener)}function dN(t){return ie(t.on)&&ie(t.off)}function hN(t){return ie(t.addEventListener)&&ie(t.removeEventListener)}function Zg(t=0,e,n=Wg){let i=-1;return e!=null&&(ud(e)?n=e:i=e),new re(r=>{let o=dD(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Dd(...t){let e=Gn(t),n=iD(t,1/0),i=t;return i.length?i.length===1?Ee(i[0]):nr(n)(me(i,e)):ht}var{isArray:fN}=Array;function Cd(t){return t.length===1&&fN(t[0])?t[0]:t}function We(t,e){return le((n,i)=>{let r=0;n.subscribe(oe(i,o=>t.call(e,o,r++)&&i.next(o)))})}function Xg(...t){return t=Cd(t),t.length===1?Ee(t[0]):new re(pN(t))}function pN(t){return e=>{let n=[];for(let i=0;n&&!e.closed&&i<t.length;i++)n.push(Ee(t[i]).subscribe(oe(e,r=>{if(n){for(let o=0;o<n.length;o++)o!==i&&n[o].unsubscribe();n=null}e.next(r)})))}}function Mc(...t){let e=er(t),n=Cd(t);return n.length?new re(i=>{let r=n.map(()=>[]),o=n.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<n.length;s++)Ee(n[s]).subscribe(oe(i,a=>{if(r[s].push(a),r.every(c=>c.length)){let c=r.map(u=>u.shift());i.next(e?e(...c):c),r.some((u,d)=>!u.length&&o[d])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):ht}function rr(t){return le((e,n)=>{let i=null,r=!1,o;i=e.subscribe(oe(n,void 0,void 0,s=>{o=Ee(t(s,rr(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function mD(t,e,n,i,r){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(oe(s,d=>{let f=u++;c=a?t(c,d,f):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function Zr(t,e){return ie(e)?qe(t,e,1):qe(t,1)}function em(t,e=Xi){return le((n,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let u=o;o=null,i.next(u)}};function c(){let u=s+t,d=e.now();if(d<u){r=this.schedule(void 0,u-d),i.add(r);return}a()}n.subscribe(oe(i,u=>{o=u,s=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function or(t){return le((e,n)=>{let i=!1;e.subscribe(oe(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Jt(t){return t<=0?()=>ht:le((e,n)=>{let i=0;e.subscribe(oe(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function tm(t){return Z(()=>t)}function Ac(t,e=It){return t=t??gN,le((n,i)=>{let r,o=!0;n.subscribe(oe(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function gN(t,e){return t===e}function Id(t=mN){return le((e,n)=>{let i=!1;e.subscribe(oe(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function mN(){return new bi}function nm(...t){return e=>ir(e,J(...t))}function Ei(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function mn(t,e){let n=arguments.length>=2;return i=>i.pipe(t?We((r,o)=>t(r,o,i)):It,Jt(1),n?or(e):Id(()=>new bi))}function ys(t){return t<=0?()=>ht:le((e,n)=>{let i=[];e.subscribe(oe(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function im(t,e){let n=arguments.length>=2;return i=>i.pipe(t?We((r,o)=>t(r,o,i)):It,ys(1),n?or(e):Id(()=>new bi))}function vs(){return le((t,e)=>{let n,i=!1;t.subscribe(oe(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function sr(t,e){return le(mD(t,e,arguments.length>=2,!0))}function _D(t={}){let{connector:e=()=>new Me,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,u=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},_=()=>{g(),s=c=void 0,d=f=!1},D=()=>{let x=s;_(),x?.unsubscribe()};return le((x,T)=>{u++,!f&&!d&&g();let V=c=c??e();T.add(()=>{u--,u===0&&!f&&!d&&(a=rm(D,r))}),V.subscribe(T),!s&&u>0&&(s=new wi({next:j=>V.next(j),error:j=>{f=!0,g(),a=rm(_,n,j),V.error(j)},complete:()=>{d=!0,g(),a=rm(_,i),V.complete()}}),Ee(x).subscribe(s))})(o)}}function rm(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new wi({next:()=>{i.unsubscribe(),t()}});return Ee(e(...n)).subscribe(i)}function Td(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,_D({connector:()=>new sd(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Di(...t){let e=Gn(t);return le((n,i)=>{(e?ir(t,n,e):ir(t,n)).subscribe(i)})}function Te(t,e){return le((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(oe(i,c=>{r?.unsubscribe();let u=0,d=o++;Ee(t(c,d)).subscribe(r=oe(i,f=>i.next(e?e(c,f,d,u++):f),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Sd(t,e){return ie(e)?Te(()=>t,e):Te(()=>t)}function Nt(t){return le((e,n)=>{Ee(t).subscribe(oe(n,()=>n.complete(),Kr)),!n.closed&&e.subscribe(n)})}function Ze(t,e,n){let i=ie(t)||e||n?{next:t,error:e,complete:n}:t;return i?le((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(oe(o,c=>{var u;(u=i.next)===null||u===void 0||u.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,c),o.error(c)},()=>{var c,u;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):It}function xd(...t){let e=er(t);return le((n,i)=>{let r=t.length,o=new Array(r),s=t.map(()=>!1),a=!1;for(let c=0;c<r;c++)Ee(t[c]).subscribe(oe(i,u=>{o[c]=u,!a&&!s[c]&&(s[c]=!0,(a=s.every(It))&&(s=null))},Kr));n.subscribe(oe(i,c=>{if(a){let u=[c,...o];i.next(e?e(...u):u)}}))})}var tC="https://g.co/ng/security#xss",ne=class extends Error{constructor(e,n){super(g_(e,n)),this.code=e}};function g_(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Gc(t){return{toString:t}.toString()}var Md="__parameters__";function _N(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function nC(t,e,n){return Gc(()=>{let i=_N(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(Md)?c[Md]:Object.defineProperty(c,Md,{value:[]})[Md];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var Ht=globalThis;function Ve(t){for(let e in t)if(t[e]===Ve)return e;throw Error("Could not find renamed property on target object.")}function yN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Gt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Gt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function vm(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var vN=Ve({__forward_ref__:Ve});function Os(t){return t.__forward_ref__=Os,t.toString=function(){return Gt(this())},t}function $t(t){return iC(t)?t():t}function iC(t){return typeof t=="function"&&t.hasOwnProperty(vN)&&t.__forward_ref__===Os}function q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ue(t){return{providers:t.providers||[],imports:t.imports||[]}}function ah(t){return yD(t,oC)||yD(t,sC)}function rC(t){return ah(t)!==null}function yD(t,e){return t.hasOwnProperty(e)?t[e]:null}function wN(t){let e=t&&(t[oC]||t[sC]);return e||null}function vD(t){return t&&(t.hasOwnProperty(wD)||t.hasOwnProperty(bN))?t[wD]:null}var oC=Ve({\u0275prov:Ve}),wD=Ve({\u0275inj:Ve}),sC=Ve({ngInjectableDef:Ve}),bN=Ve({ngInjectorDef:Ve}),G=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function aC(t){return t&&!!t.\u0275providers}var EN=Ve({\u0275cmp:Ve}),DN=Ve({\u0275dir:Ve}),CN=Ve({\u0275pipe:Ve}),IN=Ve({\u0275mod:Ve}),jd=Ve({\u0275fac:Ve}),Rc=Ve({__NG_ELEMENT_ID__:Ve}),bD=Ve({__NG_ENV_ID__:Ve});function ch(t){return typeof t=="string"?t:t==null?"":String(t)}function TN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ch(t)}function SN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ne(-200,t)}function m_(t,e){throw new ne(-201,!1)}var ye=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ye||{}),wm;function cC(){return wm}function _n(t){let e=wm;return wm=t,e}function lC(t,e,n){let i=ah(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&ye.Optional)return null;if(e!==void 0)return e;m_(t,"Injector")}var xN={},Oc=xN,bm="__NG_DI_FLAG__",Ud="ngTempTokenPath",MN="ngTokenPath",AN=/\n/gm,RN="\u0275",ED="__source",Cs;function PN(){return Cs}function ar(t){let e=Cs;return Cs=t,e}function ON(t,e=ye.Default){if(Cs===void 0)throw new ne(-203,!1);return Cs===null?lC(t,void 0,e):Cs.get(t,e&ye.Optional?null:void 0,e)}function N(t,e=ye.Default){return(cC()||ON)($t(t),e)}function L(t,e=ye.Default){return N(t,lh(e))}function lh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Em(t){let e=[];for(let n=0;n<t.length;n++){let i=$t(t[n]);if(Array.isArray(i)){if(i.length===0)throw new ne(900,!1);let r,o=ye.Default;for(let s=0;s<i.length;s++){let a=i[s],c=NN(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(N(r,o))}else e.push(N(i))}return e}function uC(t,e){return t[bm]=e,t.prototype[bm]=e,t}function NN(t){return t[bm]}function kN(t,e,n,i){let r=t[Ud];throw e[ED]&&r.unshift(e[ED]),t.message=FN(`
`+t.message,r,n,i),t[MN]=r,t[Ud]=null,t}function FN(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==RN?t.slice(2):t;let r=Gt(e);if(Array.isArray(e))r=e.map(Gt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Gt(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(AN,`
  `)}`}var on=uC(nC("Optional"),8);var __=uC(nC("SkipSelf"),4);function Ts(t,e){let n=t.hasOwnProperty(jd);return n?t[jd]:null}function VN(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function LN(t){return t.flat(Number.POSITIVE_INFINITY)}function y_(t,e){t.forEach(n=>Array.isArray(n)?y_(n,e):e(n))}function dC(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $d(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function BN(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function jN(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function v_(t,e,n){let i=zc(t,e);return i>=0?t[i|1]=n:(i=~i,jN(t,i,e,n)),i}function om(t,e){let n=zc(t,e);if(n>=0)return t[n|1]}function zc(t,e){return UN(t,e,1)}function UN(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var Ss={},Zt=[],xs=new G(""),hC=new G("",-1),fC=new G(""),Hd=class{get(e,n=Oc){if(n===Oc){let i=new Error(`NullInjectorError: No provider for ${Gt(e)}!`);throw i.name="NullInjectorError",i}return n}},pC=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(pC||{}),Wn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Wn||{}),kt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(kt||{});function $N(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function Dm(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];HN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function gC(t){return t===3||t===4||t===6}function HN(t){return t.charCodeAt(0)===64}function Nc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?DD(t,n,r,null,e[++i]):DD(t,n,r,null,null))}}return t}function DD(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var mC="ng-template";function GN(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&$N(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(w_(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function w_(t){return t.type===4&&t.value!==mC}function zN(t,e,n){let i=t.type===4&&!n?mC:t.value;return e===i}function qN(t,e,n){let i=4,r=t.attrs,o=r!==null?KN(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!xn(i)&&!xn(c))return!1;if(s&&xn(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!zN(t,c,n)||c===""&&e.length===1){if(xn(i))return!1;s=!0}}else if(i&8){if(r===null||!GN(t,r,c,n)){if(xn(i))return!1;s=!0}}else{let u=e[++a],d=WN(c,r,w_(t),n);if(d===-1){if(xn(i))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=r[d+1].toLowerCase(),i&2&&u!==f){if(xn(i))return!1;s=!0}}}}return xn(i)||s}function xn(t){return(t&1)===0}function WN(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return YN(e,t)}function _C(t,e,n=!1){for(let i=0;i<e.length;i++)if(qN(t,e[i],n))return!0;return!1}function QN(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function KN(t){for(let e=0;e<t.length;e++){let n=t[e];if(gC(n))return e}return t.length}function YN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function JN(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function CD(t,e){return t?":not("+e.trim()+")":e}function ZN(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!xn(s)&&(e+=CD(o,r),r=""),i=s,o=o||!xn(i);n++}return r!==""&&(e+=CD(o,r)),e}function XN(t){return t.map(ZN).join(",")}function ek(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!xn(r))break;r=o}i++}return{attrs:e,classes:n}}function Le(t){return Gc(()=>{let e=EC(t),n=Re(z({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===pC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Wn.Emulated,styles:t.styles||Zt,_:null,schemas:t.schemas||null,tView:null,id:""});DC(n);let i=t.dependencies;return n.directiveDefs=TD(i,!1),n.pipeDefs=TD(i,!0),n.id=ik(n),n})}function tk(t){return Ci(t)||yC(t)}function nk(t){return t!==null}function de(t){return Gc(()=>({type:t.type,bootstrap:t.bootstrap||Zt,declarations:t.declarations||Zt,imports:t.imports||Zt,exports:t.exports||Zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ID(t,e){if(t==null)return Ss;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a=kt.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(n[o]=a!==kt.None?[i,a]:i,e[o]=s):n[o]=i}return n}function sn(t){return Gc(()=>{let e=EC(t);return DC(e),e})}function Ci(t){return t[EN]||null}function yC(t){return t[DN]||null}function vC(t){return t[CN]||null}function wC(t){let e=Ci(t)||yC(t)||vC(t);return e!==null?e.standalone:!1}function bC(t,e){let n=t[IN]||null;if(!n&&e===!0)throw new Error(`Type ${Gt(t)} does not have '\u0275mod' property.`);return n}function EC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ss,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ID(t.inputs,e),outputs:ID(t.outputs),debugInfo:null}}function DC(t){t.features?.forEach(e=>e(t))}function TD(t,e){if(!t)return null;let n=e?vC:tk;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(nk)}function ik(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rk(...t){return{\u0275providers:CC(!0,t),\u0275fromNgModule:!0}}function CC(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return y_(e,s=>{let a=s;Cm(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&IC(r,o),n}function IC(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];b_(r,o=>{e(o,i)})}}function Cm(t,e,n,i){if(t=$t(t),!t)return!1;let r=null,o=vD(t),s=!o&&Ci(t);if(!o&&!s){let c=t.ngModule;if(o=vD(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Cm(u,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{y_(o.imports,d=>{Cm(d,e,n,i)&&(u||=[],u.push(d))})}finally{}u!==void 0&&IC(u,e)}if(!a){let u=Ts(r)||(()=>new r);e({provide:r,useFactory:u,deps:Zt},r),e({provide:fC,useValue:r,multi:!0},r),e({provide:xs,useValue:()=>N(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let u=t;b_(c,d=>{e(d,u)})}}else return!1;return r!==t&&t.providers!==void 0}function b_(t,e){for(let n of t)aC(n)&&(n=n.\u0275providers),Array.isArray(n)?b_(n,e):e(n)}var ok=Ve({provide:String,useValue:Ve});function TC(t){return t!==null&&typeof t=="object"&&ok in t}function sk(t){return!!(t&&t.useExisting)}function ak(t){return!!(t&&t.useFactory)}function Ms(t){return typeof t=="function"}function ck(t){return!!t.useClass}var uh=new G(""),Nd={},lk={},sm;function dh(){return sm===void 0&&(sm=new Hd),sm}var Tt=class{},kc=class extends Tt{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tm(e,s=>this.processProvider(s)),this.records.set(hC,ws(void 0,this)),r.has("environment")&&this.records.set(Tt,ws(void 0,this));let o=this.records.get(uh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(fC,Zt,ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Pe(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Pe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ar(this),i=_n(void 0),r;try{return e()}finally{ar(n),_n(i)}}get(e,n=Oc,i=ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(bD))return e[bD](this);i=lh(i);let r,o=ar(this),s=_n(void 0);try{if(!(i&ye.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=pk(e)&&ah(e);u&&this.injectableDefInScope(u)?c=ws(Im(e),Nd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&ye.Self?dh():this.parent;return n=i&ye.Optional&&n===Oc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ud]=a[Ud]||[]).unshift(Gt(e)),o)throw a;return kN(a,e,"R3InjectorError",this.source)}else throw a}finally{_n(s),ar(o)}}resolveInjectorInitializers(){let e=Pe(null),n=ar(this),i=_n(void 0),r;try{let o=this.get(xs,Zt,ye.Self);for(let s of o)s()}finally{ar(n),_n(i),Pe(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Gt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(e){e=$t(e);let n=Ms(e)?e:$t(e&&e.provide),i=dk(e);if(!Ms(e)&&e.multi===!0){let r=this.records.get(n);r||(r=ws(void 0,Nd,!0),r.factory=()=>Em(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Pe(null);try{return n.value===Nd&&(n.value=lk,n.value=n.factory()),typeof n.value=="object"&&n.value&&fk(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Pe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=$t(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Im(t){let e=ah(t),n=e!==null?e.factory:Ts(t);if(n!==null)return n;if(t instanceof G)throw new ne(204,!1);if(t instanceof Function)return uk(t);throw new ne(204,!1)}function uk(t){if(t.length>0)throw new ne(204,!1);let n=wN(t);return n!==null?()=>n.factory(t):()=>new t}function dk(t){if(TC(t))return ws(void 0,t.useValue);{let e=SC(t);return ws(e,Nd)}}function SC(t,e,n){let i;if(Ms(t)){let r=$t(t);return Ts(r)||Im(r)}else if(TC(t))i=()=>$t(t.useValue);else if(ak(t))i=()=>t.useFactory(...Em(t.deps||[]));else if(sk(t))i=()=>N($t(t.useExisting));else{let r=$t(t&&(t.useClass||t.provide));if(hk(t))i=()=>new r(...Em(t.deps));else return Ts(r)||Im(r)}return i}function ws(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function hk(t){return!!t.deps}function fk(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function pk(t){return typeof t=="function"||typeof t=="object"&&t instanceof G}function Tm(t,e){for(let n of t)Array.isArray(n)?Tm(n,e):n&&aC(n)?Tm(n.\u0275providers,e):e(n)}function Ai(t,e){t instanceof kc&&t.assertNotDestroyed();let n,i=ar(t),r=_n(void 0);try{return e()}finally{ar(i),_n(r)}}function xC(){return cC()!==void 0||PN()!=null}function gk(t){if(!xC())throw new ne(-203,!1)}function mk(t){let e=Ht.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function _k(t){return typeof t=="function"}var Ri=0,_e=1,ae=2,St=3,An=4,an=5,Fc=6,Vc=7,Rn=8,As=9,Pn=10,Xe=11,Lc=12,SD=13,Ns=14,On=15,qc=16,bs=17,Ii=18,hh=19,MC=20,cr=21,am=22,to=23,Ti=25,AC=1;var no=7,Gd=8,Rs=9,rn=10,E_=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(E_||{});function Xr(t){return Array.isArray(t)&&typeof t[AC]=="object"}function Pi(t){return Array.isArray(t)&&t[AC]===!0}function RC(t){return(t.flags&4)!==0}function fh(t){return t.componentOffset>-1}function D_(t){return(t.flags&1)===1}function lr(t){return!!t.template}function yk(t){return(t[ae]&512)!==0}var Sm=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function PC(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function dr(){return OC}function OC(t){return t.type.prototype.ngOnChanges&&(t.setInput=wk),vk}dr.ngInherit=!0;function vk(){let t=kC(this),e=t?.current;if(e){let n=t.previous;if(n===Ss)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function wk(t,e,n,i,r){let o=this.declaredInputs[i],s=kC(t)||bk(t,{previous:Ss,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Sm(u&&u.currentValue,n,c===Ss),PC(t,e,r,n)}var NC="__ngSimpleChanges__";function kC(t){return t[NC]||null}function bk(t,e){return t[NC]=e}var xD=null;var zn=function(t,e,n){xD?.(t,e,n)},Ek="svg",Dk="math",Ck=!1;function Ik(){return Ck}function Qn(t){for(;Array.isArray(t);)t=t[Ri];return t}function FC(t,e){return Qn(e[t])}function yn(t,e){return Qn(e[t.index])}function VC(t,e){return t.data[e]}function hr(t,e){let n=e[t];return Xr(n)?n:n[Ri]}function Tk(t){return(t[ae]&4)===4}function C_(t){return(t[ae]&128)===128}function Sk(t){return Pi(t[St])}function zd(t,e){return e==null?null:t[e]}function LC(t){t[bs]=0}function xk(t){t[ae]&1024||(t[ae]|=1024,C_(t)&&Bc(t))}function Mk(t,e){for(;t>0;)e=e[Ns],t--;return e}function I_(t){return!!(t[ae]&9216||t[to]?.dirty)}function xm(t){t[Pn].changeDetectionScheduler?.notify(1),I_(t)?Bc(t):t[ae]&64&&(Ik()?(t[ae]|=1024,Bc(t)):t[Pn].changeDetectionScheduler?.notify())}function Bc(t){t[Pn].changeDetectionScheduler?.notify();let e=jc(t);for(;e!==null&&!(e[ae]&8192||(e[ae]|=8192,!C_(e)));)e=jc(e)}function BC(t,e){if((t[ae]&256)===256)throw new ne(911,!1);t[cr]===null&&(t[cr]=[]),t[cr].push(e)}function Ak(t,e){if(t[cr]===null)return;let n=t[cr].indexOf(e);n!==-1&&t[cr].splice(n,1)}function jc(t){let e=t[St];return Pi(e)?e[St]:e}var ve={lFrame:KC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Rk(){return ve.lFrame.elementDepthCount}function Pk(){ve.lFrame.elementDepthCount++}function Ok(){ve.lFrame.elementDepthCount--}function jC(){return ve.bindingsEnabled}function UC(){return ve.skipHydrationRootTNode!==null}function Nk(t){return ve.skipHydrationRootTNode===t}function kk(){ve.skipHydrationRootTNode=null}function Ae(){return ve.lFrame.lView}function _t(){return ve.lFrame.tView}function ks(t){return ve.lFrame.contextLView=t,t[Rn]}function Fs(t){return ve.lFrame.contextLView=null,t}function Xt(){let t=$C();for(;t!==null&&t.type===64;)t=t.parent;return t}function $C(){return ve.lFrame.currentTNode}function Fk(){let t=ve.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Wc(t,e){let n=ve.lFrame;n.currentTNode=t,n.isParent=e}function HC(){return ve.lFrame.isParent}function GC(){ve.lFrame.isParent=!1}function Vk(t){return ve.lFrame.bindingIndex=t}function ph(){return ve.lFrame.bindingIndex++}function zC(t){let e=ve.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Lk(){return ve.lFrame.inI18n}function Bk(t,e){let n=ve.lFrame;n.bindingIndex=n.bindingRootIndex=t,Mm(e)}function jk(){return ve.lFrame.currentDirectiveIndex}function Mm(t){ve.lFrame.currentDirectiveIndex=t}function Uk(t){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function qC(){return ve.lFrame.currentQueryIndex}function T_(t){ve.lFrame.currentQueryIndex=t}function $k(t){let e=t[_e];return e.type===2?e.declTNode:e.type===1?t[an]:null}function WC(t,e,n){if(n&ye.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&ye.Host);)if(r=$k(o),r===null||(o=o[Ns],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=ve.lFrame=QC();return i.currentTNode=e,i.lView=t,!0}function S_(t){let e=QC(),n=t[_e];ve.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function QC(){let t=ve.lFrame,e=t===null?null:t.child;return e===null?KC(t):e}function KC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function YC(){let t=ve.lFrame;return ve.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var JC=YC;function x_(){let t=YC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Hk(t){return(ve.lFrame.contextLView=Mk(t,ve.lFrame.contextLView))[Rn]}function uo(){return ve.lFrame.selectedIndex}function io(t){ve.lFrame.selectedIndex=t}function gh(){let t=ve.lFrame;return VC(t.tView,t.selectedIndex)}function Gk(){return ve.lFrame.currentNamespace}var ZC=!0;function M_(){return ZC}function A_(t){ZC=t}function zk(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=OC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function R_(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function kd(t,e,n){XC(t,e,3,n)}function Fd(t,e,n,i){(t[ae]&3)===n&&XC(t,e,n,i)}function cm(t,e){let n=t[ae];(n&3)===e&&(n&=16383,n+=1,t[ae]=n)}function XC(t,e,n,i){let r=i!==void 0?t[bs]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[bs]+=65536),(a<o||o==-1)&&(qk(t,n,e,c),t[bs]=(t[bs]&4294901760)+c+2),c++}function MD(t,e){zn(4,t,e);let n=Pe(null);try{e.call(t)}finally{Pe(n),zn(5,t,e)}}function qk(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[ae]>>14<t[bs]>>16&&(t[ae]&3)===e&&(t[ae]+=16384,MD(a,o)):MD(a,o)}var Is=-1,ro=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function Wk(t){return t instanceof ro}function Qk(t){return(t.flags&8)!==0}function Kk(t){return(t.flags&16)!==0}function eI(t){return t!==Is}function qd(t){return t&32767}function Yk(t){return t>>16}function Wd(t,e){let n=Yk(t),i=e;for(;n>0;)i=i[Ns],n--;return i}var Am=!0;function AD(t){let e=Am;return Am=t,e}var Jk=256,tI=Jk-1,nI=5,Zk=0,qn={};function Xk(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Rc)&&(i=n[Rc]),i==null&&(i=n[Rc]=Zk++);let r=i&tI,o=1<<r;e.data[t+(r>>nI)]|=o}function Qd(t,e){let n=iI(t,e);if(n!==-1)return n;let i=e[_e];i.firstCreatePass&&(t.injectorIndex=e.length,lm(i.data,t),lm(e,null),lm(i.blueprint,null));let r=P_(t,e),o=t.injectorIndex;if(eI(r)){let s=qd(r),a=Wd(r,e),c=a[_e].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=r,o}function lm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function iI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function P_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=cI(r),i===null)return Is;if(n++,r=r[Ns],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Is}function Rm(t,e,n){Xk(t,e,n)}function eF(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let i=n.length,r=0;for(;r<i;){let o=n[r];if(gC(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(o===e)return n[r+1];r=r+2}}}return null}function rI(t,e,n){if(n&ye.Optional||t!==void 0)return t;m_(e,"NodeInjector")}function oI(t,e,n,i){if(n&ye.Optional&&i===void 0&&(i=null),!(n&(ye.Self|ye.Host))){let r=t[As],o=_n(void 0);try{return r?r.get(e,i,n&ye.Optional):lC(e,i,n&ye.Optional)}finally{_n(o)}}return rI(i,e,n)}function sI(t,e,n,i=ye.Default,r){if(t!==null){if(e[ae]&2048&&!(i&ye.Self)){let s=rF(t,e,n,i,qn);if(s!==qn)return s}let o=aI(t,e,n,i,qn);if(o!==qn)return o}return oI(e,n,i,r)}function aI(t,e,n,i,r){let o=nF(n);if(typeof o=="function"){if(!WC(e,t,i))return i&ye.Host?rI(r,n,i):oI(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&ye.Optional))m_(n);else return s}finally{JC()}}else if(typeof o=="number"){let s=null,a=iI(t,e),c=Is,u=i&ye.Host?e[On][an]:null;for((a===-1||i&ye.SkipSelf)&&(c=a===-1?P_(t,e):e[a+8],c===Is||!PD(i,!1)?a=-1:(s=e[_e],a=qd(c),e=Wd(c,e)));a!==-1;){let d=e[_e];if(RD(o,a,d.data)){let f=tF(a,e,n,s,i,u);if(f!==qn)return f}c=e[a+8],c!==Is&&PD(i,e[_e].data[a+8]===u)&&RD(o,a,e)?(s=d,a=qd(c),e=Wd(c,e)):a=-1}}return r}function tF(t,e,n,i,r,o){let s=e[_e],a=s.data[t+8],c=i==null?fh(a)&&Am:i!=s&&(a.type&3)!==0,u=r&ye.Host&&o===a,d=Vd(a,s,n,c,u);return d!==null?oo(e,s,d,a):qn}function Vd(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,d=o>>20,f=i?a:a+d,g=r?a+d:u;for(let _=f;_<g;_++){let D=s[_];if(_<c&&n===D||_>=c&&D.type===n)return _}if(r){let _=s[c];if(_&&lr(_)&&_.type===n)return c}return null}function oo(t,e,n,i){let r=t[n],o=e.data;if(Wk(r)){let s=r;s.resolving&&SN(TN(o[n]));let a=AD(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?_n(s.injectImpl):null,d=WC(t,i,ye.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&zk(n,o[n],e)}finally{u!==null&&_n(u),AD(a),s.resolving=!1,JC()}}return r}function nF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Rc)?t[Rc]:void 0;return typeof e=="number"?e>=0?e&tI:iF:e}function RD(t,e,n){let i=1<<t;return!!(n[e+(t>>nI)]&i)}function PD(t,e){return!(t&ye.Self)&&!(t&ye.Host&&e)}var eo=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return sI(this._tNode,this._lView,e,lh(i),n)}};function iF(){return new eo(Xt(),Ae())}function Vs(t){return Gc(()=>{let e=t.prototype.constructor,n=e[jd]||Pm(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[jd]||Pm(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Pm(t){return iC(t)?()=>{let e=Pm($t(t));return e&&e()}:Ts(t)}function rF(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[ae]&2048&&!(s[ae]&512);){let a=aI(o,s,n,i|ye.Self,qn);if(a!==qn)return a;let c=o.parent;if(!c){let u=s[MC];if(u){let d=u.get(n,qn,i);if(d!==qn)return d}c=cI(s),s=s[Ns]}o=c}return r}function cI(t){let e=t[_e],n=e.type;return n===2?e.declTNode:n===1?t[an]:null}function mh(t){return eF(Xt(),t)}function OD(t,e=null,n=null,i){let r=lI(t,e,n,i);return r.resolveInjectorInitializers(),r}function lI(t,e=null,n=null,i,r=new Set){let o=[n||Zt,rk(t)];return i=i||(typeof t=="object"?void 0:Gt(t)),new kc(o,e||dh(),i||null,r)}var ft=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return OD({name:""},r,i,"");{let o=i.name??"";return OD({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Oc,e.NULL=new Hd,e.\u0275prov=q({token:e,providedIn:"any",factory:()=>N(hC)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var oF="ngOriginalError";function um(t){return t[oF]}var Kn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&um(e);for(;n&&um(n);)n=um(n);return n||null}},uI=new G("",{providedIn:"root",factory:()=>L(Kn).handleError.bind(void 0)}),_h=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=sF,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Om=class extends _h{constructor(e){super(),this._lView=e}onDestroy(e){return BC(this._lView,e),()=>Ak(this._lView,e)}};function sF(){return new Om(Ae())}function aF(){return Ls(Xt(),Ae())}function Ls(t,e){return new en(yn(t,e))}var en=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=aF;let t=e;return t})();function cF(t){return t instanceof en?t.nativeElement:t}var Nm=class extends Me{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,xC()&&(this.destroyRef=L(_h,{optional:!0})??void 0)}emit(e){let n=Pe(null);try{super.next(e)}finally{Pe(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=dm(o),r&&(r=dm(r)),s&&(s=dm(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof nt&&e.add(a),a}};function dm(t){return e=>{setTimeout(t,void 0,e)}}var Qe=Nm;function lF(){return this._results[Symbol.iterator]()}var km=class t{get changes(){return this._changes??=new Qe}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=lF)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=LN(e);(this._changesDetected=!VN(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function dI(t){return(t.flags&128)===128}var hI=new Map,uF=0;function dF(){return uF++}function hF(t){hI.set(t[hh],t)}function fF(t){hI.delete(t[hh])}var ND="__ngContext__";function so(t,e){Xr(e)?(t[ND]=e[hh],hF(e)):t[ND]=e}function fI(t){return gI(t[Lc])}function pI(t){return gI(t[An])}function gI(t){for(;t!==null&&!Pi(t);)t=t[An];return t}var Fm;function mI(t){Fm=t}function pF(){if(Fm!==void 0)return Fm;if(typeof document<"u")return document;throw new ne(210,!1)}var yh=new G("",{providedIn:"root",factory:()=>gF}),gF="ng",O_=new G(""),yt=new G("",{providedIn:"platform",factory:()=>"unknown"});var N_=new G("",{providedIn:"root",factory:()=>pF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mF="h",_F="b";var yF=()=>null;function k_(t,e,n=!1){return yF(t,e,n)}var _I=!1,vF=new G("",{providedIn:"root",factory:()=>_I});var Ad;function wF(){if(Ad===void 0&&(Ad=null,Ht.trustedTypes))try{Ad=Ht.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ad}function kD(t){return wF()?.createScriptURL(t)||t}var Kd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tC})`}};function Bs(t){return t instanceof Kd?t.changingThisBreaksApplicationSecurity:t}function F_(t,e){let n=bF(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${tC})`)}return n===e}function bF(t){return t instanceof Kd&&t.getTypeName()||null}var EF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yI(t){return t=String(t),t.match(EF)?t:"unsafe:"+t}var vh=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(vh||{});function Oi(t){let e=wI();return e?e.sanitize(vh.URL,t)||"":F_(t,"URL")?Bs(t):yI(ch(t))}function DF(t){let e=wI();if(e)return kD(e.sanitize(vh.RESOURCE_URL,t)||"");if(F_(t,"ResourceURL"))return kD(Bs(t));throw new ne(904,!1)}function CF(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?DF:Oi}function vI(t,e,n){return CF(e,n)(t)}function wI(){let t=Ae();return t&&t[Pn].sanitizer}function bI(t){return t instanceof Function?t():t}function IF(t){return(t??L(ft)).get(yt)==="browser"}var Si=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Si||{}),TF;function V_(t,e){return TF(t,e)}function Es(t,e,n,i,r){if(i!=null){let o,s=!1;Pi(i)?o=i:Xr(i)&&(s=!0,i=i[Ri]);let a=Qn(i);t===0&&n!==null?r==null?SI(e,n,a):Yd(e,n,a,r||null,!0):t===1&&n!==null?Yd(e,n,a,r||null,!0):t===2?UF(e,a,s):t===3&&e.destroyNode(a),o!=null&&HF(e,t,o,n,r)}}function SF(t,e){return t.createText(e)}function xF(t,e,n){t.setValue(e,n)}function EI(t,e,n){return t.createElement(e,n)}function MF(t,e){DI(t,e),e[Ri]=null,e[an]=null}function AF(t,e,n,i,r,o){i[Ri]=r,i[an]=e,wh(t,i,n,1,r,o)}function DI(t,e){e[Pn].changeDetectionScheduler?.notify(1),wh(t,e,e[Xe],2,null,null)}function RF(t){let e=t[Lc];if(!e)return hm(t[_e],t);for(;e;){let n=null;if(Xr(e))n=e[Lc];else{let i=e[rn];i&&(n=i)}if(!n){for(;e&&!e[An]&&e!==t;)Xr(e)&&hm(e[_e],e),e=e[St];e===null&&(e=t),Xr(e)&&hm(e[_e],e),n=e&&e[An]}e=n}}function PF(t,e,n,i){let r=rn+i,o=n.length;i>0&&(n[r-1][An]=e),i<o-rn?(e[An]=n[r],dC(n,rn+i,e)):(n.push(e),e[An]=null),e[St]=n;let s=e[qc];s!==null&&n!==s&&OF(s,e);let a=e[Ii];a!==null&&a.insertView(t),xm(e),e[ae]|=128}function OF(t,e){let n=t[Rs],r=e[St][St][On];e[On]!==r&&(t[ae]|=E_.HasTransplantedViews),n===null?t[Rs]=[e]:n.push(e)}function CI(t,e){let n=t[Rs],i=n.indexOf(e);n.splice(i,1)}function Vm(t,e){if(t.length<=rn)return;let n=rn+e,i=t[n];if(i){let r=i[qc];r!==null&&r!==t&&CI(r,i),e>0&&(t[n-1][An]=i[An]);let o=$d(t,rn+e);MF(i[_e],i);let s=o[Ii];s!==null&&s.detachView(o[_e]),i[St]=null,i[An]=null,i[ae]&=-129}return i}function II(t,e){if(!(e[ae]&256)){let n=e[Xe];n.destroyNode&&wh(t,e,n,3,null,null),RF(e)}}function hm(t,e){if(e[ae]&256)return;let n=Pe(null);try{e[ae]&=-129,e[ae]|=256,e[to]&&QE(e[to]),kF(t,e),NF(t,e),e[_e].type===1&&e[Xe].destroy();let i=e[qc];if(i!==null&&Pi(e[St])){i!==e[St]&&CI(i,e);let r=e[Ii];r!==null&&r.detachView(t)}fF(e)}finally{Pe(n)}}function NF(t,e){let n=t.cleanup,i=e[Vc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[Vc]=null);let r=e[cr];if(r!==null){e[cr]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function kF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof ro)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];zn(4,a,c);try{c.call(a)}finally{zn(5,a,c)}}else{zn(4,r,o);try{o.call(r)}finally{zn(5,r,o)}}}}}function TI(t,e,n){return FF(t,e.parent,n)}function FF(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[Ri];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===Wn.None||o===Wn.Emulated)return null}return yn(i,n)}}function Yd(t,e,n,i,r){t.insertBefore(e,n,i,r)}function SI(t,e,n){t.appendChild(e,n)}function FD(t,e,n,i,r){i!==null?Yd(t,e,n,i,r):SI(t,e,n)}function VF(t,e,n,i){t.removeChild(e,n,i)}function L_(t,e){return t.parentNode(e)}function LF(t,e){return t.nextSibling(e)}function xI(t,e,n){return jF(t,e,n)}function BF(t,e,n){return t.type&40?yn(t,n):null}var jF=BF,VD;function B_(t,e,n,i){let r=TI(t,i,e),o=e[Xe],s=i.parent||e[an],a=xI(s,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)FD(o,r,n[c],a,!1);else FD(o,r,n,a,!1);VD!==void 0&&VD(o,i,e,n,r)}function Ld(t,e){if(e!==null){let n=e.type;if(n&3)return yn(e,t);if(n&4)return Lm(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Ld(t,i);{let r=t[e.index];return Pi(r)?Lm(-1,r):Qn(r)}}else{if(n&32)return V_(e,t)()||Qn(t[e.index]);{let i=MI(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=jc(t[On]);return Ld(r,i)}else return Ld(t,e.next)}}}return null}function MI(t,e){if(e!==null){let i=t[On][an],r=e.projection;return i.projection[r]}return null}function Lm(t,e){let n=rn+t+1;if(n<e.length){let i=e[n],r=i[_e].firstChild;if(r!==null)return Ld(i,r)}return e[no]}function UF(t,e,n){let i=L_(t,e);i&&VF(t,i,e,n)}function j_(t,e,n,i,r,o,s){for(;n!=null;){let a=i[n.index],c=n.type;if(s&&e===0&&(a&&so(Qn(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)j_(t,e,n.child,i,r,o,!1),Es(e,t,r,a,o);else if(c&32){let u=V_(n,i),d;for(;d=u();)Es(e,t,r,d,o);Es(e,t,r,a,o)}else c&16?AI(t,e,i,n,r,o):Es(e,t,r,a,o);n=s?n.projectionNext:n.next}}function wh(t,e,n,i,r,o){j_(n,i,t.firstChild,e,r,o,!1)}function $F(t,e,n){let i=e[Xe],r=TI(t,n,e),o=n.parent||e[an],s=xI(o,n,e);AI(i,0,e,n,r,s)}function AI(t,e,n,i,r,o){let s=n[On],c=s[an].projection[i.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Es(e,t,r,d,o)}else{let u=c,d=s[St];dI(i)&&(u.flags|=128),j_(t,e,u,d,r,o,!0)}}function HF(t,e,n,i,r){let o=n[no],s=Qn(n);o!==s&&Es(e,t,i,o,r);for(let a=rn;a<n.length;a++){let c=n[a];wh(c[_e],c,t,e,i,o)}}function GF(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:Si.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Si.Important),t.setStyle(n,i,r,o))}}function zF(t,e,n){t.setAttribute(e,"style",n)}function RI(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function PI(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&Dm(t,e,i),r!==null&&RI(t,e,r),o!==null&&zF(t,e,o)}var Ni={};function je(t=1){OI(_t(),Ae(),uo()+t,!1)}function OI(t,e,n,i){if(!i)if((e[ae]&3)===3){let o=t.preOrderCheckHooks;o!==null&&kd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Fd(e,o,0,n)}io(n)}function se(t,e=ye.Default){let n=Ae();if(n===null)return N(t,e);let i=Xt();return sI(i,n,$t(t),e)}function NI(){let t="invalid";throw new Error(t)}function kI(t,e,n,i,r,o){let s=Pe(null);try{let a=null;r&kt.SignalBased&&(a=e[i][kg]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&kt.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,i):PC(e,a,i,o)}finally{Pe(s)}}function qF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)io(~r);else{let o=r,s=n[++i],a=n[++i];Bk(s,o);let c=e[o];a(2,c)}}}finally{io(-1)}}function bh(t,e,n,i,r,o,s,a,c,u,d){let f=e.blueprint.slice();return f[Ri]=r,f[ae]=i|4|128|8|64,(u!==null||t&&t[ae]&2048)&&(f[ae]|=2048),LC(f),f[St]=f[Ns]=t,f[Rn]=n,f[Pn]=s||t&&t[Pn],f[Xe]=a||t&&t[Xe],f[As]=c||t&&t[As]||null,f[an]=o,f[hh]=dF(),f[Fc]=d,f[MC]=u,f[On]=e.type==2?t[On]:f,f}function Qc(t,e,n,i,r){let o=t.data[e];if(o===null)o=WF(t,e,n,i,r),Lk()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=Fk();o.injectorIndex=s===null?-1:s.injectorIndex}return Wc(o,!0),o}function WF(t,e,n,i,r){let o=$C(),s=HC(),a=s?o:o&&o.parent,c=t.data[e]=XF(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function FI(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function VI(t,e,n,i,r){let o=uo(),s=i&2;try{io(-1),s&&e.length>Ti&&OI(t,e,Ti,!1),zn(s?2:0,r),n(i,r)}finally{io(o),zn(s?3:1,r)}}function LI(t,e,n){if(RC(e)){let i=Pe(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Pe(i)}}}function BI(t,e,n){jC()&&(o2(t,e,n,yn(n,e)),(n.flags&64)===64&&GI(t,e,n))}function jI(t,e,n=yn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function UI(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=U_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function U_(t,e,n,i,r,o,s,a,c,u,d){let f=Ti+i,g=f+r,_=QF(f,g),D=typeof u=="function"?u():u;return _[_e]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:d}}function QF(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Ni);return n}function KF(t,e,n,i){let o=i.get(vF,_I)||n===Wn.ShadowDom,s=t.selectRootElement(e,o);return YF(s),s}function YF(t){JF(t)}var JF=()=>null;function ZF(t,e,n,i){let r=WI(e);r.push(n),t.firstCreatePass&&QI(t).push(i,r.length-1)}function XF(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return UC()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function LD(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a,c=kt.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}t===0?BD(i,n,u,a,c):BD(i,n,u,a)}return i}function BD(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function e2(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let d=i;d<r;d++){let f=o[d],g=n?n.get(f):null,_=g?g.inputs:null,D=g?g.outputs:null;c=LD(0,f.inputs,d,c,_),u=LD(1,f.outputs,d,u,D);let x=c!==null&&s!==null&&!w_(e)?m2(c,d,s):null;a.push(x)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function t2(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function $_(t,e,n,i,r,o,s,a){let c=yn(e,n),u=e.inputs,d;!a&&u!=null&&(d=u[i])?(H_(t,n,d,i,r),fh(e)&&n2(n,e.index)):e.type&3?(i=t2(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(c,i,r)):e.type&12}function n2(t,e){let n=hr(e,t);n[ae]&16||(n[ae]|=64)}function $I(t,e,n,i){if(jC()){let r=i===null?null:{"":-1},o=a2(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&HI(t,e,n,s,r,a),r&&c2(n,i,r)}n.mergedAttrs=Nc(n.mergedAttrs,n.attrs)}function HI(t,e,n,i,r,o){for(let u=0;u<i.length;u++)Rm(Qd(n,e),t,i[u].type);u2(n,t.data.length,i.length);for(let u=0;u<i.length;u++){let d=i[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=FI(t,e,i.length,null);for(let u=0;u<i.length;u++){let d=i[u];n.mergedAttrs=Nc(n.mergedAttrs,d.hostAttrs),d2(t,n,e,c,d),l2(c,d,r),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}e2(t,n,o)}function i2(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;r2(s)!=a&&s.push(a),s.push(n,i,o)}}function r2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function o2(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;fh(n)&&h2(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Qd(n,e),so(i,e);let s=n.initialInputs;for(let a=r;a<o;a++){let c=t.data[a],u=oo(e,t,a,n);if(so(u,e),s!==null&&g2(e,a-r,u,c,n,s),lr(c)){let d=hr(n.index,e);d[Rn]=oo(e,t,a,n)}}}function GI(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=jk();try{io(o);for(let a=i;a<r;a++){let c=t.data[a],u=e[a];Mm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&s2(c,u)}}finally{io(-1),Mm(s)}}function s2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function a2(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(_C(e,s.selectors,!1))if(i||(i=[]),lr(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let c=a.length;Bm(t,e,c)}else i.unshift(s),Bm(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function Bm(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function c2(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new ne(-301,!1);i.push(e[r],o)}}}function l2(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;lr(e)&&(n[""]=t)}}function u2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function d2(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=Ts(r.type,!0)),s=new ro(o,lr(r),se);t.blueprint[i]=s,n[i]=s,i2(t,e,i,FI(t,n,r.hostVars,Ni),r)}function h2(t,e,n){let i=yn(e,t),r=UI(n),o=t[Pn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Eh(t,bh(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=a}function f2(t,e,n,i,r,o){let s=yn(t,e);p2(e[Xe],s,o,t.value,n,i,r)}function p2(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?ch(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function g2(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],d=s[a++],f=s[a++];kI(i,n,c,u,d,f)}}function m2(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],n[r+1]);break}}r+=2}return i}function zI(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function qI(t,e){let n=t.contentQueries;if(n!==null){let i=Pe(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];T_(o),a.contentQueries(2,e[s],s)}}}finally{Pe(i)}}}function Eh(t,e){return t[Lc]?t[SD][An]=e:t[Lc]=e,t[SD]=e,e}function jm(t,e,n){T_(0);let i=Pe(null);try{e(t,n)}finally{Pe(i)}}function WI(t){return t[Vc]||(t[Vc]=[])}function QI(t){return t.cleanup||(t.cleanup=[])}function KI(t,e){let n=t[As],i=n?n.get(Kn,null):null;i&&i.handleError(e)}function H_(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],d=t.data[s];kI(d,u,i,a,c,r)}}function _2(t,e,n){let i=FC(e,t);xF(t[Xe],i,n)}function y2(t,e){let n=hr(e,t),i=n[_e];v2(i,n);let r=n[Ri];r!==null&&n[Fc]===null&&(n[Fc]=k_(r,n[As])),G_(i,n,n[Rn])}function v2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function G_(t,e,n){S_(e);try{let i=t.viewQuery;i!==null&&jm(1,i,n);let r=t.template;r!==null&&VI(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ii]?.finishViewCreation(t),t.staticContentQueries&&qI(t,e),t.staticViewQueries&&jm(2,t.viewQuery,n);let o=t.components;o!==null&&w2(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[ae]&=-5,x_()}}function w2(t,e){for(let n=0;n<e.length;n++)y2(t,e[n])}function b2(t,e,n,i){let r=Pe(null);try{let o=e.tView,a=t[ae]&4096?4096:16,c=bh(t,o,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=t[e.index];c[qc]=u;let d=t[Ii];return d!==null&&(c[Ii]=d.createEmbeddedView(o)),G_(o,c,n),c}finally{Pe(r)}}function jD(t,e){return!e||e.firstChild===null||dI(t)}function E2(t,e,n,i=!0){let r=e[_e];if(PF(r,e,t,n),i){let s=Lm(n,t),a=e[Xe],c=L_(a,t[no]);c!==null&&AF(r,t[an],a,e,c,s)}let o=e[Fc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Jd(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(Qn(o)),Pi(o)&&D2(o,i);let s=n.type;if(s&8)Jd(t,e,n.child,i);else if(s&32){let a=V_(n,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=MI(e,n);if(Array.isArray(a))i.push(...a);else{let c=jc(e[On]);Jd(c[_e],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function D2(t,e){for(let n=rn;n<t.length;n++){let i=t[n],r=i[_e].firstChild;r!==null&&Jd(i[_e],i,r,e)}t[no]!==t[Ri]&&e.push(t[no])}var YI=[];function C2(t){return t[to]??I2(t)}function I2(t){let e=YI.pop()??Object.create(S2);return e.lView=t,e}function T2(t){t.lView[to]!==t&&(t.lView=null,YI.push(t))}var S2=Re(z({},zE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Bc(t.lView)},consumerOnSignalRead(){this.lView[to]=this}}),JI=100;function ZI(t,e=!0,n=0){let i=t[Pn],r=i.rendererFactory,o=!1;o||r.begin?.();try{x2(t,n)}catch(s){throw e&&KI(t,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function x2(t,e){Um(t,e);let n=0;for(;I_(t);){if(n===JI)throw new ne(103,!1);n++,Um(t,1)}}function M2(t,e,n,i){let r=e[ae];if((r&256)===256)return;let o=!1;!o&&e[Pn].inlineEffectRunner?.flush(),S_(e);let s=null,a=null;!o&&A2(t)&&(a=C2(e),s=qE(a));try{LC(e),Vk(t.bindingStartIndex),n!==null&&VI(t,e,n,2,i);let c=(r&3)===3;if(!o)if(c){let f=t.preOrderCheckHooks;f!==null&&kd(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Fd(e,f,0,null),cm(e,0)}if(R2(e),XI(e,0),t.contentQueries!==null&&qI(t,e),!o)if(c){let f=t.contentCheckHooks;f!==null&&kd(e,f)}else{let f=t.contentHooks;f!==null&&Fd(e,f,1),cm(e,1)}qF(t,e);let u=t.components;u!==null&&tT(e,u,0);let d=t.viewQuery;if(d!==null&&jm(2,d,i),!o)if(c){let f=t.viewCheckHooks;f!==null&&kd(e,f)}else{let f=t.viewHooks;f!==null&&Fd(e,f,2),cm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[am]){for(let f of e[am])f();e[am]=null}o||(e[ae]&=-73)}catch(c){throw Bc(e),c}finally{a!==null&&(WE(a,s),T2(a)),x_()}}function A2(t){return t.type!==2}function XI(t,e){for(let n=fI(t);n!==null;n=pI(n))for(let i=rn;i<n.length;i++){let r=n[i];eT(r,e)}}function R2(t){for(let e=fI(t);e!==null;e=pI(e)){if(!(e[ae]&E_.HasTransplantedViews))continue;let n=e[Rs];for(let i=0;i<n.length;i++){let r=n[i],o=r[St];xk(r)}}}function P2(t,e,n){let i=hr(e,t);eT(i,n)}function eT(t,e){C_(t)&&Um(t,e)}function Um(t,e){let i=t[_e],r=t[ae],o=t[to],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Fg(o)),o&&(o.dirty=!1),t[ae]&=-9217,s)M2(i,t,i.template,t[Rn]);else if(r&8192){XI(t,1);let a=i.components;a!==null&&tT(t,a,1)}}function tT(t,e,n){for(let i=0;i<e.length;i++)P2(t,e[i],n)}function z_(t){for(t[Pn].changeDetectionScheduler?.notify();t;){t[ae]|=64;let e=jc(t);if(yk(t)&&!e)return t;t=e}return null}var ao=class{get rootNodes(){let e=this._lView,n=e[_e];return Jd(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(e){this._lView[Rn]=e}get destroyed(){return(this._lView[ae]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[St];if(Pi(e)){let n=e[Gd],i=n?n.indexOf(this):-1;i>-1&&(Vm(e,i),$d(n,i))}this._attachedToViewContainer=!1}II(this._lView[_e],this._lView)}onDestroy(e){BC(this._lView,e)}markForCheck(){z_(this._cdRefInjectingView||this._lView)}detach(){this._lView[ae]&=-129}reattach(){xm(this._lView),this._lView[ae]|=128}detectChanges(){this._lView[ae]|=1024,ZI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,DI(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e,xm(this._lView)}},xi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=k2;let t=e;return t})(),O2=xi,N2=class extends O2{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=b2(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new ao(r)}};function k2(){return q_(Xt(),Ae())}function q_(t,e){return t.type&4?new N2(e,t,Ls(t,e)):null}var qQ=new RegExp(`^(\\d+)*(${_F}|${mF})*(.*)`);var F2=()=>null;function UD(t,e){return F2(t,e)}var Zd=class{},$m=class{},Xd=class{};function V2(t){let e=Error(`No component factory found for ${Gt(t)}.`);return e[L2]=t,e}var L2="ngComponent";var Hm=class{resolveComponentFactory(e){throw V2(e)}},Dh=(()=>{let e=class e{};e.NULL=new Hm;let t=e;return t})(),Uc=class{},ho=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>B2();let t=e;return t})();function B2(){let t=Ae(),e=Xt(),n=hr(e.index,t);return(Xr(n)?n:t)[Xe]}var j2=(()=>{let e=class e{};e.\u0275prov=q({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),fm={};var $D=new Set;function W_(t){$D.has(t)||($D.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ds=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ds||{}),U2={destroy(){}};function Ch(t,e){!e&&gk(Ch);let n=e?.injector??L(ft);if(!IF(n))return U2;W_("NgAfterNextRender");let i=n.get(Q_),r=i.handler??=new zm,o=e?.phase??Ds.MixedReadWrite,s=()=>{r.unregister(c),a()},a=n.get(_h).onDestroy(s),c=Ai(n,()=>new Gm(o,()=>{s(),t()}));return r.register(c),{destroy:s}}var Gm=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.errorHandler=L(Kn,{optional:!0}),L(Zd,{optional:!0})?.notify(1)}invoke(){try{this.callbackFn()}catch(e){this.errorHandler?.handleError(e)}}},zm=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ds.EarlyRead]:new Set,[Ds.Write]:new Set,[Ds.MixedReadWrite]:new Set,[Ds.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Q_=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function qm(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=vm(r,a);else if(o==2){let c=a,u=e[++s];i=vm(i,c+": "+u+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var eh=class extends Dh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ci(e);return new co(n,this.ngModule)}};function HD(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function $2(t){let e=t.toLowerCase();return e==="svg"?Ek:e==="math"?Dk:null}var Wm=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=lh(i);let r=this.injector.get(e,fm,i);return r!==fm||n===fm?r:this.parentInjector.get(e,n,i)}},co=class extends Xd{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=HD(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return HD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=XN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=Pe(null);try{r=r||this.ngModule;let s=r instanceof Tt?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Wm(e,s):e,c=a.get(Uc,null);if(c===null)throw new ne(407,!1);let u=a.get(j2,null),d=a.get(Q_,null),f=a.get(Zd,null),g={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},_=c.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",x=i?KF(_,i,this.componentDef.encapsulation,a):EI(_,D,$2(D)),T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let V=null;x!==null&&(V=k_(x,a,!0));let j=U_(0,null,null,1,0,null,null,null,null,null,null),O=bh(null,j,null,T,null,null,g,_,a,null,V);S_(O);let U,ee;try{let Y=this.componentDef,b,y=null;Y.findHostDirectiveDefs?(b=[],y=new Map,Y.findHostDirectiveDefs(Y,b,y),b.push(Y)):b=[Y];let v=H2(O,x),E=G2(v,x,Y,b,O,g,_);ee=VC(j,Ti),x&&W2(_,Y,x,i),n!==void 0&&Q2(ee,this.ngContentSelectors,n),U=q2(E,Y,b,y,O,[K2]),G_(j,O,null)}finally{x_()}return new Qm(this.componentType,U,Ls(ee,O),O,ee)}finally{Pe(o)}}},Qm=class extends $m{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ao(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;H_(o[_e],o,r,e,n),this.previousInputValues.set(e,n);let s=hr(this._tNode.index,o);z_(s)}}get injector(){return new eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function H2(t,e){let n=t[_e],i=Ti;return t[i]=e,Qc(n,i,2,"#host",null)}function G2(t,e,n,i,r,o,s){let a=r[_e];z2(i,t,e,s);let c=null;e!==null&&(c=k_(e,r[As]));let u=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=bh(r,UI(n),null,d,r[t.index],t,o,u,null,null,c);return a.firstCreatePass&&Bm(a,t,i.length-1),Eh(r,f),r[t.index]=f}function z2(t,e,n,i){for(let r of t)e.mergedAttrs=Nc(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(qm(e,e.mergedAttrs,!0),n!==null&&PI(i,n,e))}function q2(t,e,n,i,r,o){let s=Xt(),a=r[_e],c=yn(s,r);HI(a,r,s,n,null,i);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,g=oo(r,a,f,s);so(g,r)}GI(a,r,s),c&&so(c,r);let u=oo(r,a,s.directiveStart+s.componentOffset,s);if(t[Rn]=r[Rn]=u,o!==null)for(let d of o)d(u,e);return LI(a,s,r),u}function W2(t,e,n,i){if(i)Dm(t,n,["ng-version","17.3.7"]);else{let{attrs:r,classes:o}=ek(e.selectors[0]);r&&Dm(t,n,r),o&&o.length>0&&RI(t,n,o.join(" "))}}function Q2(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function K2(){let t=Xt();R_(Ae()[_e],t)}var ki=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Y2;let t=e;return t})();function Y2(){let t=Xt();return iT(t,Ae())}var J2=ki,nT=class extends J2{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Ls(this._hostTNode,this._hostLView)}get injector(){return new eo(this._hostTNode,this._hostLView)}get parentInjector(){let e=P_(this._hostTNode,this._hostLView);if(eI(e)){let n=Wd(e,this._hostLView),i=qd(e),r=n[_e].data[i+8];return new eo(r,n)}else return new eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=GD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-rn}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=UD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,jD(this._hostTNode,s)),a}createComponent(e,n,i,r,o){let s=e&&!_k(e),a;if(s)a=n;else{let D=n||{};a=D.index,i=D.injector,r=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let c=s?e:new co(Ci(e)),u=i||this.parentInjector;if(!o&&c.ngModule==null){let x=(s?u:this.parentInjector).get(Tt,null);x&&(o=x)}let d=Ci(c.componentType??{}),f=UD(this._lContainer,d?.id??null),g=f?.firstChild??null,_=c.create(u,r,g,o);return this.insertImpl(_.hostView,a,jD(this._hostTNode,f)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(Sk(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[St],u=new nT(c,c[an],c[St]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return E2(s,r,o,i),e.attachToViewContainerRef(),dC(pm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=GD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=Vm(this._lContainer,n);i&&($d(pm(this._lContainer),n),II(i[_e],i))}detach(e){let n=this._adjustIndex(e,-1),i=Vm(this._lContainer,n);return i&&$d(pm(this._lContainer),n)!=null?new ao(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function GD(t){return t[Gd]}function pm(t){return t[Gd]||(t[Gd]=[])}function iT(t,e){let n,i=e[t.index];return Pi(i)?n=i:(n=zI(i,e,null,t),e[t.index]=n,Eh(e,n)),X2(n,e,t,i),new nT(n,t,e)}function Z2(t,e){let n=t[Xe],i=n.createComment(""),r=yn(e,t),o=L_(n,r);return Yd(n,o,i,LF(n,r),!1),i}var X2=nV,eV=()=>!1;function tV(t,e,n){return eV(t,e,n)}function nV(t,e,n,i){if(t[no])return;let r;n.type&8?r=Qn(i):r=Z2(e,n),t[no]=r}var Km=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Ym=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)K_(e,n).matches!==null&&this.queries[n].setDirty()}},Jm=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=uV(e):this.predicate=e}},Zm=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Xm=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,iV(n,o)),this.matchTNodeWithReadOption(e,n,Vd(n,e,o,!1,!1))}else i===xi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Vd(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===en||r===ki||r===xi&&n.type&4)this.addMatch(n.index,-2);else{let o=Vd(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function iV(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function rV(t,e){return t.type&11?Ls(t,e):t.type&4?q_(t,e):null}function oV(t,e,n,i){return n===-1?rV(e,t):n===-2?sV(t,e,i):oo(t,t[_e],n,e)}function sV(t,e,n){if(n===en)return Ls(e,t);if(n===xi)return q_(e,t);if(n===ki)return iT(e,t)}function rT(t,e,n,i){let r=e[Ii].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(oV(e,d,s[c+1],n.metadata.read))}}r.matches=a}return r.matches}function e_(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=rT(t,e,r,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let f=rn;f<d.length;f++){let g=d[f];g[qc]===g[St]&&e_(g[_e],g,u,i)}if(d[Rs]!==null){let f=d[Rs];for(let g=0;g<f.length;g++){let _=f[g];e_(_[_e],_,u,i)}}}}}return i}function aV(t,e){return t[Ii].queries[e].queryList}function cV(t,e,n){let i=new km((n&4)===4);return ZF(t,e,i,i.destroy),(e[Ii]??=new Ym).queries.push(new Km(i))-1}function lV(t,e,n){let i=_t();return i.firstCreatePass&&(dV(i,new Jm(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),cV(i,Ae(),e)}function uV(t){return t.split(",").map(e=>e.trim())}function dV(t,e,n){t.queries===null&&(t.queries=new Zm),t.queries.track(new Xm(e,n))}function K_(t,e){return t.queries.getByIndex(e)}function hV(t,e){let n=t[_e],i=K_(n,e);return i.crossesNgTemplate?e_(n,t,e,[]):rT(n,t,i,e)}function fV(t){return typeof t=="function"&&t[kg]!==void 0}function oT(t){return fV(t)&&typeof t.set=="function"}function pV(t){let e=[],n=new Map;function i(r){let o=n.get(r);if(!o){let s=t(r);n.set(r,o=s.then(yV))}return o}return th.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(i(r.templateUrl).then(u=>{r.template=u}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let u=r.styles.length,d=r.styleUrls;r.styleUrls.forEach((f,g)=>{a.push(""),s.push(i(f).then(_=>{a[u+g]=_,d.splice(d.indexOf(f),1),d.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(i(r.styleUrl).then(u=>{a.push(u),r.styleUrl=void 0}));let c=Promise.all(s).then(()=>vV(o));e.push(c)}),mV(),Promise.all(e).then(()=>{})}var th=new Map,gV=new Set;function mV(){let t=th;return th=new Map,t}function _V(){return th.size===0}function yV(t){return typeof t=="string"?t:t.text()}function vV(t){gV.delete(t)}function wV(t){return Object.getPrototypeOf(t.prototype).constructor}function fo(t){let e=wV(t.type),n=!0,i=[t];for(;e;){let r;if(lr(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=Rd(t.inputs),s.inputTransforms=Rd(t.inputTransforms),s.declaredInputs=Rd(t.declaredInputs),s.outputs=Rd(t.outputs);let a=r.hostBindings;a&&IV(t,a);let c=r.viewQuery,u=r.contentQueries;if(c&&DV(t,c),u&&CV(t,u),bV(t,r),yN(t.outputs,r.outputs),lr(r)&&r.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===fo&&(n=!1)}}e=Object.getPrototypeOf(e)}EV(i)}function bV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function EV(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Nc(r.hostAttrs,n=Nc(n,r.hostAttrs))}}function Rd(t){return t===Ss?{}:t===Zt?[]:t}function DV(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function CV(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function IV(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function Y_(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var ur=class{},$c=class{};var nh=class extends ur{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new eh(this);let r=bC(e);this._bootstrapComponents=bI(r.bootstrap),this._r3Injector=lI(e,n,[{provide:ur,useValue:this},{provide:Dh,useValue:this.componentFactoryResolver},...i],Gt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ih=class extends $c{constructor(e){super(),this.moduleType=e}create(e){return new nh(this.moduleType,e,[])}};function TV(t,e,n){return new nh(t,e,n)}var t_=class extends ur{constructor(e){super(),this.componentFactoryResolver=new eh(this),this.instance=null;let n=new kc([...e.providers,{provide:ur,useValue:this},{provide:Dh,useValue:this.componentFactoryResolver}],e.parent||dh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ih(t,e,n=null){return new t_({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Th=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new st(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sT(t){return xV(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function SV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function xV(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function js(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function MV(t){return(t.flags&32)===32}function AV(t,e,n,i,r,o,s,a,c){let u=e.consts,d=Qc(e,t,4,s||null,zd(u,a));$I(e,n,d,zd(u,c)),R_(e,d);let f=d.tView=U_(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function po(t,e,n,i,r,o,s,a){let c=Ae(),u=_t(),d=t+Ti,f=u.firstCreatePass?AV(d,u,c,e,n,i,r,o,s):u.data[d];Wc(f,!1);let g=RV(u,c,f,t);M_()&&B_(u,c,g,f),so(g,c);let _=zI(g,c,g,f);return c[d]=_,Eh(c,_),tV(_,f,c),D_(f)&&BI(u,c,f),s!=null&&jI(c,f,a),po}var RV=PV;function PV(t,e,n,i){return A_(!0),e[Xe].createComment("")}function zD(...t){}function OV(){let t=typeof Ht.requestAnimationFrame=="function",e=Ht[t?"requestAnimationFrame":"setTimeout"],n=Ht[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var fe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qe(!1),this.onMicrotaskEmpty=new Qe(!1),this.onStable=new Qe(!1),this.onError=new Qe(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=OV().nativeRequestAnimationFrame,FV(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ne(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,NV,zD,zD);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},NV={};function J_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function kV(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ht,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,n_(t),t.isCheckStableRunning=!0,J_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),n_(t))}function FV(t){let e=()=>{kV(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(VV(a))return n.invokeTask(r,o,s,a);try{return qD(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),WD(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return qD(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),WD(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,n_(t),J_(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function n_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function qD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function WD(t){t._nesting--,J_(t)}var i_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qe,this.onMicrotaskEmpty=new Qe,this.onStable=new Qe,this.onError=new Qe}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}};function VV(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function LV(t="zone.js",e){return t==="noop"?new i_:t==="zone.js"?new fe(e):t}function Us(t,e,n,i){let r=Ae(),o=ph();if(js(r,o,e)){let s=_t(),a=gh();f2(a,r,t,e,n,i)}return Us}function aT(t,e,n,i){return js(t,ph(),n)?e+ch(n)+i:Ni}function Pd(t,e){return t<<17|e<<2}function lo(t){return t>>17&32767}function BV(t){return(t&2)==2}function jV(t,e){return t&131071|e<<17}function r_(t){return t|2}function Ps(t){return(t&131068)>>2}function gm(t,e){return t&-131069|e<<2}function UV(t){return(t&1)===1}function o_(t){return t|1}function $V(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=lo(s),c=Ps(s);t[i]=n;let u=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||zc(f,d)>0)&&(u=!0)}else d=n;if(r)if(c!==0){let g=lo(t[a+1]);t[i+1]=Pd(g,a),g!==0&&(t[g+1]=gm(t[g+1],i)),t[a+1]=jV(t[a+1],i)}else t[i+1]=Pd(a,0),a!==0&&(t[a+1]=gm(t[a+1],i)),a=i;else t[i+1]=Pd(c,0),a===0?a=i:t[c+1]=gm(t[c+1],i),c=i;u&&(t[i+1]=r_(t[i+1])),QD(t,d,i,!0),QD(t,d,i,!1),HV(e,d,t,i,o),s=Pd(a,c),o?e.classBindings=s:e.styleBindings=s}function HV(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&zc(o,e)>=0&&(n[i+1]=o_(n[i+1]))}function QD(t,e,n,i){let r=t[n+1],o=e===null,s=i?lo(r):Ps(r),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];GV(c,e)&&(a=!0,t[s+1]=i?o_(u):r_(u)),s=i?lo(u):Ps(u)}a&&(t[n+1]=i?r_(r):o_(r))}function GV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?zc(t,e)>=0:!1}var Mn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zV(t){return t.substring(Mn.key,Mn.keyEnd)}function qV(t){return WV(t),cT(t,lT(t,0,Mn.textEnd))}function cT(t,e){let n=Mn.textEnd;return n===e?-1:(e=Mn.keyEnd=QV(t,Mn.key=e,n),lT(t,e,n))}function WV(t){Mn.key=0,Mn.keyEnd=0,Mn.value=0,Mn.valueEnd=0,Mn.textEnd=t.length}function lT(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function QV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function cn(t,e,n){let i=Ae(),r=ph();if(js(i,r,e)){let o=_t(),s=gh();$_(o,s,i,t,e,i[Xe],n,!1)}return cn}function s_(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";H_(t,n,o[s],s,i)}function $s(t,e){return YV(t,e,null,!0),$s}function Sh(t){JV(iL,KV,t,!0)}function KV(t,e){for(let n=qV(e);n>=0;n=cT(e,n))v_(t,zV(e),!0)}function YV(t,e,n,i){let r=Ae(),o=_t(),s=zC(2);if(o.firstUpdatePass&&dT(o,t,s,i),e!==Ni&&js(r,s,e)){let a=o.data[uo()];hT(o,a,r,r[Xe],t,r[s+1]=oL(e,n),i,s)}}function JV(t,e,n,i){let r=_t(),o=zC(2);r.firstUpdatePass&&dT(r,null,o,i);let s=Ae();if(n!==Ni&&js(s,o,n)){let a=r.data[uo()];if(fT(a,i)&&!uT(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=vm(c,n||"")),s_(r,a,s,n,i)}else rL(r,a,s,s[Xe],s[o+1],s[o+1]=nL(t,e,n),i,o)}}function uT(t,e){return e>=t.expandoStartIndex}function dT(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[uo()],s=uT(t,n);fT(o,i)&&e===null&&!s&&(e=!1),e=ZV(r,o,e,i),$V(r,o,e,n,s,i)}}function ZV(t,e,n,i){let r=Uk(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=mm(null,t,e,n,i),n=Hc(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=mm(r,t,e,n,i),o===null){let c=XV(t,e,i);c!==void 0&&Array.isArray(c)&&(c=mm(null,t,e,c[1],i),c=Hc(c,e.attrs,i),eL(t,e,i,c))}else o=tL(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function XV(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Ps(i)!==0)return t[lo(i)]}function eL(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[lo(r)]=i}function tL(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=Hc(i,s,n)}return Hc(i,e.attrs,n)}function mm(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=Hc(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function Hc(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),v_(t,s,n?!0:e[++o]))}return t===void 0?null:t}function nL(t,e,n){if(n==null||n==="")return Zt;let i=[],r=Bs(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function iL(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&v_(t,i,n)}function rL(t,e,n,i,r,o,s,a){r===Ni&&(r=Zt);let c=0,u=0,d=0<r.length?r[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let g=c<r.length?r[c+1]:void 0,_=u<o.length?o[u+1]:void 0,D=null,x;d===f?(c+=2,u+=2,g!==_&&(D=f,x=_)):f===null||d!==null&&d<f?(c+=2,D=d):(u+=2,D=f,x=_),D!==null&&hT(t,e,n,i,D,x,s,a),d=c<r.length?r[c]:null,f=u<o.length?o[u]:null}}function hT(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],d=UV(u)?KD(c,e,n,r,Ps(u),s):void 0;if(!rh(d)){rh(o)||BV(u)&&(o=KD(c,null,n,r,a,s));let f=FC(uo(),n);GF(i,s,f,r,o)}}function KD(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let c=t[r],u=Array.isArray(c),d=u?c[1]:c,f=d===null,g=n[r+1];g===Ni&&(g=f?Zt:void 0);let _=f?om(g,i):d===i?g:void 0;if(u&&!rh(_)&&(_=om(c,i)),rh(_)&&(a=_,s))return a;let D=t[r+1];r=s?lo(D):Ps(D)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=om(c,i))}return a}function rh(t){return t!==void 0}function oL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Gt(Bs(t)))),t}function fT(t,e){return(t.flags&(e?8:16))!==0}function sL(t,e,n,i,r,o){let s=e.consts,a=zd(s,r),c=Qc(e,t,2,i,a);return $I(e,n,c,zd(s,o)),c.attrs!==null&&qm(c,c.attrs,!1),c.mergedAttrs!==null&&qm(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function W(t,e,n,i){let r=Ae(),o=_t(),s=Ti+t,a=r[Xe],c=o.firstCreatePass?sL(s,o,r,e,n,i):o.data[s],u=aL(o,r,c,a,e,t);r[s]=u;let d=D_(c);return Wc(c,!0),PI(a,u,c),!MV(c)&&M_()&&B_(o,r,u,c),Rk()===0&&so(u,r),Pk(),d&&(BI(o,r,c),LI(o,c,r)),i!==null&&jI(r,c),W}function Q(){let t=Xt();HC()?GC():(t=t.parent,Wc(t,!1));let e=t;Nk(e)&&kk(),Ok();let n=_t();return n.firstCreatePass&&(R_(n,t),RC(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Qk(e)&&s_(n,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Kk(e)&&s_(n,e,Ae(),e.stylesWithoutHost,!1),Q}function we(t,e,n,i){return W(t,e,n,i),Q(),we}var aL=(t,e,n,i,r,o)=>(A_(!0),EI(i,r,Gk()));function Hs(){return Ae()}var oh="en-US";var cL=oh;function lL(t){typeof t=="string"&&(cL=t.toLowerCase().replace(/_/g,"-"))}function pt(t,e,n,i){let r=Ae(),o=_t(),s=Xt();return pT(o,r,r[Xe],s,t,e,i),pt}function uL(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[Vc],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function pT(t,e,n,i,r,o,s){let a=D_(i),u=t.firstCreatePass&&QI(t),d=e[Rn],f=WI(e),g=!0;if(i.type&3||s){let x=yn(i,e),T=s?s(x):x,V=f.length,j=s?U=>s(Qn(U[i.index])):i.index,O=null;if(!s&&a&&(O=uL(t,e,r,i.index)),O!==null){let U=O.__ngLastListenerFn__||O;U.__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,g=!1}else{o=JD(i,e,d,o,!1);let U=n.listen(T,r,o);f.push(o,U),u&&u.push(r,j,V,V+1)}}else o=JD(i,e,d,o,!1);let _=i.outputs,D;if(g&&_!==null&&(D=_[r])){let x=D.length;if(x)for(let T=0;T<x;T+=2){let V=D[T],j=D[T+1],ee=e[V][j].subscribe(o),Y=f.length;f.push(o,ee),u&&u.push(r,i.index,Y,-(Y+1))}}}function YD(t,e,n,i){let r=Pe(null);try{return zn(6,e,n),n(i)!==!1}catch(o){return KI(t,o),!1}finally{zn(7,e,n),Pe(r)}}function JD(t,e,n,i,r){return function o(s){if(s===Function)return i;let a=t.componentOffset>-1?hr(t.index,e):e;z_(a);let c=YD(e,n,i,s),u=o.__ngNextListenerFn__;for(;u;)c=YD(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return r&&c===!1&&s.preventDefault(),c}}function Yn(t=1){return Hk(t)}function dL(t,e){let n=null,i=QN(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?_C(t,o,!0):JN(i,o))return r}return n}function gT(t){let e=Ae()[On][an];if(!e.projection){let n=t?t.length:1,i=e.projection=BN(n,null),r=i.slice(),o=e.child;for(;o!==null;){let s=t?dL(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function mT(t,e=0,n){let i=Ae(),r=_t(),o=Qc(r,Ti+t,16,null,n||null);o.projection===null&&(o.projection=e),GC(),(!i[Fc]||UC())&&(o.flags&32)!==32&&$F(r,i,o)}function Z_(t,e,n){return Gs(t,"",e,"",n),Z_}function Gs(t,e,n,i,r){let o=Ae(),s=aT(o,e,n,i);if(s!==Ni){let a=_t(),c=gh();$_(a,c,o,t,s,o[Xe],r,!1)}return Gs}function _T(t,e,n){lV(t,e,n)}function X_(t){let e=Ae(),n=_t(),i=qC();T_(i+1);let r=K_(n,i);if(t.dirty&&Tk(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=hV(e,i);t.reset(o,cF),t.notifyOnChanges()}return!0}return!1}function ey(){return aV(Ae(),qC())}function ce(t,e=""){let n=Ae(),i=_t(),r=t+Ti,o=i.firstCreatePass?Qc(i,r,1,e,null):i.data[r],s=hL(i,n,o,e,t);n[r]=s,M_()&&B_(i,n,s,o),Wc(o,!1)}var hL=(t,e,n,i,r)=>(A_(!0),SF(e[Xe],i));function Jn(t){return Kc("",t,""),Jn}function Kc(t,e,n){let i=Ae(),r=aT(i,t,e,n);return r!==Ni&&_2(i,uo(),r),Kc}function Fi(t,e,n){oT(e)&&(e=e());let i=Ae(),r=ph();if(js(i,r,e)){let o=_t(),s=gh();$_(o,s,i,t,e,i[Xe],n,!1)}return Fi}function fr(t,e){let n=oT(t);return n&&t.set(e),n}function Vi(t,e){let n=Ae(),i=_t(),r=Xt();return pT(i,n,n[Xe],r,t,e),Vi}function fL(t,e,n){let i=_t();if(i.firstCreatePass){let r=lr(t);a_(n,i.data,i.blueprint,r,!0),a_(e,i.data,i.blueprint,r,!1)}}function a_(t,e,n,i,r){if(t=$t(t),Array.isArray(t))for(let o=0;o<t.length;o++)a_(t[o],e,n,i,r);else{let o=_t(),s=Ae(),a=Xt(),c=Ms(t)?t:$t(t.provide),u=SC(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Ms(t)||!t.multi){let _=new ro(u,r,se),D=ym(c,e,r?d:d+g,f);D===-1?(Rm(Qd(a,s),o,c),_m(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(_),s.push(_)):(n[D]=_,s[D]=_)}else{let _=ym(c,e,d+g,f),D=ym(c,e,d,d+g),x=_>=0&&n[_],T=D>=0&&n[D];if(r&&!T||!r&&!x){Rm(Qd(a,s),o,c);let V=mL(r?gL:pL,n.length,r,i,u);!r&&T&&(n[D].providerFactory=V),_m(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(V),s.push(V)}else{let V=yT(n[r?D:_],u,!r&&i);_m(o,t,_>-1?_:D,V)}!r&&i&&T&&n[D].componentProviders++}}}function _m(t,e,n,i){let r=Ms(e),o=ck(e);if(r||o){let c=(o?$t(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let d=u.indexOf(n);d===-1?u.push(n,[i,c]):u[d+1].push(i,c)}else u.push(n,c)}}}function yT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ym(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function pL(t,e,n,i){return c_(this.multi,[])}function gL(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=oo(n,n[_e],this.providerFactory.index,i);o=a.slice(0,s),c_(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],c_(r,o);return o}function c_(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function mL(t,e,n,i,r){let o=new ro(t,n,se);return o.multi=[],o.index=e,o.componentProviders=0,yT(o,r,i&&!n),o}function xh(t,e=[]){return n=>{n.providersResolver=(i,r)=>fL(i,r?r(t):t,e)}}var _L=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=CC(!1,i.type),o=r.length>0?Ih([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=q({token:e,providedIn:"environment",factory:()=>new e(N(Tt))});let t=e;return t})();function Yc(t){W_("NgStandalone"),t.getStandaloneInjector=e=>e.get(_L).getOrCreateStandaloneInjector(t)}var Od=null;function yL(t){Od!==null&&(t.defaultEncapsulation!==Od.defaultEncapsulation||t.preserveWhitespaces!==Od.preserveWhitespaces)||(Od=t)}var Mi=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ty=new Mi("17.3.7"),Mh=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var ny=new G(""),Jc=new G(""),Ah=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,iy||(vL(o),o.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(i)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),i()},r)),this._callbacks.push({doneCb:i,timeoutId:s,updateCb:o})}whenStable(i,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,o){return[]}};e.\u0275fac=function(r){return new(r||e)(N(fe),N(Rh),N(Jc))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Rh=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return iy?.findTestabilityInTree(this,i,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function vL(t){iy=t}var iy;function go(t){return!!t&&typeof t.then=="function"}function vT(t){return!!t&&typeof t.subscribe=="function"}var Ph=new G(""),wT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=L(Ph,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(go(s))i.push(s);else if(vT(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ry=new G("");function wL(){KE(()=>{throw new ne(600,!1)})}function bL(t){return t.isBoundToModule}function EL(t,e,n){try{let i=n();return go(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}function bT(t,e){return Array.isArray(e)?e.reduce(bT,t):z(z({},t),e)}var pr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(uI),this.afterRenderEffectManager=L(Q_),this.externalTestViews=new Set,this.beforeRender=new Me,this.afterTick=new Me,this.componentTypes=[],this.components=[],this.isStable=L(Th).hasPendingTasks.pipe(Z(i=>!i)),this._injector=L(Tt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof Xd;if(!this._injector.get(wT).done){let _=!o&&wC(i),D=!1;throw new ne(405,D)}let a;o?a=i:a=this._injector.get(Dh).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=bL(a)?void 0:this._injector.get(ur),u=r||a.selector,d=a.create(ft.NULL,[],u,c),f=d.location.nativeElement,g=d.injector.get(ny,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Bd(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new ne(101,!1);let r=Pe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Pe(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===JI)throw new ne(103,!1);if(i){let s=r===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)DL(a,s,c)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>l_(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>l_(s))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Bd(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(ry,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Bd(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new ne(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Bd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function DL(t,e,n){!e&&!l_(t)||CL(t,n,e)}function l_(t){return I_(t)}function CL(t,e,n){let i;n?(i=0,t[ae]|=1024):t[ae]&64?i=0:i=1,ZI(t,e,i)}var u_=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Oh=(()=>{let e=class e{compileModuleSync(i){return new ih(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=bC(i),s=bI(o.declarations).reduce((a,c)=>{let u=Ci(c);return u&&a.push(new co(u)),a},[]);return new u_(r,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),IL=new G("");function TL(t,e,n){let i=new ih(n);return Promise.resolve(i)}function ZD(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var SL=(()=>{let e=class e{constructor(){this.zone=L(fe),this.applicationRef=L(pr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xL(t){return[{provide:fe,useFactory:t},{provide:xs,multi:!0,useFactory:()=>{let e=L(SL,{optional:!0});return()=>e.initialize()}},{provide:xs,multi:!0,useFactory:()=>{let e=L(RL);return()=>{e.initialize()}}},{provide:uI,useFactory:ML}]}function ML(){let t=L(fe),e=L(Kn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function AL(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var RL=(()=>{let e=class e{constructor(){this.subscription=new nt,this.initialized=!1,this.zone=L(fe),this.pendingTasks=L(Th)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function PL(){return typeof $localize<"u"&&$localize.locale||oh}var Nh=new G("",{providedIn:"root",factory:()=>L(Nh,ye.Optional|ye.SkipSelf)||PL()});var ET=new G(""),DT=(()=>{let e=class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){let o=LV(r?.ngZone,AL({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{let s=TV(i.moduleType,this.injector,xL(()=>o)),a=s.injector.get(Kn,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:u=>{a.handleError(u)}});s.onDestroy(()=>{Bd(this._modules,s),c.unsubscribe()})}),EL(a,o,()=>{let c=s.injector.get(wT);return c.runInitializers(),c.donePromise.then(()=>{let u=s.injector.get(Nh,oh);return lL(u||oh),this._moduleDoBootstrap(s),s})})})}bootstrapModule(i,r=[]){let o=bT({},r);return TL(this.injector,o,i).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(i){let r=i.injector.get(pr);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(o=>r.bootstrap(o));else if(i.instance.ngDoBootstrap)i.instance.ngDoBootstrap(r);else throw new ne(-403,!1);this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let i=this._injector.get(ET,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(r){return new(r||e)(N(ft))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Pc=null,CT=new G("");function OL(t){if(Pc&&!Pc.get(CT,!1))throw new ne(400,!1);wL(),Pc=t;let e=t.get(DT);return FL(t),e}function oy(t,e,n=[]){let i=`Platform: ${e}`,r=new G(i);return(o=[])=>{let s=IT();if(!s||s.injector.get(CT,!1)){let a=[...n,...o,{provide:r,useValue:!0}];t?t(a):OL(NL(a,i))}return kL(r)}}function NL(t=[],e){return ft.create({name:e,providers:[{provide:uh,useValue:"platform"},{provide:ET,useValue:new Set([()=>Pc=null])},...t]})}function kL(t){let e=IT();if(!e)throw new ne(401,!1);return e}function IT(){return Pc?.get(DT)??null}function FL(t){t.get(O_,null)?.forEach(n=>n())}function sy(){return!1}var Zn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=VL;let t=e;return t})();function VL(t){return LL(Xt(),Ae(),(t&16)===16)}function LL(t,e,n){if(fh(t)&&!n){let i=hr(t.index,e);return new ao(i,i)}else if(t.type&47){let i=e[On];return new ao(i,e)}return null}var d_=class{constructor(){}supports(e){return sT(e)}create(e){return new h_(e)}},BL=(t,e)=>e,h_=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||BL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<XD(i,r,o)?n:i,a=XD(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,d=c-r;if(u!=d){for(let g=0;g<u;g++){let _=g<o.length?o[g]:o[g]=0,D=_+g;d<=D&&D<u&&(o[g]=_+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!sT(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,SV(e,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new f_(n,i),o,r)),e}_verifyReinsertion(e,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new sh),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new sh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},f_=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},p_=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},sh=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new p_,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function XD(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function eC(){return new ay([new d_])}var ay=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||eC()),deps:[[e,new __,new on]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r!=null)return r;throw new ne(901,!1)}};e.\u0275prov=q({token:e,providedIn:"root",factory:eC});let t=e;return t})();var TT=oy(null,"core",[]),ST=(()=>{let e=class e{constructor(i){}};e.\u0275fac=function(r){return new(r||e)(N(pr))},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();function mo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function kh(t,e){let n=Ci(t),i=e.elementInjector||dh();return new co(n).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}function xT(t){let e=Ci(t);if(!e)return null;let n=new co(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var OT=null;function Xn(){return OT}function NT(t){OT??=t}var Fh=class{};var vt=new G(""),hy=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>L($L),providedIn:"platform"});let t=e;return t})(),kT=new G(""),$L=(()=>{let e=class e extends hy{constructor(){super(),this._doc=L(vt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xn().getBaseHref(this._doc)}onPopState(i){let r=Xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function fy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function MT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Li(t){return t&&t[0]!=="?"?"?"+t:t}var Bi=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>L(py),providedIn:"root"});let t=e;return t})(),FT=new G(""),py=(()=>{let e=class e extends Bi{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return fy(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Li(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+Li(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+Li(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(N(hy),N(FT,8))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),VT=(()=>{let e=class e extends Bi{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=fy(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+Li(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+Li(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(N(hy),N(FT,8))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),zs=(()=>{let e=class e{constructor(i){this._subject=new Qe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=zL(MT(AT(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Li(r))}normalize(i){return e.stripTrailingSlash(GL(this._basePath,AT(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Li(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Li(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=Li,e.joinWithSlash=fy,e.stripTrailingSlash=MT,e.\u0275fac=function(r){return new(r||e)(N(Bi))},e.\u0275prov=q({token:e,factory:()=>HL(),providedIn:"root"});let t=e;return t})();function HL(){return new zs(N(Bi))}function GL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function AT(t){return t.replace(/\/index.html$/,"")}function zL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function LT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var cy=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},BT=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new cy(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),RT(c,o)}});for(let o=0,s=r.length;o<s;o++){let c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);RT(s,o)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(se(ki),se(xi),se(ay))},e.\u0275dir=sn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function RT(t,e){t.context.$implicit=e.item}var Lh=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new ly,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){PT("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){PT("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(se(ki),se(xi))},e.\u0275dir=sn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),ly=class{constructor(){this.$implicit=null,this.ngIf=null}};function PT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Gt(e)}'.`)}var jT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})(),gy="browser",qL="server";function UT(t){return t===gy}function _o(t){return t===qL}var $T=(()=>{let e=class e{};e.\u0275prov=q({token:e,providedIn:"root",factory:()=>UT(L(yt))?new uy(L(vt),window):new dy});let t=e;return t})(),uy=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=WL(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function WL(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var dy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Vh=class{};var vy=class extends Fh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},wy=class t extends vy{static makeCurrent(){NT(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=KL();return n==null?null:YL(n)}resetBaseElement(){Zc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return LT(document.cookie,e)}},Zc=null;function KL(){return Zc=Zc||document.querySelector("base"),Zc?Zc.getAttribute("href"):null}function YL(t){return new URL(t,document.baseURI).pathname}var by=class{addToWindow(e){Ht.getAngularTestability=(i,r=!0)=>{let o=e.findTestabilityInTree(i,r);if(o==null)throw new ne(5103,!1);return o},Ht.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ht.getAllAngularRootElements=()=>e.getAllRootElements();let n=i=>{let r=Ht.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(a=>{a.whenStable(s)})};Ht.frameworkStabilizers||(Ht.frameworkStabilizers=[]),Ht.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,i){if(n==null)return null;let r=e.getTestability(n);return r??(i?Xn().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},JL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Ey=new G(""),qT=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new ne(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(N(Ey),N(fe))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Bh=class{constructor(e){this._doc=e}},_y="ng-app-id",WT=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_o(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${_y}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(_y),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(_y,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(N(vt),N(yh),N(N_,8),N(yt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),yy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cy=/%COMP%/g,QT="%COMP%",ZL=`_nghost-${QT}`,XL=`_ngcontent-${QT}`,eB=!0,tB=new G("",{providedIn:"root",factory:()=>eB});function nB(t){return XL.replace(Cy,t)}function iB(t){return ZL.replace(Cy,t)}function KT(t,e){return e.map(n=>n.replace(Cy,t))}var HT=(()=>{let e=class e{constructor(i,r,o,s,a,c,u,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=_o(c),this.defaultRenderer=new Xc(i,a,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Wn.ShadowDom&&(r=Re(z({},r),{encapsulation:Wn.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof jh?o.applyToHost(i):o instanceof el&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Wn.Emulated:s=new jh(u,d,r,this.appId,f,a,c,g);break;case Wn.ShadowDom:return new Dy(u,d,i,r,a,c,this.nonce,g);default:s=new el(u,d,r,f,a,c,g);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(N(qT),N(WT),N(yh),N(tB),N(vt),N(yt),N(fe),N(N_))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Xc=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(yy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(GT(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(GT(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ne(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=yy[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=yy[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Si.DashCase|Si.Important)?e.style.setProperty(n,i,r&Si.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Si.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Xn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function GT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Dy=class extends Xc{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=KT(r.id,r.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},el=class extends Xc{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?KT(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},jh=class extends el{constructor(e,n,i,r,o,s,a,c){let u=r+"-"+i.id;super(e,n,i,o,s,a,c,u),this.contentAttr=nB(u),this.hostAttr=iB(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},rB=(()=>{let e=class e extends Bh{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(N(vt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),zT=["alt","control","meta","shift"],oB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},aB=(()=>{let e=class e extends Bh{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xn().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),zT.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(i,r){let o=oB[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),zT.forEach(a=>{if(a!==o){let c=sB[a];c(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(N(vt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})();function cB(){wy.makeCurrent()}function lB(){return new Kn}function uB(){return mI(document),document}var dB=[{provide:yt,useValue:gy},{provide:O_,useValue:cB,multi:!0},{provide:vt,useFactory:uB,deps:[]}],YT=oy(TT,"browser",dB),hB=new G(""),fB=[{provide:Jc,useClass:by,deps:[]},{provide:ny,useClass:Ah,deps:[fe,Rh,Jc]},{provide:Ah,useClass:Ah,deps:[fe,Rh,Jc]}],pB=[{provide:uh,useValue:"root"},{provide:Kn,useFactory:lB,deps:[]},{provide:Ey,useClass:rB,multi:!0,deps:[vt,fe,yt]},{provide:Ey,useClass:aB,multi:!0,deps:[vt]},HT,WT,qT,{provide:Uc,useExisting:HT},{provide:Vh,useClass:JL,deps:[]},[]],JT=(()=>{let e=class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:yh,useValue:i.appId}]}}};e.\u0275fac=function(r){return new(r||e)(N(hB,12))},e.\u0275mod=de({type:e}),e.\u0275inj=ue({providers:[...pB,...fB],imports:[jT,ST]});let t=e;return t})();var ZT=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(N(vt))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ge="primary",gl=Symbol("RouteTitle"),My=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ys(t){return new My(t)}function mB(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function _B(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ei(t[n],e[n]))return!1;return!0}function ei(t,e){let n=t?Ay(t):void 0,i=e?Ay(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!cS(t[r],e[r]))return!1;return!0}function Ay(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function cS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function lS(t){return t.length>0?t[t.length-1]:null}function yr(t){return Yg(t)?t:go(t)?me(Promise.resolve(t)):J(t)}var yB={exact:dS,subset:hS},uS={exact:vB,subset:wB,ignored:()=>!0};function eS(t,e,n){return yB[n.paths](t.root,e.root,n.matrixParams)&&uS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function vB(t,e){return ei(t,e)}function dS(t,e,n){if(!vo(t.segments,e.segments)||!Hh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!dS(t.children[i],e.children[i],n))return!1;return!0}function wB(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>cS(t[n],e[n]))}function hS(t,e,n){return fS(t,e,e.segments,n)}function fS(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!vo(r,n)||e.hasChildren()||!Hh(r,n,i))}else if(t.segments.length===n.length){if(!vo(t.segments,n)||!Hh(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!hS(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!vo(t.segments,r)||!Hh(t.segments,r,i)||!t.children[ge]?!1:fS(t.children[ge],e,o,i)}}function Hh(t,e,n){return e.every((i,r)=>uS[n](t[r].parameters,i.parameters))}var gr=class{constructor(e=new Oe([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ys(this.queryParams),this._queryParamMap}toString(){return DB.serialize(this)}},Oe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gh(this)}},yo=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ys(this.parameters),this._parameterMap}toString(){return gS(this)}};function bB(t,e){return vo(t,e)&&t.every((n,i)=>ei(n.parameters,e[i].parameters))}function vo(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function EB(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===ge&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==ge&&(n=n.concat(e(r,i)))}),n}var ml=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>new al,providedIn:"root"});let t=e;return t})(),al=class{parse(e){let n=new Py(e);return new gr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${tl(e.root,!0)}`,i=TB(e.queryParams),r=typeof e.fragment=="string"?`#${CB(e.fragment)}`:"";return`${n}${i}${r}`}},DB=new al;function Gh(t){return t.segments.map(e=>gS(e)).join("/")}function tl(t,e){if(!t.hasChildren())return Gh(t);if(e){let n=t.children[ge]?tl(t.children[ge],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==ge&&i.push(`${r}:${tl(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=EB(t,(i,r)=>r===ge?[tl(t.children[ge],!1)]:[`${r}:${tl(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[ge]!=null?`${Gh(t)}/${n[0]}`:`${Gh(t)}/(${n.join("//")})`}}function pS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uh(t){return pS(t).replace(/%3B/gi,";")}function CB(t){return encodeURI(t)}function Ry(t){return pS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zh(t){return decodeURIComponent(t)}function tS(t){return zh(t.replace(/\+/g,"%20"))}function gS(t){return`${Ry(t.path)}${IB(t.parameters)}`}function IB(t){return Object.entries(t).map(([e,n])=>`;${Ry(e)}=${Ry(n)}`).join("")}function TB(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Uh(n)}=${Uh(r)}`).join("&"):`${Uh(n)}=${Uh(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var SB=/^[^\/()?;#]+/;function Iy(t){let e=t.match(SB);return e?e[0]:""}var xB=/^[^\/()?;=#]+/;function MB(t){let e=t.match(xB);return e?e[0]:""}var AB=/^[^=?&#]+/;function RB(t){let e=t.match(AB);return e?e[0]:""}var PB=/^[^&#]+/;function OB(t){let e=t.match(PB);return e?e[0]:""}var Py=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[ge]=new Oe(e,n)),i}parseSegment(){let e=Iy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new yo(zh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=MB(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=Iy(this.remaining);r&&(i=r,this.capture(i))}e[zh(n)]=zh(i)}parseQueryParam(e){let n=RB(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=OB(this.remaining);s&&(i=s,this.capture(i))}let r=tS(n),o=tS(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Iy(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ne(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ge);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ge]:new Oe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}};function mS(t){return t.segments.length>0?new Oe([],{[ge]:t}):t}function _S(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=_S(r);if(i===ge&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new Oe(t.segments,e);return NB(n)}function NB(t){if(t.numberOfChildren===1&&t.children[ge]){let e=t.children[ge];return new Oe(t.segments.concat(e.segments),e.children)}return t}function Js(t){return t instanceof gr}function kB(t,e,n=null,i=null){let r=yS(t);return vS(r,e,n,i)}function yS(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new Oe(o.url,s);return o===t&&(e=a),a}let i=n(t.root),r=mS(i);return e??r}function vS(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Ty(r,r,r,n,i);let o=FB(e);if(o.toRoot())return Ty(r,r,new Oe([],{}),n,i);let s=VB(o,r,t),a=s.processChildren?rl(s.segmentGroup,s.index,o.commands):bS(s.segmentGroup,s.index,o.commands);return Ty(r,s.segmentGroup,a,n,i)}function qh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function cl(t){return typeof t=="object"&&t!=null&&t.outlets}function Ty(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;t===e?s=n:s=wS(t,e,n);let a=mS(_S(s));return new gr(a,o,r)}function wS(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=wS(o,e,n)}),new Oe(t.segments,i)}var Wh=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&qh(i[0]))throw new ne(4003,!1);let r=i.find(cl);if(r&&r!==lS(i))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function FB(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Wh(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Wh(n,e,i)}var Qs=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function VB(t,e,n){if(t.isAbsolute)return new Qs(e,!0,0);if(!n)return new Qs(e,!1,NaN);if(n.parent===null)return new Qs(n,!0,0);let i=qh(t.commands[0])?0:1,r=n.segments.length-1+i;return LB(n,r,t.numberOfDoubleDots)}function LB(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ne(4005,!1);r=i.segments.length}return new Qs(i,!1,r-o)}function BB(t){return cl(t[0])?t[0].outlets:{[ge]:t}}function bS(t,e,n){if(t??=new Oe([],{}),t.segments.length===0&&t.hasChildren())return rl(t,e,n);let i=jB(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new Oe(t.segments.slice(0,i.pathIndex),{});return o.children[ge]=new Oe(t.segments.slice(i.pathIndex),t.children),rl(o,0,r)}else return i.match&&r.length===0?new Oe(t.segments,{}):i.match&&!t.hasChildren()?Oy(t,e,n):i.match?rl(t,0,r):Oy(t,e,n)}function rl(t,e,n){if(n.length===0)return new Oe(t.segments,{});{let i=BB(n),r={};if(Object.keys(i).some(o=>o!==ge)&&t.children[ge]&&t.numberOfChildren===1&&t.children[ge].segments.length===0){let o=rl(t.children[ge],e,n);return new Oe(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=bS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Oe(t.segments,r)}}function jB(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],a=n[i];if(cl(a))break;let c=`${a}`,u=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!iS(c,u,s))return o;i+=2}else{if(!iS(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Oy(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(cl(o)){let c=UB(o.outlets);return new Oe(i,c)}if(r===0&&qh(n[0])){let c=t.segments[e];i.push(new yo(c.path,nS(n[0]))),r++;continue}let s=cl(o)?o.outlets[ge]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&qh(a)?(i.push(new yo(s,nS(a))),r+=2):(i.push(new yo(s,{})),r++)}return new Oe(i,{})}function UB(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=Oy(new Oe([],{}),0,i))}),e}function nS(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function iS(t,e,n){return t==n.path&&ei(e,n.parameters)}var ol="imperative",wt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(wt||{}),vn=class{constructor(e,n){this.id=e,this.url=n}},Zs=class extends vn{constructor(e,n,i="imperative",r=null){super(e,n),this.type=wt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ti=class extends vn{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=wt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},un=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(un||{}),Qh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Qh||{}),mr=class extends vn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=wt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},_r=class extends vn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=wt.NavigationSkipped}},ll=class extends vn{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=wt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kh=class extends vn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=wt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ny=class extends vn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=wt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ky=class extends vn{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=wt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fy=class extends vn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=wt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class extends vn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=wt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ly=class{constructor(e){this.route=e,this.type=wt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},By=class{constructor(e){this.route=e,this.type=wt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jy=class{constructor(e){this.snapshot=e,this.type=wt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uy=class{constructor(e){this.snapshot=e,this.type=wt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$y=class{constructor(e){this.snapshot=e,this.type=wt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hy=class{constructor(e){this.snapshot=e,this.type=wt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yh=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=wt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ul=class{},dl=class{constructor(e){this.url=e}};var Gy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new _l,this.attachRef=null}},_l=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Gy,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Jh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=zy(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=zy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=qy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return qy(e,this._root).map(n=>n.value)}};function zy(t,e){if(t===e.value)return e;for(let n of e.children){let i=zy(t,n);if(i)return i}return null}function qy(t,e){if(t===e.value)return[e];for(let n of e.children){let i=qy(t,n);if(i.length)return i.unshift(e),i}return[]}var ln=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ws(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Zh=class extends Jh{constructor(e,n){super(e),this.snapshot=n,n0(this,e)}toString(){return this.snapshot.toString()}};function ES(t){let e=$B(t),n=new st([new yo("",{})]),i=new st({}),r=new st({}),o=new st({}),s=new st(""),a=new wo(n,i,o,s,r,ge,t,e.root);return a.snapshot=e.root,new Zh(new ln(a,[]),e)}function $B(t){let e={},n={},i={},r="",o=new hl([],e,i,r,n,ge,t,null,{});return new Xh("",new ln(o,[]))}var wo=class{constructor(e,n,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Z(u=>u[gl]))??J(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>Ys(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>Ys(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function t0(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:z(z({},e.params),t.params),data:z(z({},e.data),t.data),resolve:z(z(z(z({},t.data),e.data),r?.data),t._resolvedData)}:i={params:z({},t.params),data:z({},t.data),resolve:z(z({},t.data),t._resolvedData??{})},r&&CS(r)&&(i.resolve[gl]=r.title),i}var hl=class{get title(){return this.data?.[gl]}constructor(e,n,i,r,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ys(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ys(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Xh=class extends Jh{constructor(e,n){super(n),this.url=e,n0(this,n)}toString(){return DS(this._root)}};function n0(t,e){e.value._routerState=t,e.children.forEach(n=>n0(t,n))}function DS(t){let e=t.children.length>0?` { ${t.children.map(DS).join(", ")} } `:"";return`${t.value}${e}`}function Sy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ei(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ei(e.params,n.params)||t.paramsSubject.next(n.params),_B(e.url,n.url)||t.urlSubject.next(n.url),ei(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Wy(t,e){let n=ei(t.params,e.params)&&bB(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||Wy(t.parent,e.parent))}function CS(t){return typeof t.title=="string"||t.title===null}var yl=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ge,this.activateEvents=new Qe,this.deactivateEvents=new Qe,this.attachEvents=new Qe,this.detachEvents=new Qe,this.parentContexts=L(_l),this.location=L(ki),this.changeDetector=L(Zn),this.environmentInjector=L(Tt),this.inputBinder=L(of,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Qy(i,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=sn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[dr]});let t=e;return t})(),Qy=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===wo?this.route:e===_l?this.childContexts:this.parent.get(e,n)}},of=new G(""),rS=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,o=tr([r.queryParams,r.params,r.data]).pipe(Te(([s,a,c],u)=>(c=z(z(z({},s),a),c),u===0?J(c):Promise.resolve(c)))).subscribe(s=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=xT(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(i,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})();function HB(t,e,n){let i=fl(t,e._root,n?n._root:void 0);return new Zh(i,e)}function fl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=GB(t,e,n);return new ln(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>fl(t,a)),s}}let i=zB(e.value),r=e.children.map(o=>fl(t,o));return new ln(i,r)}}function GB(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return fl(t,i,r);return fl(t,i)})}function zB(t){return new wo(new st(t.url),new st(t.params),new st(t.queryParams),new st(t.fragment),new st(t.data),t.outlet,t.component,t)}var IS="ngNavigationCancelingError";function TS(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=Js(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=SS(!1,un.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function SS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[IS]=!0,n.cancellationCode=e,n}function qB(t){return xS(t)&&Js(t.url)}function xS(t){return!!t&&t[IS]}var WB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Le({type:e,selectors:[["ng-component"]],standalone:!0,features:[Yc],decls:1,vars:0,template:function(r,o){r&1&&we(0,"router-outlet")},dependencies:[yl],encapsulation:2});let t=e;return t})();function QB(t,e){return t.providers&&!t._injector&&(t._injector=Ih(t.providers,e,`Route: ${t.path}`)),t._injector??e}function i0(t){let e=t.children&&t.children.map(i0),n=e?Re(z({},t),{children:e}):z({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ge&&(n.component=WB),n}function ni(t){return t.outlet||ge}function KB(t,e){let n=t.filter(i=>ni(i)===e);return n.push(...t.filter(i=>ni(i)!==e)),n}function vl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var YB=(t,e,n,i)=>Z(r=>(new Ky(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Ky=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),Sy(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Ws(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Ws(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Ws(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Ws(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Hy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Uy(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(Sy(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Sy(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=vl(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},ef=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ks=class{constructor(e,n){this.component=e,this.route=n}};function JB(t,e,n){let i=t._root,r=e?e._root:null;return nl(i,r,n,[i.value])}function ZB(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ea(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!rC(t)?t:e.get(t):i}function nl(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ws(e);return t.children.forEach(s=>{XB(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>sl(a,n.getContext(s),r)),r}function XB(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=ej(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new ef(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?nl(t,e,a?a.children:null,i,r):nl(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ks(a.outlet.component,s))}else s&&sl(e,a,r),r.canActivateChecks.push(new ef(i)),o.component?nl(t,null,a?a.children:null,i,r):nl(t,null,n,i,r);return r}function ej(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!vo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vo(t.url,e.url)||!ei(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wy(t,e)||!ei(t.queryParams,e.queryParams);case"paramsChange":default:return!Wy(t,e)}}function sl(t,e,n){let i=Ws(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?sl(s,e.children.getContext(o),n):sl(s,null,n):sl(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ks(e.outlet.component,r)):n.canDeactivateChecks.push(new Ks(null,r)):n.canDeactivateChecks.push(new Ks(null,r))}function wl(t){return typeof t=="function"}function tj(t){return typeof t=="boolean"}function nj(t){return t&&wl(t.canLoad)}function ij(t){return t&&wl(t.canActivate)}function rj(t){return t&&wl(t.canActivateChild)}function oj(t){return t&&wl(t.canDeactivate)}function sj(t){return t&&wl(t.canMatch)}function MS(t){return t instanceof bi||t?.name==="EmptyError"}var $h=Symbol("INITIAL_VALUE");function Xs(){return Te(t=>tr(t.map(e=>e.pipe(Jt(1),Di($h)))).pipe(Z(e=>{for(let n of e)if(n!==!0){if(n===$h)return $h;if(n===!1||n instanceof gr)return n}return!0}),We(e=>e!==$h),Jt(1)))}function aj(t,e){return qe(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?J(Re(z({},n),{guardsResult:!0})):cj(s,i,r,t).pipe(qe(a=>a&&tj(a)?lj(i,o,t,e):J(a)),Z(a=>Re(z({},n),{guardsResult:a})))})}function cj(t,e,n,i){return me(t).pipe(qe(r=>pj(r.component,r.route,n,e,i)),mn(r=>r!==!0,!0))}function lj(t,e,n,i){return me(e).pipe(Zr(r=>ir(dj(r.route.parent,i),uj(r.route,i),fj(t,r.path,n),hj(t,r.route,n))),mn(r=>r!==!0,!0))}function uj(t,e){return t!==null&&e&&e(new $y(t)),J(!0)}function dj(t,e){return t!==null&&e&&e(new jy(t)),J(!0)}function hj(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return J(!0);let r=i.map(o=>Ed(()=>{let s=vl(e)??n,a=ea(o,s),c=ij(a)?a.canActivate(e,t):Ai(s,()=>a(e,t));return yr(c).pipe(mn())}));return J(r).pipe(Xs())}function fj(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>ZB(s)).filter(s=>s!==null).map(s=>Ed(()=>{let a=s.guards.map(c=>{let u=vl(s.node)??n,d=ea(c,u),f=rj(d)?d.canActivateChild(i,t):Ai(u,()=>d(i,t));return yr(f).pipe(mn())});return J(a).pipe(Xs())}));return J(o).pipe(Xs())}function pj(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let c=vl(e)??r,u=ea(a,c),d=oj(u)?u.canDeactivate(t,e,n,i):Ai(c,()=>u(t,e,n,i));return yr(d).pipe(mn())});return J(s).pipe(Xs())}function gj(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return J(!0);let o=r.map(s=>{let a=ea(s,t),c=nj(a)?a.canLoad(e,n):Ai(t,()=>a(e,n));return yr(c)});return J(o).pipe(Xs(),AS(i))}function AS(t){return rd(Ze(e=>{if(Js(e))throw TS(t,e)}),Z(e=>e===!0))}function mj(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return J(!0);let o=r.map(s=>{let a=ea(s,t),c=sj(a)?a.canMatch(e,n):Ai(t,()=>a(e,n));return yr(c)});return J(o).pipe(Xs(),AS(i))}var pl=class{constructor(e){this.segmentGroup=e||null}},tf=class extends Error{constructor(e){super(),this.urlTree=e}};function qs(t){return ms(new pl(t))}function _j(t){return ms(new ne(4e3,!1))}function yj(t){return ms(SS(!1,un.GuardRejected))}var Yy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return J(i);if(r.numberOfChildren>1||!r.children[ge])return _j(e.redirectTo);r=r.children[ge]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new tf(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new gr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new Oe(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new ne(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Jy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vj(t,e,n,i,r){let o=r0(t,e,n);return o.matched?(i=QB(e,i),mj(i,e,n,r).pipe(Z(s=>s===!0?o:z({},Jy)))):J(o)}function r0(t,e,n){if(e.path==="**")return wj(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?z({},Jy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||mB)(n,t,e);if(!r)return z({},Jy);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?z(z({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function wj(t){return{matched:!0,parameters:t.length>0?lS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function oS(t,e,n,i){return n.length>0&&Dj(t,n,i)?{segmentGroup:new Oe(e,Ej(i,new Oe(n,t.children))),slicedSegments:[]}:n.length===0&&Cj(t,n,i)?{segmentGroup:new Oe(t.segments,bj(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new Oe(t.segments,t.children),slicedSegments:n}}function bj(t,e,n,i){let r={};for(let o of n)if(sf(t,e,o)&&!i[ni(o)]){let s=new Oe([],{});r[ni(o)]=s}return z(z({},i),r)}function Ej(t,e){let n={};n[ge]=e;for(let i of t)if(i.path===""&&ni(i)!==ge){let r=new Oe([],{});n[ni(i)]=r}return n}function Dj(t,e,n){return n.some(i=>sf(t,e,i)&&ni(i)!==ge)}function Cj(t,e,n){return n.some(i=>sf(t,e,i))}function sf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Ij(t,e,n,i){return ni(t)!==i&&(i===ge||!sf(e,n,t))?!1:r0(e,t,n).matched}function Tj(t,e,n){return e.length===0&&!t.children[n]}var Zy=class{};function Sj(t,e,n,i,r,o,s="emptyOnly"){return new Xy(t,e,n,i,r,s,o).recognize()}var xj=31,Xy=class{constructor(e,n,i,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Yy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=oS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(n=>{let i=new hl([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,{},ge,this.rootComponentType,null,{}),r=new ln(i,n),o=new Xh("",r),s=kB(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ge).pipe(rr(i=>{if(i instanceof tf)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof pl?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=t0(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(Z(o=>o instanceof ln?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return me(r).pipe(Zr(o=>{let s=i.children[o],a=KB(n,o);return this.processSegmentGroup(e,a,s,o)}),sr((o,s)=>(o.push(...s),o)),or(null),im(),qe(o=>{if(o===null)return qs(i);let s=RS(o);return Mj(s),J(s)}))}processSegment(e,n,i,r,o,s){return me(n).pipe(Zr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,o,s).pipe(rr(c=>{if(c instanceof pl)return J(null);throw c}))),mn(a=>!!a),rr(a=>{if(MS(a))return Tj(i,r,o)?J(new Zy):qs(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,o,s,a){return Ij(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s):qs(r):qs(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:d}=r0(n,r,o);if(!a)return qs(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>xj&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,f).pipe(qe(g=>this.processSegment(e,i,n,g.concat(d),s,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let s=vj(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(Te(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Te(({routes:c})=>{let u=i._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:g}=a,_=new hl(d,g,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Rj(i),ni(i),i.component??i._loadedComponent??null,i,Pj(i)),{segmentGroup:D,slicedSegments:x}=oS(n,d,f,c);if(x.length===0&&D.hasChildren())return this.processChildren(u,c,D).pipe(Z(V=>V===null?null:new ln(_,V)));if(c.length===0&&x.length===0)return J(new ln(_,[]));let T=ni(i)===o;return this.processSegment(u,c,D,x,T?ge:o,!0).pipe(Z(V=>new ln(_,V instanceof ln?[V]:[])))}))):qs(n)))}getChildConfig(e,n,i){return n.children?J({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?J({routes:n._loadedRoutes,injector:n._loadedInjector}):gj(e,n,i,this.urlSerializer).pipe(qe(r=>r?this.configLoader.loadChildren(e,n).pipe(Ze(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):yj(n))):J({routes:[],injector:e})}};function Mj(t){t.sort((e,n)=>e.value.outlet===ge?-1:n.value.outlet===ge?1:e.value.outlet.localeCompare(n.value.outlet))}function Aj(t){let e=t.value.routeConfig;return e&&e.path===""}function RS(t){let e=[],n=new Set;for(let i of t){if(!Aj(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=RS(i.children);e.push(new ln(i.value,r))}return e.filter(i=>!n.has(i))}function Rj(t){return t.data||{}}function Pj(t){return t.resolve||{}}function Oj(t,e,n,i,r,o){return qe(s=>Sj(t,e,n,i,s.extractedUrl,r,o).pipe(Z(({state:a,tree:c})=>Re(z({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Nj(t,e){return qe(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return J(n);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of PS(c))s.add(u);let a=0;return me(s).pipe(Zr(c=>o.has(c)?kj(c,i,t,e):(c.data=t0(c,c.parent,t).resolve,J(void 0))),Ze(()=>a++),ys(1),qe(c=>a===s.size?J(n):ht))})}function PS(t){let e=t.children.map(n=>PS(n)).flat();return[t,...e]}function kj(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!CS(r)&&(o[gl]=r.title),Fj(o,t,e,i).pipe(Z(s=>(t._resolvedData=s,t.data=t0(t,t.parent,n).resolve,null)))}function Fj(t,e,n,i){let r=Ay(t);if(r.length===0)return J({});let o={};return me(r).pipe(qe(s=>Vj(t[s],e,n,i).pipe(mn(),Ze(a=>{o[s]=a}))),ys(1),tm(o),rr(s=>MS(s)?ht:ms(s)))}function Vj(t,e,n,i){let r=vl(e)??i,o=ea(t,r),s=o.resolve?o.resolve(e,n):Ai(r,()=>o(e,n));return yr(s)}function xy(t){return Te(e=>{let n=t(e);return n?me(n).pipe(Z(()=>e)):J(e)})}var OS=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===ge);return r}getResolvedTitleForRoute(i){return i.data[gl]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>L(Lj),providedIn:"root"});let t=e;return t})(),Lj=(()=>{let e=class e extends OS{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(N(ZT))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bl=new G("",{providedIn:"root",factory:()=>({})}),nf=new G(""),o0=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(Oh)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return J(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=yr(i.loadComponent()).pipe(Z(NS),Ze(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),Ei(()=>{this.componentLoaders.delete(i)})),o=new ds(r,()=>new Me).pipe(us());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Bj(r,this.compiler,i,this.onLoadEndListener).pipe(Ei(()=>{this.childrenLoaders.delete(r)})),a=new ds(s,()=>new Me).pipe(us());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Bj(t,e,n,i){return yr(t.loadChildren()).pipe(Z(NS),qe(r=>r instanceof $c||Array.isArray(r)?J(r):me(e.compileModuleAsync(r))),Z(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(nf,[],{optional:!0,self:!0}).flat()),{routes:s.map(i0),injector:o}}))}function jj(t){return t&&typeof t=="object"&&"default"in t}function NS(t){return jj(t)?t.default:t}var s0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>L(Uj),providedIn:"root"});let t=e;return t})(),Uj=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),kS=new G(""),FS=new G("");function $j(t,e,n){let i=t.get(FS),r=t.get(vt);return t.get(fe).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(u=>{o=u}),a=r.startViewTransition(()=>(o(),Hj(t))),{onViewTransitionCreated:c}=i;return c&&Ai(t,()=>c({transition:a,from:e,to:n})),s})}function Hj(t){return new Promise(e=>{Ch(e,{injector:t})})}var a0=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Me,this.transitionAbortSubject=new Me,this.configLoader=L(o0),this.environmentInjector=L(Tt),this.urlSerializer=L(ml),this.rootContexts=L(_l),this.location=L(zs),this.inputBindingEnabled=L(of,{optional:!0})!==null,this.titleStrategy=L(OS),this.options=L(bl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(s0),this.createViewTransition=L(kS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let i=o=>this.events.next(new Ly(o)),r=o=>this.events.next(new By(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Re(z(z({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new st({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ol,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(We(s=>s.id!==0),Z(s=>Re(z({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Te(s=>{let a=!1,c=!1;return J(s).pipe(Te(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",un.SupersededByNewNavigation),ht;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Re(z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new _r(u.id,this.urlSerializer.serialize(u.rawUrl),g,Qh.IgnoredSameUrlNavigation)),u.resolve(null),ht}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return J(u).pipe(Te(g=>{let _=this.transitions?.getValue();return this.events.next(new Zs(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?ht:Promise.resolve(g)}),Oj(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Ze(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Re(z({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let _=new Kh(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:_,source:D,restoredState:x,extras:T}=u,V=new Zs(g,this.urlSerializer.serialize(_),D,x);this.events.next(V);let j=ES(this.rootComponentType).snapshot;return this.currentTransition=s=Re(z({},u),{targetSnapshot:j,urlAfterRedirects:_,extras:Re(z({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,J(s)}else{let g="";return this.events.next(new _r(u.id,this.urlSerializer.serialize(u.extractedUrl),g,Qh.IgnoredByUrlHandlingStrategy)),u.resolve(null),ht}}),Ze(u=>{let d=new Ny(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Z(u=>(this.currentTransition=s=Re(z({},u),{guards:JB(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),aj(this.environmentInjector,u=>this.events.next(u)),Ze(u=>{if(s.guardsResult=u.guardsResult,Js(u.guardsResult))throw TS(this.urlSerializer,u.guardsResult);let d=new ky(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),We(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",un.GuardRejected),!1)),xy(u=>{if(u.guards.canActivateChecks.length)return J(u).pipe(Ze(d=>{let f=new Fy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Te(d=>{let f=!1;return J(d).pipe(Nj(this.paramsInheritanceStrategy,this.environmentInjector),Ze({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",un.NoDataFromResolver)}}))}),Ze(d=>{let f=new Vy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),xy(u=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ze(_=>{f.component=_}),Z(()=>{})));for(let _ of f.children)g.push(...d(_));return g};return tr(d(u.targetSnapshot.root)).pipe(or(null),Jt(1))}),xy(()=>this.afterPreactivation()),Te(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?me(f).pipe(Z(()=>s)):J(s)}),Z(u=>{let d=HB(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Re(z({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),Ze(()=>{this.events.next(new ul)}),YB(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Jt(1),Ze({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ti(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Nt(this.transitionAbortSubject.pipe(Ze(u=>{throw u}))),Ei(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",un.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),rr(u=>{if(c=!0,xS(u))this.events.next(new mr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),qB(u)?this.events.next(new dl(u.url)):s.resolve(!1);else{this.events.next(new ll(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(u))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return ht}))}))}cancelNavigationTransition(i,r,o){let s=new mr(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Gj(t){return t!==ol}var zj=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>L(qj),providedIn:"root"});let t=e;return t})(),e0=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},qj=(()=>{let e=class e extends e0{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Vs(e)))(o||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),VS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>L(Wj),providedIn:"root"});let t=e;return t})(),Wj=(()=>{let e=class e extends VS{constructor(){super(...arguments),this.location=L(zs),this.urlSerializer=L(ml),this.options=L(bl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(s0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new gr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ES(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Zs)this.stateMemento=this.createStateMemento();else if(i instanceof _r)this.rawUrlTree=r.initialUrl;else if(i instanceof Kh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof ul?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof mr&&(i.code===un.GuardRejected||i.code===un.NoDataFromResolver)?this.restoreHistory(r):i instanceof ll?this.restoreHistory(r,!0):i instanceof ti&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=z(z({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=z(z({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Vs(e)))(o||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),il=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(il||{});function LS(t,e){t.events.pipe(We(n=>n instanceof ti||n instanceof mr||n instanceof ll||n instanceof _r),Z(n=>n instanceof ti||n instanceof _r?il.COMPLETE:(n instanceof mr?n.code===un.Redirect||n.code===un.SupersededByNewNavigation:!1)?il.REDIRECTING:il.FAILED),We(n=>n!==il.REDIRECTING),Jt(1)).subscribe(()=>{e()})}function Qj(t){throw t}var Kj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ii=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=L(Mh),this.stateManager=L(VS),this.options=L(bl,{optional:!0})||{},this.pendingTasks=L(Th),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(a0),this.urlSerializer=L(ml),this.location=L(zs),this.urlHandlingStrategy=L(s0),this._events=new Me,this.errorHandler=this.options.errorHandler||Qj,this.navigated=!1,this.routeReuseStrategy=L(zj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(nf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(of,{optional:!0}),this.eventsSubscription=new nt,this.isNgZoneEnabled=L(fe)instanceof fe&&fe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof mr&&r.code!==un.Redirect&&r.code!==un.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ti)this.navigated=!0;else if(r instanceof dl){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Gj(o.source)};this.scheduleNavigation(a,ol,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Zj(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ol,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=z({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(i0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=z(z({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let _=o?o.snapshot:this.routerState.snapshot.root;g=yS(_)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),g=this.currentUrlTree.root}return vS(g,i,f,d??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=Js(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ol,null,r)}navigate(i,r={skipLocationChange:!1}){return Jj(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=z({},Kj):r===!1?o=z({},Yj):o=r,Js(i))return eS(this.currentUrlTree,i,o);let s=this.parseUrl(i);return eS(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,d;a?(c=a.resolve,u=a.reject,d=a.promise):d=new Promise((g,_)=>{c=g,u=_});let f=this.pendingTasks.add();return LS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Jj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ne(4008,!1)}function Zj(t){return!(t instanceof ul)&&!(t instanceof dl)}var af=(()=>{let e=class e{constructor(i,r,o,s,a,c){this.router=i,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new Me,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=i.events.subscribe(d=>{d instanceof ti&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(i!==0||r||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:vI(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,i,r):o.removeAttribute(s,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(se(ii),se(wo),mh("tabindex"),se(ho),se(en),se(Bi))},e.\u0275dir=sn({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&pt("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Us("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[kt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",mo],skipLocationChange:[kt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",mo],replaceUrl:[kt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",mo],routerLink:"routerLink"},standalone:!0,features:[Y_,dr]});let t=e;return t})();var rf=class{};var Xj=(()=>{let e=class e{constructor(i,r,o,s,a){this.router=i,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(We(i=>i instanceof ti),Zr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Ih(s.providers,i,`Route: ${s.path}`));let a=s._injector??i,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return me(o).pipe(nr())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(i,r):o=J(null);let s=o.pipe(qe(a=>a===null?J(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return me([s,a]).pipe(nr())}else return s})}};e.\u0275fac=function(r){return new(r||e)(N(ii),N(Oh),N(Tt),N(rf),N(o0))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BS=new G(""),eU=(()=>{let e=class e{constructor(i,r,o,s,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=L(Tt),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Zs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof ti?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof _r&&i.code===Qh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Yh&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>A(this,null,function*(){yield new Promise(o=>{setTimeout(()=>{o()}),Ch(()=>{o()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Yh(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){NI()},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})();function tU(t){return t.routerState.root}function El(t,e){return{\u0275kind:t,\u0275providers:e}}function nU(){let t=L(ft);return e=>{let n=t.get(pr);if(e!==n.components[0])return;let i=t.get(ii),r=t.get(jS);t.get(c0)===1&&i.initialNavigation(),t.get(US,null,ye.Optional)?.setUpPreloading(),t.get(BS,null,ye.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var jS=new G("",{factory:()=>new Me}),c0=new G("",{providedIn:"root",factory:()=>1});function iU(){return El(2,[{provide:c0,useValue:0},{provide:Ph,multi:!0,deps:[ft],useFactory:e=>{let n=e.get(kT,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(ii),o=e.get(jS);LS(r,()=>{i(!0)}),e.get(a0).afterPreactivation=()=>(i(!0),o.closed?J(void 0):o),r.initialNavigation()}))}}])}function rU(){return El(3,[{provide:Ph,multi:!0,useFactory:()=>{let e=L(ii);return()=>{e.setUpLocationChangeListener()}}},{provide:c0,useValue:2}])}var US=new G("");function oU(t){return El(0,[{provide:US,useExisting:Xj},{provide:rf,useExisting:t}])}function sU(){return El(8,[rS,{provide:of,useExisting:rS}])}function aU(t){let e=[{provide:kS,useValue:$j},{provide:FS,useValue:z({skipNextTransition:!!t?.skipInitialTransition},t)}];return El(9,e)}var sS=new G("ROUTER_FORROOT_GUARD"),cU=[zs,{provide:ml,useClass:al},ii,_l,{provide:wo,useFactory:tU,deps:[ii]},o0,[]],l0=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[cU,[],{provide:nf,multi:!0,useValue:i},{provide:sS,useFactory:hU,deps:[[ii,new on,new __]]},{provide:bl,useValue:r||{}},r?.useHash?uU():dU(),lU(),r?.preloadingStrategy?oU(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?fU(r):[],r?.bindToComponentInputs?sU().\u0275providers:[],r?.enableViewTransitions?aU().\u0275providers:[],pU()]}}static forChild(i){return{ngModule:e,providers:[{provide:nf,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(N(sS,8))},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();function lU(){return{provide:BS,useFactory:()=>{let t=L($T),e=L(fe),n=L(bl),i=L(a0),r=L(ml);return n.scrollOffset&&t.setOffset(n.scrollOffset),new eU(r,i,t,e,n)}}}function uU(){return{provide:Bi,useClass:VT}}function dU(){return{provide:Bi,useClass:py}}function hU(t){return"guarded"}function fU(t){return[t.initialNavigation==="disabled"?rU().\u0275providers:[],t.initialNavigation==="enabledBlocking"?iU().\u0275providers:[]]}var aS=new G("");function pU(){return[{provide:aS,useFactory:nU},{provide:ry,multi:!0,useExisting:aS}]}var $S=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Le({type:e,selectors:[["app-landing-page"]],decls:19,vars:0,consts:[["lang","en"],["property","og:title","content","Recipe Match"],["name","viewport","content","width=device-width, initial-scale=1.0"],["charset","utf-8"],["property","twitter:card","content","summary_large_image"],[1,"landing-page-container"],[1,"landing-page-frame"],["alt","LogoPlaceholder2714","src","assets/img/cake2.png",1,"landing-page-logo-placeholder"],["routerLink","/register",1,"rounded-button","reounded-button-register"],["routerLink","/login",1,"rounded-button","reounded-button-login"],[1,"landing-page-text"]],template:function(r,o){r&1&&(W(0,"html",0)(1,"head")(2,"title"),ce(3,"Recipe Match"),Q(),we(4,"meta",1)(5,"meta",2)(6,"meta",3)(7,"meta",4),Q(),W(8,"body")(9,"div",5)(10,"div",6),we(11,"img",7),W(12,"button",8),ce(13,"Register"),Q(),W(14,"button",9),ce(15,"Login"),Q(),W(16,"span",10)(17,"span"),ce(18,"Your Recipes"),Q()()()()()())},dependencies:[af],styles:["@media only screen and (min-width: 1192px){.landing-page-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100%;align-items:center;flex-direction:column}.landing-page-frame[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;overflow:hidden;position:relative;align-items:flex-start;flex-shrink:0;background-color:#ff9494}.landing-page-logo-placeholder[_ngcontent-%COMP%]{top:198px;left:218px;width:738px;height:738px;position:absolute}.landing-page-text[_ngcontent-%COMP%]{top:35vh;right:-5vw;color:#fff5e4;width:60vw;height:auto;position:absolute;font-size:15vh;font-style:Regular;text-align:left;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.rounded-button[_ngcontent-%COMP%]{top:60vh;width:11vw;height:4vh;background-color:#d40121;color:#fff5e4;padding:0 20px;border:none;border-radius:15px;text-align:center;display:inline-block;font-size:2.5vh;margin:4px 2px;cursor:pointer;line-height:25px;transition-duration:.4s}.reounded-button-login[_ngcontent-%COMP%]{right:37vw;position:absolute}.reounded-button-register[_ngcontent-%COMP%]{right:21vw;position:absolute}}@media only screen and (min-width: 600px) and (max-width: 1191px){.landing-page-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;height:834px;align-items:center;flex-direction:column}.landing-page-frame[_ngcontent-%COMP%]{width:100%;height:834px;display:flex;overflow:hidden;position:relative;align-items:flex-start;flex-shrink:0;background-color:#ff9494}.landing-page-background2[_ngcontent-%COMP%]{top:0;left:0;width:1174px;height:839px;position:absolute}.landing-page-background1[_ngcontent-%COMP%]{top:0;left:0;width:1068px;height:763px;position:absolute}.landing-page-logo-placeholder[_ngcontent-%COMP%]{top:73px;left:101px;width:302px;height:302px;position:absolute}.landing-page-text[_ngcontent-%COMP%]{top:344px;left:557px;color:#f2f2f2;width:495px;height:auto;position:absolute;font-size:128px;font-style:Regular;text-align:left;font-family:Jolly Lodger;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.rounded-button[_ngcontent-%COMP%]{width:186px;height:25px;background-color:#d40121;color:#fff;padding:0 20px;border:none;border-radius:15px;text-align:center;display:inline-block;font-size:16px;margin:4px 2px;cursor:pointer;line-height:25px;transition-duration:.4s}.reounded-button-login[_ngcontent-%COMP%]{top:505px;left:559px;position:absolute}.reounded-button-register[_ngcontent-%COMP%]{top:505px;left:823px;position:absolute}}@media only screen and (max-width: 600px){.landing-page-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;height:800px;align-items:center;flex-direction:column}.landing-page-frame[_ngcontent-%COMP%]{width:100%;height:800px;display:flex;overflow:hidden;position:relative;align-items:flex-start;flex-shrink:0;background-color:#ff9494}.landing-page-background2[_ngcontent-%COMP%], .landing-page-background1[_ngcontent-%COMP%]{top:0;left:0;width:360px;height:800px;position:absolute}.landing-page-logo-placeholder[_ngcontent-%COMP%]{top:166px;left:26px;width:302px;height:302px;position:absolute}.landing-page-text[_ngcontent-%COMP%]{top:70px;left:66px;color:#f2f2f2;height:auto;position:absolute;font-size:64px;font-style:Regular;text-align:left;font-family:Jolly Lodger;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.rounded-button[_ngcontent-%COMP%]{width:214px;height:25px;background-color:#d40121;color:#fff;padding:0 20px;border:none;border-radius:15px;text-align:center;display:inline-block;font-size:16px;margin:4px 2px;cursor:pointer;line-height:25px;transition-duration:.4s}.reounded-button-login[_ngcontent-%COMP%]{top:543px;left:74px;position:absolute}.reounded-button-register[_ngcontent-%COMP%]{top:616px;left:74px;position:absolute}}"]});let t=e;return t})();var gU="firebase",mU="10.12.2";mt(gU,mU,"app");var Nn=new Mi("ANGULARFIRE2_VERSION");function d0(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Cl=(t,e)=>{let n=e?[e]:Zu(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},wn=class{constructor(){return Cl(_U)}},_U="app-check";function ta(){}var cf=class{zone;delegate;constructor(e,n=Qg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},u0=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ta,{},ta,ta)),n.pipe(Ze({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},kn=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new cf(Zone.current)),this.insideAngular=n.run(()=>new cf(Zone.current,Xi)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(N(fe))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Il(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function yU(t){return Il().ngZone.runOutsideAngular(()=>t())}function bo(t){return Il().ngZone.run(()=>t())}function h0(t){return t.pipe(Yt(Il().outsideAngular))}function bt(t){return vU(Il())(t)}function vU(t){return function(n){return n=n.lift(new u0(t.ngZone)),n.pipe(pn(t.outsideAngular),Yt(t.insideAngular))}}var wU=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),bo(()=>t.apply(void 0,i))},Eo=(t,e)=>function(){let n,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(e&&(n||=bo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ta,{},ta,ta))),i[o]=wU(i[o],n));let r=yU(()=>t.apply(this,i));if(!e)if(r instanceof re){let o=Il();return r.pipe(pn(o.outsideAngular),Yt(o.insideAngular))}else return bo(()=>r);return r instanceof re?r.pipe(bt):r instanceof Promise?bo(()=>new Promise((o,s)=>r.then(a=>bo(()=>o(a)),a=>bo(()=>s(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:bo(()=>r)};var Do=class{constructor(e){return e}},Tl=class{constructor(){return Zu()}};function bU(t){return t&&t.length===1?t[0]:new Do(os())}var p0=new G("angularfire2._apps"),EU={provide:Do,useFactory:bU,deps:[[new on,p0]]},DU={provide:Tl,deps:[[new on,p0]]};function CU(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Do(i)}}var IU=(()=>{class t{constructor(n){mt("angularfire",Nn.full,"core"),mt("angularfire",Nn.full,"app"),mt("angular",ty.full,n.toString())}static \u0275fac=function(i){return new(i||t)(N(yt))};static \u0275mod=de({type:t});static \u0275inj=ue({providers:[EU,DU]})}return t})();function HS(t,...e){return{ngModule:IU,providers:[{provide:p0,useFactory:CU(t),multi:!0,deps:[fe,ft,kn,...e]}]}}var GS=Eo(HE,!0);var TU=new Map,SU={activated:!1,tokenObservers:[]},xU={initialized:!1,enabled:!1};function Fn(t){return TU.get(t)||Object.assign({},SU)}function KS(){return xU}var MU="https://content-firebaseappcheck.googleapis.com/v1";var AU="exchangeDebugToken",zS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},SY=24*60*60*1e3;var m0=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return A(this,null,function*(){this.stop();try{this.pending=new Rg,this.pending.promise.catch(n=>{}),yield RU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Rg,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function RU(t){return new Promise(e=>{setTimeout(e,t)})}var PU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},vr=new $E("appCheck","AppCheck",PU);function YS(t){if(!Fn(t).activated)throw vr.create("use-before-activation",{appName:t.name})}function JS(i,r){return A(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let _=yield s.getHeartbeatsHeader();_&&(o["X-Firebase-Client"]=_)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(_){throw vr.create("fetch-network-error",{originalErrorMessage:_?.message})}if(c.status!==200)throw vr.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(_){throw vr.create("fetch-parse-error",{originalErrorMessage:_?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function ZS(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${MU}/projects/${n}/apps/${i}:${AU}?key=${r}`,body:{debug_token:e}}}var OU="firebase-app-check-database",NU=1,_0="firebase-app-check-store";var lf=null;function kU(){return lf||(lf=new Promise((t,e)=>{try{let n=indexedDB.open(OU,NU);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(vr.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(_0,{keyPath:"compositeKey"})}}}catch(n){e(vr.create("storage-open",{originalErrorMessage:n?.message}))}}),lf)}function FU(t,e){return VU(LU(t),e)}function VU(t,e){return A(this,null,function*(){let i=(yield kU()).transaction(_0,"readwrite"),o=i.objectStore(_0).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},i.onerror=c=>{var u;a(vr.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function LU(t){return`${t.options.appId}-${t.name}`}var y0=new Ku("@firebase/app-check");function g0(t,e){return Wu()?FU(t,e).catch(n=>{y0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function XS(){return KS().enabled}function ex(){return A(this,null,function*(){let t=KS();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var BU={error:"UNKNOWN_ERROR"};function jU(t){return UE.encodeString(JSON.stringify(t),!1)}function v0(t,e=!1){return A(this,null,function*(){let n=t.app;YS(n);let i=Fn(n),r=i.token,o;if(r&&!Sl(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(Sl(c)?r=c:yield g0(n,void 0))}if(!e&&r&&Sl(r))return{token:r.token};let s=!1;if(XS()){i.exchangeTokenPromise||(i.exchangeTokenPromise=JS(ZS(n,yield ex()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let c=yield i.exchangeTokenPromise;return yield g0(n,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield Fn(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?y0.warn(c.message):y0.error(c),o=c}let a;return r?o?Sl(r)?a={token:r.token,internalError:o}:a=WS(o):(a={token:r.token},i.token=r,yield g0(n,r)):a=WS(o),s&&GU(n,a),a})}function UU(t){return A(this,null,function*(){let e=t.app;YS(e);let{provider:n}=Fn(e);if(XS()){let i=yield ex(),{token:r}=yield JS(ZS(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function $U(t,e,n,i){let{app:r}=t,o=Fn(r),s={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Sl(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),qS(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>qS(t))}function tx(t,e){let n=Fn(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function qS(t){let{app:e}=t,n=Fn(e),i=n.tokenRefresher;i||(i=HU(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function HU(t){let{app:e}=t;return new m0(()=>A(this,null,function*(){let n=Fn(e),i;if(n.token?i=yield v0(t,!0):i=yield v0(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Fn(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},zS.RETRIAL_MIN_WAIT,zS.RETRIAL_MAX_WAIT)}function GU(t,e){let n=Fn(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Sl(t){return t.expireTimeMillis-Date.now()>0}function WS(t){return{token:jU(BU),error:t}}var w0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Fn(this.app);for(let n of e)tx(this.app,n.next);return Promise.resolve()}};function zU(t,e){return new w0(t,e)}function qU(t){return{getToken:e=>v0(t,e),getLimitedUseToken:()=>UU(t),addTokenListener:e=>$U(t,"INTERNAL",e),removeTokenListener:e=>tx(t.app,e)}}var WU="@firebase/app-check",QU="0.8.4";var KU="app-check",QS="app-check-internal";function YU(){Wr(new Tn(KU,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return zU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(QS).initialize()})),Wr(new Tn(QS,t=>{let e=t.getProvider("app-check").getImmediate();return qU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),mt(WU,QU)}YU();var JU=["localhost","0.0.0.0","127.0.0.1"],BY=typeof window<"u"&&JU.includes(window.location.hostname);var ZU="firebase",XU="10.12.2";Ut.registerVersion(ZU,XU,"app-compat");var e$=["ngOnDestroy"],ix=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(e$.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(d=>{let f=d?.(...u);return i?.spy?.apply&&i.spy.apply(o,u,f),f})})})});var E0=class{constructor(e){return e}},wr=new G("angularfire2.app.options"),na=new G("angularfire2.app.name");function ia(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=Ut.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Ut.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;t$("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new E0(s)}var t$=(t,...e)=>{sy()&&typeof console<"u"&&console[t](...e)};function ra(t,e,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return n$(r,s)||(nx("error",`${e} was already initialized on the ${n} Firebase App with different settings.${i$?" You may need to reload as Firebase is not HMR aware.":""}`),nx("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function n$(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var i$=typeof module<"u"&&!!module.hot,nx=(t,...e)=>{sy()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var D0=new G("angularfire2.auth.use-emulator"),C0=new G("angularfire2.auth.settings"),I0=new G("angularfire2.auth.tenant-id"),T0=new G("angularfire2.auth.langugage-code"),S0=new G("angularfire2.auth.use-device-language"),x0=new G("angularfire.auth.persistence"),M0=(t,e,n,i,r,o,s,a)=>ra(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),i&&(c.tenantId=i),c.languageCode=r,o&&c.useDeviceLanguage(),s)for(let[u,d]of Object.entries(s))c.settings[u]=d;return a&&c.setPersistence(a),c},[n,i,r,o,s,a]),Vn=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,c,u,d,f,g,_){let D=new Me,x=J(void 0).pipe(Yt(s.outsideAngular),Te(()=>o.runOutsideAngular(()=>import("./chunk-D2Y3AS6H.js"))),Z(()=>ia(n,o,i)),Z(T=>M0(T,o,a,u,d,f,c,g)),Td({bufferSize:1,refCount:!1}));if(_o(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{x.pipe(mn()).subscribe();let T=x.pipe(Te(O=>O.getRedirectResult().then(U=>U,()=>null)),bt,Td({bufferSize:1,refCount:!1})),V=x.pipe(Te(O=>new re(U=>({unsubscribe:o.runOutsideAngular(()=>O.onAuthStateChanged(ee=>U.next(ee),ee=>U.error(ee),()=>U.complete()))})))),j=x.pipe(Te(O=>new re(U=>({unsubscribe:o.runOutsideAngular(()=>O.onIdTokenChanged(ee=>U.next(ee),ee=>U.error(ee),()=>U.complete()))}))));this.authState=T.pipe(Sd(V),pn(s.outsideAngular),Yt(s.insideAngular)),this.user=T.pipe(Sd(j),pn(s.outsideAngular),Yt(s.insideAngular)),this.idToken=this.user.pipe(Te(O=>O?me(O.getIdToken()):J(null))),this.idTokenResult=this.user.pipe(Te(O=>O?me(O.getIdTokenResult()):J(null))),this.credential=Dd(T,D,this.authState.pipe(We(O=>!O))).pipe(Z(O=>O?.user?O:null),pn(s.outsideAngular),Yt(s.insideAngular))}return ix(this,x,o,{spy:{apply:(T,V,j)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&j.then(O=>D.next(O))}}})}static \u0275fac=function(i){return new(i||t)(N(wr),N(na,8),N(yt),N(fe),N(kn),N(D0,8),N(C0,8),N(I0,8),N(T0,8),N(S0,8),N(x0,8),N(wn,8))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),rx=(()=>{class t{constructor(){Ut.registerVersion("angularfire",Nn.full,"auth-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=de({type:t});static \u0275inj=ue({providers:[Vn]})}return t})();var ox=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sx={};var br,A0;(function(){var t;function e(b,y){function v(){}v.prototype=y.prototype,b.D=y.prototype,b.prototype=new v,b.prototype.constructor=b,b.C=function(E,C,S){for(var w=Array(arguments.length-2),_i=2;_i<arguments.length;_i++)w[_i-2]=arguments[_i];return y.prototype[C].apply(E,w)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,y,v){v||(v=0);var E=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)E[C]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(C=0;16>C;++C)E[C]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=b.g[0],v=b.g[1],C=b.g[2];var S=b.g[3],w=y+(S^v&(C^S))+E[0]+3614090360&4294967295;y=v+(w<<7&4294967295|w>>>25),w=S+(C^y&(v^C))+E[1]+3905402710&4294967295,S=y+(w<<12&4294967295|w>>>20),w=C+(v^S&(y^v))+E[2]+606105819&4294967295,C=S+(w<<17&4294967295|w>>>15),w=v+(y^C&(S^y))+E[3]+3250441966&4294967295,v=C+(w<<22&4294967295|w>>>10),w=y+(S^v&(C^S))+E[4]+4118548399&4294967295,y=v+(w<<7&4294967295|w>>>25),w=S+(C^y&(v^C))+E[5]+1200080426&4294967295,S=y+(w<<12&4294967295|w>>>20),w=C+(v^S&(y^v))+E[6]+2821735955&4294967295,C=S+(w<<17&4294967295|w>>>15),w=v+(y^C&(S^y))+E[7]+4249261313&4294967295,v=C+(w<<22&4294967295|w>>>10),w=y+(S^v&(C^S))+E[8]+1770035416&4294967295,y=v+(w<<7&4294967295|w>>>25),w=S+(C^y&(v^C))+E[9]+2336552879&4294967295,S=y+(w<<12&4294967295|w>>>20),w=C+(v^S&(y^v))+E[10]+4294925233&4294967295,C=S+(w<<17&4294967295|w>>>15),w=v+(y^C&(S^y))+E[11]+2304563134&4294967295,v=C+(w<<22&4294967295|w>>>10),w=y+(S^v&(C^S))+E[12]+1804603682&4294967295,y=v+(w<<7&4294967295|w>>>25),w=S+(C^y&(v^C))+E[13]+4254626195&4294967295,S=y+(w<<12&4294967295|w>>>20),w=C+(v^S&(y^v))+E[14]+2792965006&4294967295,C=S+(w<<17&4294967295|w>>>15),w=v+(y^C&(S^y))+E[15]+1236535329&4294967295,v=C+(w<<22&4294967295|w>>>10),w=y+(C^S&(v^C))+E[1]+4129170786&4294967295,y=v+(w<<5&4294967295|w>>>27),w=S+(v^C&(y^v))+E[6]+3225465664&4294967295,S=y+(w<<9&4294967295|w>>>23),w=C+(y^v&(S^y))+E[11]+643717713&4294967295,C=S+(w<<14&4294967295|w>>>18),w=v+(S^y&(C^S))+E[0]+3921069994&4294967295,v=C+(w<<20&4294967295|w>>>12),w=y+(C^S&(v^C))+E[5]+3593408605&4294967295,y=v+(w<<5&4294967295|w>>>27),w=S+(v^C&(y^v))+E[10]+38016083&4294967295,S=y+(w<<9&4294967295|w>>>23),w=C+(y^v&(S^y))+E[15]+3634488961&4294967295,C=S+(w<<14&4294967295|w>>>18),w=v+(S^y&(C^S))+E[4]+3889429448&4294967295,v=C+(w<<20&4294967295|w>>>12),w=y+(C^S&(v^C))+E[9]+568446438&4294967295,y=v+(w<<5&4294967295|w>>>27),w=S+(v^C&(y^v))+E[14]+3275163606&4294967295,S=y+(w<<9&4294967295|w>>>23),w=C+(y^v&(S^y))+E[3]+4107603335&4294967295,C=S+(w<<14&4294967295|w>>>18),w=v+(S^y&(C^S))+E[8]+1163531501&4294967295,v=C+(w<<20&4294967295|w>>>12),w=y+(C^S&(v^C))+E[13]+2850285829&4294967295,y=v+(w<<5&4294967295|w>>>27),w=S+(v^C&(y^v))+E[2]+4243563512&4294967295,S=y+(w<<9&4294967295|w>>>23),w=C+(y^v&(S^y))+E[7]+1735328473&4294967295,C=S+(w<<14&4294967295|w>>>18),w=v+(S^y&(C^S))+E[12]+2368359562&4294967295,v=C+(w<<20&4294967295|w>>>12),w=y+(v^C^S)+E[5]+4294588738&4294967295,y=v+(w<<4&4294967295|w>>>28),w=S+(y^v^C)+E[8]+2272392833&4294967295,S=y+(w<<11&4294967295|w>>>21),w=C+(S^y^v)+E[11]+1839030562&4294967295,C=S+(w<<16&4294967295|w>>>16),w=v+(C^S^y)+E[14]+4259657740&4294967295,v=C+(w<<23&4294967295|w>>>9),w=y+(v^C^S)+E[1]+2763975236&4294967295,y=v+(w<<4&4294967295|w>>>28),w=S+(y^v^C)+E[4]+1272893353&4294967295,S=y+(w<<11&4294967295|w>>>21),w=C+(S^y^v)+E[7]+4139469664&4294967295,C=S+(w<<16&4294967295|w>>>16),w=v+(C^S^y)+E[10]+3200236656&4294967295,v=C+(w<<23&4294967295|w>>>9),w=y+(v^C^S)+E[13]+681279174&4294967295,y=v+(w<<4&4294967295|w>>>28),w=S+(y^v^C)+E[0]+3936430074&4294967295,S=y+(w<<11&4294967295|w>>>21),w=C+(S^y^v)+E[3]+3572445317&4294967295,C=S+(w<<16&4294967295|w>>>16),w=v+(C^S^y)+E[6]+76029189&4294967295,v=C+(w<<23&4294967295|w>>>9),w=y+(v^C^S)+E[9]+3654602809&4294967295,y=v+(w<<4&4294967295|w>>>28),w=S+(y^v^C)+E[12]+3873151461&4294967295,S=y+(w<<11&4294967295|w>>>21),w=C+(S^y^v)+E[15]+530742520&4294967295,C=S+(w<<16&4294967295|w>>>16),w=v+(C^S^y)+E[2]+3299628645&4294967295,v=C+(w<<23&4294967295|w>>>9),w=y+(C^(v|~S))+E[0]+4096336452&4294967295,y=v+(w<<6&4294967295|w>>>26),w=S+(v^(y|~C))+E[7]+1126891415&4294967295,S=y+(w<<10&4294967295|w>>>22),w=C+(y^(S|~v))+E[14]+2878612391&4294967295,C=S+(w<<15&4294967295|w>>>17),w=v+(S^(C|~y))+E[5]+4237533241&4294967295,v=C+(w<<21&4294967295|w>>>11),w=y+(C^(v|~S))+E[12]+1700485571&4294967295,y=v+(w<<6&4294967295|w>>>26),w=S+(v^(y|~C))+E[3]+2399980690&4294967295,S=y+(w<<10&4294967295|w>>>22),w=C+(y^(S|~v))+E[10]+4293915773&4294967295,C=S+(w<<15&4294967295|w>>>17),w=v+(S^(C|~y))+E[1]+2240044497&4294967295,v=C+(w<<21&4294967295|w>>>11),w=y+(C^(v|~S))+E[8]+1873313359&4294967295,y=v+(w<<6&4294967295|w>>>26),w=S+(v^(y|~C))+E[15]+4264355552&4294967295,S=y+(w<<10&4294967295|w>>>22),w=C+(y^(S|~v))+E[6]+2734768916&4294967295,C=S+(w<<15&4294967295|w>>>17),w=v+(S^(C|~y))+E[13]+1309151649&4294967295,v=C+(w<<21&4294967295|w>>>11),w=y+(C^(v|~S))+E[4]+4149444226&4294967295,y=v+(w<<6&4294967295|w>>>26),w=S+(v^(y|~C))+E[11]+3174756917&4294967295,S=y+(w<<10&4294967295|w>>>22),w=C+(y^(S|~v))+E[2]+718787259&4294967295,C=S+(w<<15&4294967295|w>>>17),w=v+(S^(C|~y))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(C+(w<<21&4294967295|w>>>11))&4294967295,b.g[2]=b.g[2]+C&4294967295,b.g[3]=b.g[3]+S&4294967295}i.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var v=y-this.blockSize,E=this.B,C=this.h,S=0;S<y;){if(C==0)for(;S<=v;)r(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<y;)if(E[C++]=b.charCodeAt(S++),C==this.blockSize){r(this,E),C=0;break}}else for(;S<y;)if(E[C++]=b[S++],C==this.blockSize){r(this,E),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var v=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=v&255,v/=256;for(this.u(b),b=Array(16),y=v=0;4>y;++y)for(var E=0;32>E;E+=8)b[v++]=this.g[y]>>>E&255;return b};function o(b,y){var v=a;return Object.prototype.hasOwnProperty.call(v,b)?v[b]:v[b]=y(b)}function s(b,y){this.h=y;for(var v=[],E=!0,C=b.length-1;0<=C;C--){var S=b[C]|0;E&&S==y||(v[C]=S,E=!1)}this.g=v}var a={};function c(b){return-128<=b&&128>b?o(b,function(y){return new s([y|0],0>y?-1:0)}):new s([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return T(u(-b));for(var y=[],v=1,E=0;b>=v;E++)y[E]=b/v|0,v*=4294967296;return new s(y,0)}function d(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return T(d(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=u(Math.pow(y,8)),E=f,C=0;C<b.length;C+=8){var S=Math.min(8,b.length-C),w=parseInt(b.substring(C,C+S),y);8>S?(S=u(Math.pow(y,S)),E=E.j(S).add(u(w))):(E=E.j(v),E=E.add(u(w)))}return E}var f=c(0),g=c(1),_=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-T(this).m();for(var b=0,y=1,v=0;v<this.g.length;v++){var E=this.i(v);b+=(0<=E?E:4294967296+E)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D(this))return"0";if(x(this))return"-"+T(this).toString(b);for(var y=u(Math.pow(b,6)),v=this,E="";;){var C=U(v,y).g;v=V(v,C.j(y));var S=((0<v.g.length?v.g[0]:v.h)>>>0).toString(b);if(v=C,D(v))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function D(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function x(b){return b.h==-1}t.l=function(b){return b=V(this,b),x(b)?-1:D(b)?0:1};function T(b){for(var y=b.g.length,v=[],E=0;E<y;E++)v[E]=~b.g[E];return new s(v,~b.h).add(g)}t.abs=function(){return x(this)?T(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),v=[],E=0,C=0;C<=y;C++){var S=E+(this.i(C)&65535)+(b.i(C)&65535),w=(S>>>16)+(this.i(C)>>>16)+(b.i(C)>>>16);E=w>>>16,S&=65535,w&=65535,v[C]=w<<16|S}return new s(v,v[v.length-1]&-2147483648?-1:0)};function V(b,y){return b.add(T(y))}t.j=function(b){if(D(this)||D(b))return f;if(x(this))return x(b)?T(this).j(T(b)):T(T(this).j(b));if(x(b))return T(this.j(T(b)));if(0>this.l(_)&&0>b.l(_))return u(this.m()*b.m());for(var y=this.g.length+b.g.length,v=[],E=0;E<2*y;E++)v[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<b.g.length;C++){var S=this.i(E)>>>16,w=this.i(E)&65535,_i=b.i(C)>>>16,ac=b.i(C)&65535;v[2*E+2*C]+=w*ac,j(v,2*E+2*C),v[2*E+2*C+1]+=S*ac,j(v,2*E+2*C+1),v[2*E+2*C+1]+=w*_i,j(v,2*E+2*C+1),v[2*E+2*C+2]+=S*_i,j(v,2*E+2*C+2)}for(E=0;E<y;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=y;E<2*y;E++)v[E]=0;return new s(v,0)};function j(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function O(b,y){this.g=b,this.h=y}function U(b,y){if(D(y))throw Error("division by zero");if(D(b))return new O(f,f);if(x(b))return y=U(T(b),y),new O(T(y.g),T(y.h));if(x(y))return y=U(b,T(y)),new O(T(y.g),y.h);if(30<b.g.length){if(x(b)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var v=g,E=y;0>=E.l(b);)v=ee(v),E=ee(E);var C=Y(v,1),S=Y(E,1);for(E=Y(E,2),v=Y(v,2);!D(E);){var w=S.add(E);0>=w.l(b)&&(C=C.add(v),S=w),E=Y(E,1),v=Y(v,1)}return y=V(b,C.j(y)),new O(C,y)}for(C=f;0<=b.l(y);){for(v=Math.max(1,Math.floor(b.m()/y.m())),E=Math.ceil(Math.log(v)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=u(v),w=S.j(y);x(w)||0<w.l(b);)v-=E,S=u(v),w=S.j(y);D(S)&&(S=g),C=C.add(S),b=V(b,w)}return new O(C,b)}t.A=function(b){return U(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)&b.i(E);return new s(v,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)|b.i(E);return new s(v,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)^b.i(E);return new s(v,this.h^b.h)};function ee(b){for(var y=b.g.length+1,v=[],E=0;E<y;E++)v[E]=b.i(E)<<1|b.i(E-1)>>>31;return new s(v,b.h)}function Y(b,y){var v=y>>5;y%=32;for(var E=b.g.length-v,C=[],S=0;S<E;S++)C[S]=0<y?b.i(S+v)>>>y|b.i(S+v+1)<<32-y:b.i(S+v);return new s(C,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,A0=sx.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,br=sx.Integer=s}).apply(typeof ox<"u"?ox:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ji={};var R0,P0,oa,O0,Ml,df,N0,k0,F0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=n(this);function r(l,h){if(h)e:{var p=i;l=l.split(".");for(var m=0;m<l.length-1;m++){var I=l[m];if(!(I in p))break e;p=p[I]}l=l[l.length-1],m=p[l],h=h(m),h!=m&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,m=!1,I={next:function(){if(!m&&p<l.length){var R=p++;return{value:h(R,l[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}r("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,m),l.apply(h,I)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function _(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),l.apply(this,m)}}function D(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(m,I,R){for(var B=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)B[Fe-2]=arguments[Fe];return h.prototype[I].apply(m,B)}}function x(l){let h=l.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=l[m];return p}return[]}function T(l,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let I=l.length||0,R=m.length||0;l.length=I+R;for(let B=0;B<R;B++)l[I+B]=m[B]}else l.push(m)}}class V{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function j(l){return/^[\s\xa0]*$/.test(l)}function O(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function U(l){return U[" "](l),l}U[" "]=function(){};var ee=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Y(l,h,p){for(let m in l)h.call(p,l[m],m,l)}function b(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function y(l){let h={};for(let p in l)h[p]=l[p];return h}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(l,h){let p,m;for(let I=1;I<arguments.length;I++){m=arguments[I];for(p in m)l[p]=m[p];for(let R=0;R<v.length;R++)p=v[R],Object.prototype.hasOwnProperty.call(m,p)&&(l[p]=m[p])}}function C(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function S(l){a.setTimeout(()=>{throw l},0)}function w(){var l=rg;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class _i{constructor(){this.h=this.g=null}add(h,p){let m=ac.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var ac=new V(()=>new iO,l=>l.reset());class iO{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let cc,lc=!1,rg=new _i,V1=()=>{let l=a.Promise.resolve(void 0);cc=()=>{l.then(rO)}};var rO=()=>{for(var l;l=w();){try{l.h.call(l.g)}catch(p){S(p)}var h=ac;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}lc=!1};function Ki(){this.s=this.s,this.C=this.C}Ki.prototype.s=!1,Ki.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ki.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function At(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var oO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function uc(l,h){if(At.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,m=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(ee){e:{try{U(h.nodeName);var I=!0;break e}catch{}I=!1}I||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:sO[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&uc.aa.h.call(this)}}D(uc,At);var sO={2:"touch",3:"pen",4:"mouse"};uc.prototype.h=function(){uc.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var dc="closure_listenable_"+(1e6*Math.random()|0),aO=0;function cO(l,h,p,m,I){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=I,this.key=++aO,this.da=this.fa=!1}function xu(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Mu(l){this.src=l,this.g={},this.h=0}Mu.prototype.add=function(l,h,p,m,I){var R=l.toString();l=this.g[R],l||(l=this.g[R]=[],this.h++);var B=sg(l,h,m,I);return-1<B?(h=l[B],p||(h.fa=!1)):(h=new cO(h,this.src,R,!!m,I),h.fa=p,l.push(h)),h};function og(l,h){var p=h.type;if(p in l.g){var m=l.g[p],I=Array.prototype.indexOf.call(m,h,void 0),R;(R=0<=I)&&Array.prototype.splice.call(m,I,1),R&&(xu(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function sg(l,h,p,m){for(var I=0;I<l.length;++I){var R=l[I];if(!R.da&&R.listener==h&&R.capture==!!p&&R.ha==m)return I}return-1}var ag="closure_lm_"+(1e6*Math.random()|0),cg={};function L1(l,h,p,m,I){if(m&&m.once)return j1(l,h,p,m,I);if(Array.isArray(h)){for(var R=0;R<h.length;R++)L1(l,h[R],p,m,I);return null}return p=hg(p),l&&l[dc]?l.K(h,p,u(m)?!!m.capture:!!m,I):B1(l,h,p,!1,m,I)}function B1(l,h,p,m,I,R){if(!h)throw Error("Invalid event type");var B=u(I)?!!I.capture:!!I,Fe=ug(l);if(Fe||(l[ag]=Fe=new Mu(l)),p=Fe.add(h,p,m,B,R),p.proxy)return p;if(m=lO(),p.proxy=m,m.src=l,m.listener=p,l.addEventListener)oO||(I=B),I===void 0&&(I=!1),l.addEventListener(h.toString(),m,I);else if(l.attachEvent)l.attachEvent($1(h.toString()),m);else if(l.addListener&&l.removeListener)l.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function lO(){function l(p){return h.call(l.src,l.listener,p)}let h=uO;return l}function j1(l,h,p,m,I){if(Array.isArray(h)){for(var R=0;R<h.length;R++)j1(l,h[R],p,m,I);return null}return p=hg(p),l&&l[dc]?l.L(h,p,u(m)?!!m.capture:!!m,I):B1(l,h,p,!0,m,I)}function U1(l,h,p,m,I){if(Array.isArray(h))for(var R=0;R<h.length;R++)U1(l,h[R],p,m,I);else m=u(m)?!!m.capture:!!m,p=hg(p),l&&l[dc]?(l=l.i,h=String(h).toString(),h in l.g&&(R=l.g[h],p=sg(R,p,m,I),-1<p&&(xu(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete l.g[h],l.h--)))):l&&(l=ug(l))&&(h=l.g[h.toString()],l=-1,h&&(l=sg(h,p,m,I)),(p=-1<l?h[l]:null)&&lg(p))}function lg(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[dc])og(h.i,l);else{var p=l.type,m=l.proxy;h.removeEventListener?h.removeEventListener(p,m,l.capture):h.detachEvent?h.detachEvent($1(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=ug(h))?(og(p,l),p.h==0&&(p.src=null,h[ag]=null)):xu(l)}}}function $1(l){return l in cg?cg[l]:cg[l]="on"+l}function uO(l,h){if(l.da)l=!0;else{h=new uc(h,this);var p=l.listener,m=l.ha||l.src;l.fa&&lg(l),l=p.call(m,h)}return l}function ug(l){return l=l[ag],l instanceof Mu?l:null}var dg="__closure_events_fn_"+(1e9*Math.random()>>>0);function hg(l){return typeof l=="function"?l:(l[dg]||(l[dg]=function(h){return l.handleEvent(h)}),l[dg])}function Rt(){Ki.call(this),this.i=new Mu(this),this.M=this,this.F=null}D(Rt,Ki),Rt.prototype[dc]=!0,Rt.prototype.removeEventListener=function(l,h,p,m){U1(this,l,h,p,m)};function Bt(l,h){var p,m=l.F;if(m)for(p=[];m;m=m.F)p.push(m);if(l=l.M,m=h.type||h,typeof h=="string")h=new At(h,l);else if(h instanceof At)h.target=h.target||l;else{var I=h;h=new At(m,l),E(h,I)}if(I=!0,p)for(var R=p.length-1;0<=R;R--){var B=h.g=p[R];I=Au(B,m,!0,h)&&I}if(B=h.g=l,I=Au(B,m,!0,h)&&I,I=Au(B,m,!1,h)&&I,p)for(R=0;R<p.length;R++)B=h.g=p[R],I=Au(B,m,!1,h)&&I}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],m=0;m<p.length;m++)xu(p[m]);delete l.g[h],l.h--}}this.F=null},Rt.prototype.K=function(l,h,p,m){return this.i.add(String(l),h,!1,p,m)},Rt.prototype.L=function(l,h,p,m){return this.i.add(String(l),h,!0,p,m)};function Au(l,h,p,m){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var I=!0,R=0;R<h.length;++R){var B=h[R];if(B&&!B.da&&B.capture==p){var Fe=B.listener,Ct=B.ha||B.src;B.fa&&og(l.i,B),I=Fe.call(Ct,m)!==!1&&I}}return I&&!m.defaultPrevented}function H1(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function G1(l){l.g=H1(()=>{l.g=null,l.i&&(l.i=!1,G1(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class dO extends Ki{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:G1(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hc(l){Ki.call(this),this.h=l,this.g={}}D(hc,Ki);var z1=[];function q1(l){Y(l.g,function(h,p){this.g.hasOwnProperty(p)&&lg(h)},l),l.g={}}hc.prototype.N=function(){hc.aa.N.call(this),q1(this)},hc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fg=a.JSON.stringify,hO=a.JSON.parse,fO=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function pg(){}pg.prototype.h=null;function W1(l){return l.h||(l.h=l.i())}function Q1(){}var fc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gg(){At.call(this,"d")}D(gg,At);function mg(){At.call(this,"c")}D(mg,At);var Hr={},K1=null;function Ru(){return K1=K1||new Rt}Hr.La="serverreachability";function Y1(l){At.call(this,Hr.La,l)}D(Y1,At);function pc(l){let h=Ru();Bt(h,new Y1(h))}Hr.STAT_EVENT="statevent";function J1(l,h){At.call(this,Hr.STAT_EVENT,l),this.stat=h}D(J1,At);function jt(l){let h=Ru();Bt(h,new J1(h,l))}Hr.Ma="timingevent";function Z1(l,h){At.call(this,Hr.Ma,l),this.size=h}D(Z1,At);function gc(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function mc(){this.g=!0}mc.prototype.xa=function(){this.g=!1};function pO(l,h,p,m,I,R){l.info(function(){if(l.g)if(R)for(var B="",Fe=R.split("&"),Ct=0;Ct<Fe.length;Ct++){var Se=Fe[Ct].split("=");if(1<Se.length){var Pt=Se[0];Se=Se[1];var Ot=Pt.split("_");B=2<=Ot.length&&Ot[1]=="type"?B+(Pt+"="+Se+"&"):B+(Pt+"=redacted&")}}else B=null;else B=R;return"XMLHTTP REQ ("+m+") [attempt "+I+"]: "+h+`
`+p+`
`+B})}function gO(l,h,p,m,I,R,B){l.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+I+"]: "+h+`
`+p+`
`+R+" "+B})}function ts(l,h,p,m){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+_O(l,p)+(m?" "+m:"")})}function mO(l,h){l.info(function(){return"TIMEOUT: "+h})}mc.prototype.info=function(){};function _O(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var m=p[l];if(!(2>m.length)){var I=m[1];if(Array.isArray(I)&&!(1>I.length)){var R=I[0];if(R!="noop"&&R!="stop"&&R!="close")for(var B=1;B<I.length;B++)I[B]=""}}}}return fg(p)}catch{return h}}var Pu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},X1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_g;function Ou(){}D(Ou,pg),Ou.prototype.g=function(){return new XMLHttpRequest},Ou.prototype.i=function(){return{}},_g=new Ou;function Yi(l,h,p,m){this.j=l,this.i=h,this.l=p,this.R=m||1,this.U=new hc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eE}function eE(){this.i=null,this.g="",this.h=!1}var tE={},yg={};function vg(l,h,p){l.L=1,l.v=Vu(yi(h)),l.m=p,l.P=!0,nE(l,null)}function nE(l,h){l.F=Date.now(),Nu(l),l.A=yi(l.v);var p=l.A,m=l.R;Array.isArray(m)||(m=[String(m)]),mE(p.i,"t",m),l.C=0,p=l.j.J,l.h=new eE,l.g=NE(l.j,p?h:null,!l.m),0<l.O&&(l.M=new dO(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,m=l.ca;var I="readystatechange";Array.isArray(I)||(I&&(z1[0]=I.toString()),I=z1);for(var R=0;R<I.length;R++){var B=L1(p,I[R],m||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),pc(),pO(l.i,l.u,l.A,l.l,l.R,l.m)}Yi.prototype.ca=function(l){l=l.target;let h=this.M;h&&vi(l)==3?h.j():this.Y(l)},Yi.prototype.Y=function(l){try{if(l==this.g)e:{let Ot=vi(this.g);var h=this.g.Ba();let rs=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||DE(this.g)))){this.J||Ot!=4||h==7||(h==8||0>=rs?pc(3):pc(2)),wg(this);var p=this.g.Z();this.X=p;t:if(iE(this)){var m=DE(this.g);l="";var I=m.length,R=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),_c(this);var B="";break t}this.h.i=new a.TextDecoder}for(h=0;h<I;h++)this.h.h=!0,l+=this.h.i.decode(m[h],{stream:!(R&&h==I-1)});m.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=p==200,gO(this.i,this.u,this.A,this.l,this.R,Ot,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Ct=this.g;if((Fe=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Fe)){var Se=Fe;break t}}Se=null}if(p=Se)ts(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bg(this,p);else{this.o=!1,this.s=3,jt(12),Gr(this),_c(this);break e}}if(this.P){p=!0;let In;for(;!this.J&&this.C<B.length;)if(In=yO(this,B),In==yg){Ot==4&&(this.s=4,jt(14),p=!1),ts(this.i,this.l,null,"[Incomplete Response]");break}else if(In==tE){this.s=4,jt(15),ts(this.i,this.l,B,"[Invalid Chunk]"),p=!1;break}else ts(this.i,this.l,In,null),bg(this,In);if(iE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||B.length!=0||this.h.h||(this.s=1,jt(16),p=!1),this.o=this.o&&p,!p)ts(this.i,this.l,B,"[Invalid Chunked Response]"),Gr(this),_c(this);else if(0<B.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Sg(Pt),Pt.M=!0,jt(11))}}else ts(this.i,this.l,B,null),bg(this,B);Ot==4&&Gr(this),this.o&&!this.J&&(Ot==4?AE(this.j,this):(this.o=!1,Nu(this)))}else kO(this.g),p==400&&0<B.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),Gr(this),_c(this)}}}catch{}finally{}};function iE(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function yO(l,h){var p=l.C,m=h.indexOf(`
`,p);return m==-1?yg:(p=Number(h.substring(p,m)),isNaN(p)?tE:(m+=1,m+p>h.length?yg:(h=h.slice(m,m+p),l.C=m+p,h)))}Yi.prototype.cancel=function(){this.J=!0,Gr(this)};function Nu(l){l.S=Date.now()+l.I,rE(l,l.I)}function rE(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=gc(g(l.ba,l),h)}function wg(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Yi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(mO(this.i,this.A),this.L!=2&&(pc(),jt(17)),Gr(this),this.s=2,_c(this)):rE(this,this.S-l)};function _c(l){l.j.G==0||l.J||AE(l.j,l)}function Gr(l){wg(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,q1(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function bg(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Eg(p.h,l))){if(!l.K&&Eg(p.h,l)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var I=m;if(I[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)$u(p),ju(p);else break e;Tg(p),jt(18)}}else p.za=I[1],0<p.za-p.T&&37500>I[2]&&p.F&&p.v==0&&!p.C&&(p.C=gc(g(p.Za,p),6e3));if(1>=aE(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else qr(p,11)}else if((l.K||p.g==l)&&$u(p),!j(h))for(I=p.Da.g.parse(h),h=0;h<I.length;h++){let Se=I[h];if(p.T=Se[0],Se=Se[1],p.G==2)if(Se[0]=="c"){p.K=Se[1],p.ia=Se[2];let Pt=Se[3];Pt!=null&&(p.la=Pt,p.j.info("VER="+p.la));let Ot=Se[4];Ot!=null&&(p.Aa=Ot,p.j.info("SVER="+p.Aa));let rs=Se[5];rs!=null&&typeof rs=="number"&&0<rs&&(m=1.5*rs,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let In=l.g;if(In){let Gu=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gu){var R=m.h;R.g||Gu.indexOf("spdy")==-1&&Gu.indexOf("quic")==-1&&Gu.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Dg(R,R.h),R.h=null))}if(m.D){let xg=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;xg&&(m.ya=xg,$e(m.I,m.D,xg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var B=l;if(m.qa=OE(m,m.J?m.ia:null,m.W),B.K){cE(m.h,B);var Fe=B,Ct=m.L;Ct&&(Fe.I=Ct),Fe.B&&(wg(Fe),Nu(Fe)),m.g=B}else xE(m);0<p.i.length&&Uu(p)}else Se[0]!="stop"&&Se[0]!="close"||qr(p,7);else p.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?qr(p,7):Ig(p):Se[0]!="noop"&&p.l&&p.l.ta(Se),p.v=0)}}pc(4)}catch{}}var vO=class{constructor(l,h){this.g=l,this.map=h}};function oE(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sE(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function aE(l){return l.h?1:l.g?l.g.size:0}function Eg(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Dg(l,h){l.g?l.g.add(h):l.h=h}function cE(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}oE.prototype.cancel=function(){if(this.i=lE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function lE(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return x(l.i)}function wO(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,m=0;m<p;m++)h.push(l[m]);return h}h=[],p=0;for(m in l)h[p++]=l[m];return h}function bO(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let m in l)h[p++]=m;return h}}}function uE(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=bO(l),m=wO(l),I=m.length,R=0;R<I;R++)h.call(void 0,m[R],p&&p[R],l)}var dE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EO(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var m=l[p].indexOf("="),I=null;if(0<=m){var R=l[p].substring(0,m);I=l[p].substring(m+1)}else R=l[p];h(R,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function zr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof zr){this.h=l.h,ku(this,l.j),this.o=l.o,this.g=l.g,Fu(this,l.s),this.l=l.l;var h=l.i,p=new wc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),hE(this,p),this.m=l.m}else l&&(h=String(l).match(dE))?(this.h=!1,ku(this,h[1]||"",!0),this.o=yc(h[2]||""),this.g=yc(h[3]||"",!0),Fu(this,h[4]),this.l=yc(h[5]||"",!0),hE(this,h[6]||"",!0),this.m=yc(h[7]||"")):(this.h=!1,this.i=new wc(null,this.h))}zr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(vc(h,fE,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(vc(h,fE,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(vc(p,p.charAt(0)=="/"?IO:CO,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",vc(p,SO)),l.join("")};function yi(l){return new zr(l)}function ku(l,h,p){l.j=p?yc(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Fu(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function hE(l,h,p){h instanceof wc?(l.i=h,xO(l.i,l.h)):(p||(h=vc(h,TO)),l.i=new wc(h,l.h))}function $e(l,h,p){l.i.set(h,p)}function Vu(l){return $e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function yc(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function vc(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,DO),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function DO(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var fE=/[#\/\?@]/g,CO=/[#\?:]/g,IO=/[#\?]/g,TO=/[#\?@]/g,SO=/#/g;function wc(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Ji(l){l.g||(l.g=new Map,l.h=0,l.i&&EO(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=wc.prototype,t.add=function(l,h){Ji(this),this.i=null,l=ns(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function pE(l,h){Ji(l),h=ns(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function gE(l,h){return Ji(l),h=ns(l,h),l.g.has(h)}t.forEach=function(l,h){Ji(this),this.g.forEach(function(p,m){p.forEach(function(I){l.call(h,I,m,this)},this)},this)},t.na=function(){Ji(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let I=l[m];for(let R=0;R<I.length;R++)p.push(h[m])}return p},t.V=function(l){Ji(this);let h=[];if(typeof l=="string")gE(this,l)&&(h=h.concat(this.g.get(ns(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Ji(this),this.i=null,l=ns(this,l),gE(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function mE(l,h,p){pE(l,h),0<p.length&&(l.i=null,l.g.set(ns(l,h),x(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let R=encodeURIComponent(String(m)),B=this.V(m);for(m=0;m<B.length;m++){var I=R;B[m]!==""&&(I+="="+encodeURIComponent(String(B[m]))),l.push(I)}}return this.i=l.join("&")};function ns(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function xO(l,h){h&&!l.j&&(Ji(l),l.i=null,l.g.forEach(function(p,m){var I=m.toLowerCase();m!=I&&(pE(this,m),mE(this,I,p))},l)),l.j=h}function MO(l,h){let p=new mc;if(a.Image){let m=new Image;m.onload=_(Zi,p,"TestLoadImage: loaded",!0,h,m),m.onerror=_(Zi,p,"TestLoadImage: error",!1,h,m),m.onabort=_(Zi,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=_(Zi,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=l}else h(!1)}function AO(l,h){let p=new mc,m=new AbortController,I=setTimeout(()=>{m.abort(),Zi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:m.signal}).then(R=>{clearTimeout(I),R.ok?Zi(p,"TestPingServer: ok",!0,h):Zi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(I),Zi(p,"TestPingServer: error",!1,h)})}function Zi(l,h,p,m,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),m(p)}catch{}}function RO(){this.g=new fO}function PO(l,h,p){let m=p||"";try{uE(l,function(I,R){let B=I;u(I)&&(B=fg(I)),h.push(m+R+"="+encodeURIComponent(B))})}catch(I){throw h.push(m+"type="+encodeURIComponent("_badmap")),I}}function bc(l){this.l=l.Ub||null,this.j=l.eb||!1}D(bc,pg),bc.prototype.g=function(){return new Lu(this.l,this.j)},bc.prototype.i=function(l){return function(){return l}}({});function Lu(l,h){Rt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Lu,Rt),t=Lu.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Dc(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ec(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Dc(this)),this.g&&(this.readyState=3,Dc(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_E(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function _E(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ec(this):Dc(this),this.readyState==3&&_E(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ec(this))},t.Qa=function(l){this.g&&(this.response=l,Ec(this))},t.ga=function(){this.g&&Ec(this)};function Ec(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Dc(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Dc(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Lu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function yE(l){let h="";return Y(l,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Cg(l,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=yE(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):$e(l,h,p))}function Je(l){Rt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Je,Rt);var OO=/^https?$/i,NO=["POST","PUT"];t=Je.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_g.g(),this.v=this.o?W1(this.o):W1(_g),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(R){vE(this,R);return}if(l=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var I in m)p.set(I,m[I]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())p.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),I=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(NO,h,void 0))||m||I||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,B]of p)this.g.setRequestHeader(R,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{EE(this),this.u=!0,this.g.send(l),this.u=!1}catch(R){vE(this,R)}};function vE(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,wE(l),Bu(l)}function wE(l){l.A||(l.A=!0,Bt(l,"complete"),Bt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Bt(this,"complete"),Bt(this,"abort"),Bu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bu(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bE(this):this.bb())},t.bb=function(){bE(this)};function bE(l){if(l.h&&typeof s<"u"&&(!l.v[1]||vi(l)!=4||l.Z()!=2)){if(l.u&&vi(l)==4)H1(l.Ea,0,l);else if(Bt(l,"readystatechange"),vi(l)==4){l.h=!1;try{let B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=B===0){var I=String(l.D).match(dE)[1]||null;!I&&a.self&&a.self.location&&(I=a.self.location.protocol.slice(0,-1)),m=!OO.test(I?I.toLowerCase():"")}p=m}if(p)Bt(l,"complete"),Bt(l,"success");else{l.m=6;try{var R=2<vi(l)?l.g.statusText:""}catch{R=""}l.l=R+" ["+l.Z()+"]",wE(l)}}finally{Bu(l)}}}}function Bu(l,h){if(l.g){EE(l);let p=l.g,m=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Bt(l,"ready");try{p.onreadystatechange=m}catch{}}}function EE(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function vi(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),hO(h)}};function DE(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function kO(l){let h={};l=(l.g&&2<=vi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<l.length;m++){if(j(l[m]))continue;var p=C(l[m]);let I=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let R=h[I]||[];h[I]=R,R.push(p)}b(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cc(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function CE(l){this.Aa=0,this.i=[],this.j=new mc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cc("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cc("baseRetryDelayMs",5e3,l),this.cb=Cc("retryDelaySeedMs",1e4,l),this.Wa=Cc("forwardChannelMaxRetries",2,l),this.wa=Cc("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new oE(l&&l.concurrentRequestLimit),this.Da=new RO,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=CE.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,m){jt(0),this.W=l,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=OE(this,null,this.W),Uu(this)};function Ig(l){if(IE(l),l.G==3){var h=l.U++,p=yi(l.I);if($e(p,"SID",l.K),$e(p,"RID",h),$e(p,"TYPE","terminate"),Ic(l,p),h=new Yi(l,l.j,h),h.L=2,h.v=Vu(yi(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=NE(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Nu(h)}PE(l)}function ju(l){l.g&&(Sg(l),l.g.cancel(),l.g=null)}function IE(l){ju(l),l.u&&(a.clearTimeout(l.u),l.u=null),$u(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Uu(l){if(!sE(l.h)&&!l.s){l.s=!0;var h=l.Ga;cc||V1(),lc||(cc(),lc=!0),rg.add(h,l),l.B=0}}function FO(l,h){return aE(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=gc(g(l.Ga,l,h),RE(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let I=new Yi(this,this.j,l),R=this.o;if(this.S&&(R?(R=y(R),E(R,this.S)):R=this.S),this.m!==null||this.O||(I.H=R,R=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=SE(this,I,h),p=yi(this.I),$e(p,"RID",l),$e(p,"CVER",22),this.D&&$e(p,"X-HTTP-Session-Id",this.D),Ic(this,p),R&&(this.O?h="headers="+encodeURIComponent(String(yE(R)))+"&"+h:this.m&&Cg(p,this.m,R)),Dg(this.h,I),this.Ua&&$e(p,"TYPE","init"),this.P?($e(p,"$req",h),$e(p,"SID","null"),I.T=!0,vg(I,p,null)):vg(I,p,h),this.G=2}}else this.G==3&&(l?TE(this,l):this.i.length==0||sE(this.h)||TE(this))};function TE(l,h){var p;h?p=h.l:p=l.U++;let m=yi(l.I);$e(m,"SID",l.K),$e(m,"RID",p),$e(m,"AID",l.T),Ic(l,m),l.m&&l.o&&Cg(m,l.m,l.o),p=new Yi(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=SE(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Dg(l.h,p),vg(p,m,h)}function Ic(l,h){l.H&&Y(l.H,function(p,m){$e(h,m,p)}),l.l&&uE({},function(p,m){$e(h,m,p)})}function SE(l,h,p){p=Math.min(l.i.length,p);var m=l.l?g(l.l.Na,l.l,l):null;e:{var I=l.i;let R=-1;for(;;){let B=["count="+p];R==-1?0<p?(R=I[0].g,B.push("ofs="+R)):R=0:B.push("ofs="+R);let Fe=!0;for(let Ct=0;Ct<p;Ct++){let Se=I[Ct].g,Pt=I[Ct].map;if(Se-=R,0>Se)R=Math.max(0,I[Ct].g-100),Fe=!1;else try{PO(Pt,B,"req"+Se+"_")}catch{m&&m(Pt)}}if(Fe){m=B.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,m}function xE(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;cc||V1(),lc||(cc(),lc=!0),rg.add(h,l),l.v=0}}function Tg(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=gc(g(l.Fa,l),RE(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,ME(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=gc(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),ju(this),ME(this))};function Sg(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function ME(l){l.g=new Yi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=yi(l.qa);$e(h,"RID","rpc"),$e(h,"SID",l.K),$e(h,"AID",l.T),$e(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&$e(h,"TO",l.ja),$e(h,"TYPE","xmlhttp"),Ic(l,h),l.m&&l.o&&Cg(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Vu(yi(h)),p.m=null,p.P=!0,nE(p,l)}t.Za=function(){this.C!=null&&(this.C=null,ju(this),Tg(this),jt(19))};function $u(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function AE(l,h){var p=null;if(l.g==h){$u(l),Sg(l),l.g=null;var m=2}else if(Eg(l.h,h))p=h.D,cE(l.h,h),m=1;else return;if(l.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var I=l.B;m=Ru(),Bt(m,new Z1(m,p)),Uu(l)}else xE(l);else if(I=h.s,I==3||I==0&&0<h.X||!(m==1&&FO(l,h)||m==2&&Tg(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),I){case 1:qr(l,5);break;case 4:qr(l,10);break;case 3:qr(l,6);break;default:qr(l,2)}}}function RE(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function qr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),m=l.Xa;let I=!m;m=new zr(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ku(m,"https"),Vu(m),I?MO(m.toString(),p):AO(m.toString(),p)}else jt(2);l.G=0,l.l&&l.l.sa(h),PE(l),IE(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function PE(l){if(l.G=0,l.ka=[],l.l){let h=lE(l.h);(h.length!=0||l.i.length!=0)&&(T(l.ka,h),T(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function OE(l,h,p){var m=p instanceof zr?yi(p):new zr(p);if(m.g!="")h&&(m.g=h+"."+m.g),Fu(m,m.s);else{var I=a.location;m=I.protocol,h=h?h+"."+I.hostname:I.hostname,I=+I.port;var R=new zr(null);m&&ku(R,m),h&&(R.g=h),I&&Fu(R,I),p&&(R.l=p),m=R}return p=l.D,h=l.ya,p&&h&&$e(m,p,h),$e(m,"VER",l.la),Ic(l,m),m}function NE(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Je(new bc({eb:p})):new Je(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kE(){}t=kE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hu(){}Hu.prototype.g=function(l,h){return new nn(l,h)};function nn(l,h){Rt.call(this),this.g=new CE(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!j(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!j(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new is(this)}D(nn,Rt),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ig(this.g)},nn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=fg(l),l=p);h.i.push(new vO(h.Ya++,l)),h.G==3&&Uu(h)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ig(this.g),delete this.g,nn.aa.N.call(this)};function FE(l){gg.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}D(FE,gg);function VE(){mg.call(this),this.status=1}D(VE,mg);function is(l){this.g=l}D(is,kE),is.prototype.ua=function(){Bt(this.g,"a")},is.prototype.ta=function(l){Bt(this.g,new FE(l))},is.prototype.sa=function(l){Bt(this.g,new VE)},is.prototype.ra=function(){Bt(this.g,"b")},Hu.prototype.createWebChannel=Hu.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,F0=ji.createWebChannelTransport=function(){return new Hu},k0=ji.getStatEventTarget=function(){return Ru()},N0=ji.Event=Hr,df=ji.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pu.NO_ERROR=0,Pu.TIMEOUT=8,Pu.HTTP_ERROR=6,Ml=ji.ErrorCode=Pu,X1.COMPLETE="complete",O0=ji.EventType=X1,Q1.EventType=fc,fc.OPEN="a",fc.CLOSE="b",fc.ERROR="c",fc.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,oa=ji.WebChannel=Q1,P0=ji.FetchXmlHttpFactory=bc,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,R0=ji.XhrIo=Je}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});var ax="@firebase/firestore";var lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");var Fa="10.12.1";var xr=new Ku("@firebase/firestore");function ua(){return xr.logLevel}function Bw(t){xr.setLogLevel(t)}function F(t,...e){if(xr.logLevel<=Hn.DEBUG){let n=e.map(jw);xr.debug(`Firestore (${Fa}): ${t}`,...n)}}function it(t,...e){if(xr.logLevel<=Hn.ERROR){let n=e.map(jw);xr.error(`Firestore (${Fa}): ${t}`,...n)}}function En(t,...e){if(xr.logLevel<=Hn.WARN){let n=e.map(jw);xr.warn(`Firestore (${Fa}): ${t}`,...n)}}function jw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function K(t="Unexpected state"){let e=`FIRESTORE (${Fa}) INTERNAL ASSERTION FAILED: `+t;throw it(e),new Error(e)}function X(t,e){t||K()}function aM(t,e){t||K()}function H(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends Qu{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ut=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ef=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},U0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}},$0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},H0=class{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),o=new ut;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ut,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>A(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ut)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(X(typeof i.accessToken=="string"),new Ef(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string"),new lt(e)}},G0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},z0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new G0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},q0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},W0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(X(typeof n.token=="string"),this.R=n.token,new q0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function r$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Df=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=r$(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function he(t,e){return t<e?-1:t>e?1:0}function va(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function cM(t){return t+"\0"}var Ke=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ke(0,0))}static max(){return new t(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Cf=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&K(),i===void 0?i=e.length-n:i>e.length-n&&K(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ce=class t extends Cf{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new k(P.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},o$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rt=class t extends Cf{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return o$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new k(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new k(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new k(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ce.fromString(e))}static fromName(e){return new t(Ce.fromString(e).popFirst(5))}static empty(){return new t(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ce(e.slice()))}};var wa=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function Q0(t){return t.fields.find(e=>e.kind===2)}function Io(t){return t.fields.filter(e=>e.kind!==2)}wa.UNKNOWN_ID=-1;var ma=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Ul=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Dn.min())}};function lM(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new Ke(n+1,0):new Ke(n,i));return new Dn(r,$.empty(),e)}function uM(t){return new Dn(t.readTime,t.key,-1)}var Dn=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(te.min(),$.empty(),-1)}static max(){return new t(te.max(),$.empty(),-1)}};function Uw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}var dM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",If=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Lr(t){return A(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==dM)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},c=>i(c))}),s=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&i(s)},d=>r(d))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var Tf=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ut,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ro(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=$w(i.target.error);this.V.reject(new Ro(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new Ro(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Y0(n)}},Mr=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Tc())===12.2&&it("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),To(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Wu())return!1;if(t.C())return!0;let e=Tc(),n=t.S(e),i=0<n&&n<10,r=hM(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return A(this,null,function*(){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new Ro(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new k(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new k(P.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new Ro(e,s))},r.onupgradeneeded=o=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return A(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Tf.open(this.db,e,o?"readonly":"readwrite",i),c=r(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(F("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function hM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var K0=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return To(this.B.delete())}},Ro=class extends k{constructor(e,n){super(P.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Br(t){return t.name==="IndexedDbTransactionError"}var Y0=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(F("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),To(i)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),To(this.store.add(e))}get(e){return To(this.store.get(e)).next(n=>(n===void 0&&(n=null),F("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),To(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),To(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new M((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new M((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(e,n){F("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,a)=>a.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new M((i,r)=>{n.onerror=o=>{let s=$w(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}W(e,n){let i=[];return new M((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let c=new K0(a),u=n(a.primaryKey,a.value,c);if(u instanceof M){let d=u.catch(f=>(c.done(),M.reject(f)));i.push(d)}c.isDone?r():c.K===null?a.continue():a.continue(c.K)}}).next(()=>M.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function To(t){return new M((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=$w(i.target.error);n(r)}})}var cx=!1;function $w(t){let e=Mr.S(Tc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cx||(cx=!0,setTimeout(()=>{throw i},0)),i}}return t}var J0=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){F("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>A(this,null,function*(){this.task=null;try{F("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Br(n)?F("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Lr(n)}yield this.X(6e4)}))}},Z0=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return A(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return M.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!i.has(s))return F("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,o)).next(a=>(F("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let s=uM(o);Uw(s,i)>0&&(i=s)}),new Dn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var dn=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function lu(t){return t==null}function $l(t){return t===0&&1/t==-1/0}function fM(t){return typeof t=="number"&&Number.isInteger(t)&&!$l(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function zt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lx(e)),e=s$(t.get(n),e);return lx(e)}function s$(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function lx(t){return t+""}function ri(t){let e=t.length;if(X(e>=2),e===2)return X(t.charAt(0)===""&&t.charAt(1)===""),Ce.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&K(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=t.substring(o,s),r+="\0";break;case"":r+=t.substring(o,s+1);break;default:K()}o=s+2}return new Ce(i)}var ux=["userId","batchId"];function mf(t,e){return[t,zt(e)]}function pM(t,e,n){return[t,zt(e),n]}var a$={},c$=["prefixPath","collectionGroup","readTime","documentId"],l$=["prefixPath","collectionGroup","documentId"],u$=["collectionGroup","readTime","prefixPath","documentId"],d$=["canonicalId","targetId"],h$=["targetId","path"],f$=["path","targetId"],p$=["collectionId","parent"],g$=["indexId","uid"],m$=["uid","sequenceNumber"],_$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],y$=["indexId","uid","orderedDocumentKey"],v$=["userId","collectionPath","documentId"],w$=["userId","collectionPath","largestBatchId"],b$=["userId","collectionGroup","largestBatchId"],gM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],E$=[...gM,"documentOverlays"],mM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_M=mM,yM=[..._M,"indexConfiguration","indexState","indexEntries"],D$=yM;var Hl=class extends If{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Dt(t,e){let n=H(t);return Mr.F(n._e,e)}function dx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ho(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var He=class t{constructor(e,n){this.comparator=e,this.root=n||si.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ga(this.root,e,this.comparator,!0)}},ga=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},si=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};si.EMPTY=null,si.RED=!0,si.BLACK=!1;si.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,i,r,o){return this}insert(e,n,i){return new si(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Be=class t{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sf(this.data.getIterator())}getIteratorFrom(e){return new Sf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Sf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function sa(t){return t.hasNext()?t.getNext():void 0}var hn=class t{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Be(rt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var xf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function wM(){return typeof atob<"u"}var Et=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var C$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(t){if(X(!!t),typeof t=="string"){let e=0,n=C$.exec(t);if(X(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ar(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}function yp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hw(t){let e=t.mapValue.fields.__previous_value__;return yp(e)?Hw(e):e}function Gl(t){let e=Hi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}var X0=class{constructor(e,n,i,r,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Rr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Tr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_f={nullValue:"NULL_VALUE"};function Po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yp(t)?4:bM(t)?9007199254740991:10:K()}function li(t,e){if(t===e)return!0;let n=Po(t);if(n!==Po(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gl(t).isEqual(Gl(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Hi(r.timestampValue),a=Hi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Ar(r.bytesValue).isEqual(Ar(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return et(r.geoPointValue.latitude)===et(o.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return et(r.integerValue)===et(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=et(r.doubleValue),a=et(o.doubleValue);return s===a?$l(s)===$l(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return va(t.arrayValue.values||[],e.arrayValue.values||[],li);case 10:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(dx(s)!==dx(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!li(s[c],a[c])))return!1;return!0}(t,e);default:return K()}}function zl(t,e){return(t.values||[]).find(n=>li(n,e))!==void 0}function Pr(t,e){if(t===e)return 0;let n=Po(t),i=Po(e);if(n!==i)return he(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=et(o.integerValue||o.doubleValue),c=et(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return hx(t.timestampValue,e.timestampValue);case 4:return hx(Gl(t),Gl(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Ar(o),c=Ar(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=he(a[u],c[u]);if(d!==0)return d}return he(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=he(et(o.latitude),et(s.latitude));return a!==0?a:he(et(o.longitude),et(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let d=Pr(a[u],c[u]);if(d)return d}return he(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Tr.mapValue&&s===Tr.mapValue)return 0;if(o===Tr.mapValue)return 1;if(s===Tr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=he(c[f],d[f]);if(g!==0)return g;let _=Pr(a[c[f]],u[d[f]]);if(_!==0)return _}return he(c.length,d.length)}(t.mapValue,e.mapValue);default:throw K()}}function hx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);let n=Hi(t),i=Hi(e),r=he(n.seconds,i.seconds);return r!==0?r:he(n.nanos,i.nanos)}function ba(t){return ev(t)}function ev(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Hi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ar(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=ev(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${ev(n.fields[s])}`;return r+"}"}(t.mapValue):K()}function Oo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tv(t){return!!t&&"integerValue"in t}function ql(t){return!!t&&"arrayValue"in t}function fx(t){return!!t&&"nullValue"in t}function px(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yf(t){return!!t&&"mapValue"in t}function Fl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ho(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Fl(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function I$(t){return"nullValue"in t?_f:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Oo(Rr.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:K()}function T$(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Oo(Rr.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Tr:K()}function gx(t,e){let n=Pr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function mx(t,e){let n=Pr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Vt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!yf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fl(n)}setAll(e){let n=rt.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=Fl(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());yf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];yf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ho(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(Fl(this.value))}};function EM(t){let e=[];return Ho(t.fields,(n,i)=>{let r=new rt([n]);if(yf(i)){let o=EM(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new hn(e)}var dt=class t{constructor(e,n,i,r,o,s,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),Vt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ui=class{constructor(e,n){this.position=e,this.inclusive=n}};function _x(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?i=$.comparator($.fromName(s.referenceValue),n.key):i=Pr(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function yx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!li(t.position[n],e.position[n]))return!1;return!0}var No=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function S$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Mf=class{},be=class t extends Mf{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new rv(e,n,i):n==="array-contains"?new av(e,i):n==="in"?new Af(e,i):n==="not-in"?new cv(e,i):n==="array-contains-any"?new lv(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new ov(e,i):new sv(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Pr(n,this.value)):n!==null&&Po(this.value)===Po(n)&&this.matchesComparison(Pr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ne=class t extends Mf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Ea(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ea(t){return t.op==="and"}function nv(t){return t.op==="or"}function Gw(t){return DM(t)&&Ea(t)}function DM(t){for(let e of t.filters)if(e instanceof Ne)return!1;return!0}function iv(t){if(t instanceof be)return t.field.canonicalString()+t.op.toString()+ba(t.value);if(Gw(t))return t.filters.map(e=>iv(e)).join(",");{let e=t.filters.map(n=>iv(n)).join(",");return`${t.op}(${e})`}}function CM(t,e){return t instanceof be?function(i,r){return r instanceof be&&i.op===r.op&&i.field.isEqual(r.field)&&li(i.value,r.value)}(t,e):t instanceof Ne?function(i,r){return r instanceof Ne&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&CM(s,r.filters[a]),!0):!1}(t,e):void K()}function IM(t,e){let n=t.filters.concat(e);return Ne.create(n,t.op)}function TM(t){return t instanceof be?function(n){return`${n.field.canonicalString()} ${n.op} ${ba(n.value)}`}(t):t instanceof Ne?function(n){return n.op.toString()+" {"+n.getFilters().map(TM).join(" ,")+"}"}(t):"Filter"}var rv=class extends be{constructor(e,n,i){super(e,n,i),this.key=$.fromName(i.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},ov=class extends be{constructor(e,n){super(e,"in",n),this.keys=SM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},sv=class extends be{constructor(e,n){super(e,"not-in",n),this.keys=SM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function SM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>$.fromName(i.referenceValue))}var av=class extends be{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ql(n)&&zl(n.arrayValue,this.value)}},Af=class extends be{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}},cv=class extends be{constructor(e,n){super(e,"not-in",n)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!zl(this.value.arrayValue,n)}},lv=class extends be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ql(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>zl(this.value.arrayValue,i))}};var uv=class{constructor(e,n=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function dv(t,e=null,n=[],i=[],r=null,o=null,s=null){return new uv(t,e,n,i,r,o,s)}function ko(t){let e=H(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>iv(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),lu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ba(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ba(i)).join(",")),e.ue=n}return e.ue}function uu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!S$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yx(t.startAt,e.startAt)&&yx(t.endAt,e.endAt)}function Rf(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Pf(t,e){return t.filters.filter(n=>n instanceof be&&n.field.isEqual(e))}function vx(t,e,n){let i=_f,r=!0;for(let o of Pf(t,e)){let s=_f,a=!0;switch(o.op){case"<":case"<=":s=I$(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=_f}gx({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];gx({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function wx(t,e,n){let i=Tr,r=!0;for(let o of Pf(t,e)){let s=Tr,a=!0;switch(o.op){case">=":case">":s=T$(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Tr}mx({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];mx({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var Ln=class{constructor(e,n=null,i=[],r=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function xM(t,e,n,i,r,o,s,a){return new Ln(t,e,n,i,r,o,s,a)}function Va(t){return new Ln(t)}function bx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zw(t){return t.collectionGroup!==null}function _a(t){let e=H(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Be(rt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new No(o,i))}),n.has(rt.keyField().canonicalString())||e.ce.push(new No(rt.keyField(),i))}return e.ce}function qt(t){let e=H(t);return e.le||(e.le=x$(e,_a(t))),e.le}function x$(t,e){if(t.limitType==="F")return dv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new No(r.field,o)});let n=t.endAt?new ui(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ui(t.startAt.position,t.startAt.inclusive):null;return dv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function hv(t,e){let n=t.filters.concat([e]);return new Ln(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Of(t,e,n){return new Ln(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function du(t,e){return uu(qt(t),qt(e))&&t.limitType===e.limitType}function MM(t){return`${ko(qt(t))}|lt:${t.limitType}`}function da(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>TM(r)).join(", ")}]`),lu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ba(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ba(r)).join(",")),`Target(${i})`}(qt(t))}; limitType=${t.limitType})`}function hu(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):$.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of _a(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,a,c){let u=_x(s,a,c);return s.inclusive?u<=0:u<0}(i.startAt,_a(i),r)||i.endAt&&!function(s,a,c){let u=_x(s,a,c);return s.inclusive?u>=0:u>0}(i.endAt,_a(i),r))}(t,e)}function AM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RM(t){return(e,n)=>{let i=!1;for(let r of _a(t)){let o=M$(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function M$(t,e,n){let i=t.field.isKeyField()?$.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Pr(c,u):K()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return K()}}var di=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ho(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return vM(this.inner)}size(){return this.innerSize}};var A$=new He($.comparator);function tn(){return A$}var PM=new He($.comparator);function Nl(...t){let e=PM;for(let n of t)e=e.insert(n.key,n);return e}function OM(t){let e=PM;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function oi(){return Vl()}function NM(){return Vl()}function Vl(){return new di(t=>t.toString(),(t,e)=>t.isEqual(e))}var R$=new He($.comparator),P$=new Be($.comparator);function pe(...t){let e=P$;for(let n of t)e=e.add(n);return e}var O$=new Be(he);function qw(){return O$}function kM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$l(e)?"-0":e}}function FM(t){return{integerValue:""+t}}function VM(t,e){return fM(e)?FM(e):kM(t,e)}var Da=class{constructor(){this._=void 0}};function N$(t,e,n){return t instanceof Or?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&yp(o)&&(o=Hw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Gi?BM(t,e):t instanceof zi?jM(t,e):function(r,o){let s=LM(r,o),a=Ex(s)+Ex(r.Pe);return tv(s)&&tv(r.Pe)?FM(a):kM(r.serializer,a)}(t,e)}function k$(t,e,n){return t instanceof Gi?BM(t,e):t instanceof zi?jM(t,e):n}function LM(t,e){return t instanceof Nr?function(i){return tv(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Or=class extends Da{},Gi=class extends Da{constructor(e){super(),this.elements=e}};function BM(t,e){let n=UM(e);for(let i of t.elements)n.some(r=>li(r,i))||n.push(i);return{arrayValue:{values:n}}}var zi=class extends Da{constructor(e){super(),this.elements=e}};function jM(t,e){let n=UM(e);for(let i of t.elements)n=n.filter(r=>!li(r,i));return{arrayValue:{values:n}}}var Nr=class extends Da{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function Ex(t){return et(t.integerValue||t.doubleValue)}function UM(t){return ql(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Fo=class{constructor(e,n){this.field=e,this.transform=n}};function F$(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Gi&&r instanceof Gi||i instanceof zi&&r instanceof zi?va(i.elements,r.elements,li):i instanceof Nr&&r instanceof Nr?li(i.Pe,r.Pe):i instanceof Or&&r instanceof Or}(t.transform,e.transform)}var fv=class{constructor(e,n){this.version=e,this.transformResults=n}},tt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function vf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ca=class{};function $M(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fr(t.key,tt.none()):new kr(t.key,t.data,tt.none());{let n=t.data,i=Vt.empty(),r=new Be(rt.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Bn(t.key,i,new hn(r.toArray()),tt.none())}}function V$(t,e,n){t instanceof kr?function(r,o,s){let a=r.value.clone(),c=Cx(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Bn?function(r,o,s){if(!vf(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Cx(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(HM(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ll(t,e,n,i){return t instanceof kr?function(o,s,a,c){if(!vf(o.precondition,s))return a;let u=o.value.clone(),d=Ix(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof Bn?function(o,s,a,c){if(!vf(o.precondition,s))return a;let u=Ix(o.fieldTransforms,c,s),d=s.data;return d.setAll(HM(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,i):function(o,s,a){return vf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function L$(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=LM(i.transform,r||null);o!=null&&(n===null&&(n=Vt.empty()),n.set(i.field,o))}return n||null}function Dx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&va(i,r,(o,s)=>F$(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var kr=class extends Ca{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Bn=class extends Ca{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function HM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function Cx(t,e,n){let i=new Map;X(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,k$(s,a,n[r]))}return i}function Ix(t,e,n){let i=new Map;for(let r of t){let o=r.transform,s=n.data.field(r.field);i.set(r.field,N$(o,s,e))}return i}var Fr=class extends Ca{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Wl=class extends Ca{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ql=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&V$(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ll(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Ll(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=NM();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let c=$M(s,a);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,(n,i)=>Dx(n,i))&&va(this.baseMutations,e.baseMutations,(n,i)=>Dx(n,i))}},pv=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){X(e.mutations.length===i.length);let r=function(){return R$}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new t(e,n,i,r)}};var Kl=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var at,De;function GM(t){switch(t){default:return K();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function zM(t){if(t===void 0)return it("GRPC error has no .code"),P.UNKNOWN;switch(t){case at.OK:return P.OK;case at.CANCELLED:return P.CANCELLED;case at.UNKNOWN:return P.UNKNOWN;case at.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case at.INTERNAL:return P.INTERNAL;case at.UNAVAILABLE:return P.UNAVAILABLE;case at.UNAUTHENTICATED:return P.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case at.NOT_FOUND:return P.NOT_FOUND;case at.ALREADY_EXISTS:return P.ALREADY_EXISTS;case at.PERMISSION_DENIED:return P.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case at.ABORTED:return P.ABORTED;case at.OUT_OF_RANGE:return P.OUT_OF_RANGE;case at.UNIMPLEMENTED:return P.UNIMPLEMENTED;case at.DATA_LOSS:return P.DATA_LOSS;default:return K()}}(De=at||(at={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";var Tx=null;function qM(){return new TextEncoder}var B$=new br([4294967295,4294967295],0);function Sx(t){let e=qM().encode(t),n=new A0;return n.update(e),new Uint8Array(n.digest())}function xx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new br([n,i],0),new br([r,o],0)]}var mv=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ao(`Invalid padding: ${n}`);if(i<0)throw new Ao(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ao(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ao(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=br.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(br.fromNumber(i)));return r.compare(B$)===1&&(r=new br([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=Sx(e),[i,r]=xx(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=Sx(e),[i,r]=xx(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Ao=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Yl=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Jl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(te.min(),r,new He(he),tn(),pe())}},Jl=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,pe(),pe(),pe())}};var ya=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},Nf=class{constructor(e,n){this.targetId=e,this.me=n}},kf=class{constructor(e,n,i=Et.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},Ff=class{constructor(){this.fe=0,this.ge=Ax(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=pe(),n=pe(),i=pe();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:K()}}),new Jl(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=Ax()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,X(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},_v=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=tn(),this.qe=Mx(),this.Qe=new He(he)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(Rf(o))if(i===0){let s=new $(o.path);this.Ue(n,s,dt.newNoDocument(s,te.min()))}else X(i===1);else{let s=this.Ye(n);if(s!==i){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}Tx?.et(function(d,f,g,_,D){var x,T,V,j,O,U;let ee={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Y=f.unchangedNames;return Y&&(ee.bloomFilter={applied:D===0,hashCount:(x=Y?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(j=(V=(T=Y?.bits)===null||T===void 0?void 0:T.bitmap)===null||V===void 0?void 0:V.length)!==null&&j!==void 0?j:0,padding:(U=(O=Y?.bits)===null||O===void 0?void 0:O.padding)!==null&&U!==void 0?U:0,mightContain:b=>{var y;return(y=_?.mightContain(b))!==null&&y!==void 0&&y}}),ee}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=Ar(i).toUint8Array()}catch(c){if(c instanceof xf)return En("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new mv(s,r,o)}catch(c){return En(c instanceof Ao?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Rf(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,dt.newNoDocument(c,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let i=pe();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new Yl(e,n,this.Qe,this.ke,i);return this.ke=tn(),this.qe=Mx(),this.Qe=new He(he),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ff,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Be(he),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ff),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Mx(){return new He($.comparator)}function Ax(){return new He($.comparator)}var j$={asc:"ASCENDING",desc:"DESCENDING"},U$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$$={and:"AND",or:"OR"},yv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function vv(t,e){return t.useProto3Json||lu(e)?e:{value:e}}function Ia(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H$(t,e){return Ia(t,e.toTimestamp())}function ot(t){return X(!!t),te.fromTimestamp(function(n){let i=Hi(n);return new Ke(i.seconds,i.nanos)}(t))}function Ww(t,e){return wv(t,e).canonicalString()}function wv(t,e){let n=function(r){return new Ce(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function QM(t){let e=Ce.fromString(t);return X(rA(e)),e}function Zl(t,e){return Ww(t.databaseId,e.path)}function ai(t,e){let n=QM(e);if(n.get(1)!==t.databaseId.projectId)throw new k(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(JM(n))}function KM(t,e){return Ww(t.databaseId,e)}function YM(t){let e=QM(t);return e.length===4?Ce.emptyPath():JM(e)}function bv(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JM(t){return X(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Rx(t,e,n){return{name:Zl(t,e),fields:n.value.mapValue.fields}}function ZM(t,e,n){let i=ai(t,e.name),r=ot(e.updateTime),o=e.createTime?ot(e.createTime):te.min(),s=new Vt({mapValue:{fields:e.fields}}),a=dt.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function G$(t,e){return"found"in e?function(i,r){X(!!r.found),r.found.name,r.found.updateTime;let o=ai(i,r.found.name),s=ot(r.found.updateTime),a=r.found.createTime?ot(r.found.createTime):te.min(),c=new Vt({mapValue:{fields:r.found.fields}});return dt.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(i,r){X(!!r.missing),X(!!r.readTime);let o=ai(i,r.missing),s=ot(r.readTime);return dt.newNoDocument(o,s)}(t,e):K()}function z$(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(X(d===void 0||typeof d=="string"),Et.fromBase64String(d||"")):(X(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Et.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?P.UNKNOWN:zM(u.code);return new k(d,u.message||"")}(s);n=new kf(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=ai(t,i.document.name),o=ot(i.document.updateTime),s=i.document.createTime?ot(i.document.createTime):te.min(),a=new Vt({mapValue:{fields:i.document.fields}}),c=dt.newFoundDocument(r,o,s,a),u=i.targetIds||[],d=i.removedTargetIds||[];n=new ya(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=ai(t,i.document),o=i.readTime?ot(i.readTime):te.min(),s=dt.newNoDocument(r,o),a=i.removedTargetIds||[];n=new ya([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=ai(t,i.document),o=i.removedTargetIds||[];n=new ya([],o,r,null)}else{if(!("filter"in e))return K();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new gv(r,o),a=i.targetId;n=new Nf(a,s)}}return n}function Xl(t,e){let n;if(e instanceof kr)n={update:Rx(t,e.key,e.value)};else if(e instanceof Fr)n={delete:Zl(t,e.key)};else if(e instanceof Bn)n={update:Rx(t,e.key,e.data),updateMask:J$(e.fieldMask)};else{if(!(e instanceof Wl))return K();n={verify:Zl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof Or)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw K()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:H$(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(t,e.precondition)),n}function Ev(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?tt.updateTime(ot(o.updateTime)):o.exists!==void 0?tt.exists(o.exists):tt.none()}(e.currentDocument):tt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let c=null;if("setToServerValue"in a)X(a.setToServerValue==="REQUEST_TIME"),c=new Or;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Gi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new zi(d)}else"increment"in a?c=new Nr(s,a.increment):K();let u=rt.fromServerFormat(a.fieldPath);return new Fo(u,c)}(t,r)):[];if(e.update){e.update.name;let r=ai(t,e.update.name),o=new Vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new hn(u.map(d=>rt.fromServerFormat(d)))}(e.updateMask);return new Bn(r,o,s,n,i)}return new kr(r,o,n,i)}if(e.delete){let r=ai(t,e.delete);return new Fr(r,n)}if(e.verify){let r=ai(t,e.verify);return new Wl(r,n)}return K()}function q$(t,e){return t&&t.length>0?(X(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?ot(r.updateTime):ot(o);return s.isEqual(te.min())&&(s=ot(o)),new fv(s,r.transformResults||[])}(n,e))):[]}function XM(t,e){return{documents:[KM(t,e.path)]}}function eA(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=KM(t,r);let o=function(u){if(u.length!==0)return iA(Ne.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:ha(g.field),direction:Q$(g.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=vv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function tA(t){let e=YM(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){X(i===1);let d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){let g=nA(f);return g instanceof Ne&&Gw(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(g=>function(D){return new No(fa(D.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,lu(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,_=f.values||[];return new ui(_,g)}(n.startAt));let u=null;return n.endAt&&(u=function(f){let g=!f.before,_=f.values||[];return new ui(_,g)}(n.endAt)),xM(e,r,s,o,a,"F",c,u)}function W$(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=fa(n.unaryFilter.field);return be.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=fa(n.unaryFilter.field);return be.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=fa(n.unaryFilter.field);return be.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=fa(n.unaryFilter.field);return be.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return be.create(fa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ne.create(n.compositeFilter.filters.map(i=>nA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function Q$(t){return j$[t]}function K$(t){return U$[t]}function Y$(t){return $$[t]}function ha(t){return{fieldPath:t.canonicalString()}}function fa(t){return rt.fromServerFormat(t.fieldPath)}function iA(t){return t instanceof be?function(n){if(n.op==="=="){if(px(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NAN"}};if(fx(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(px(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NAN"}};if(fx(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(n.field),op:K$(n.op),value:n.value}}}(t):t instanceof Ne?function(n){let i=n.getFilters().map(r=>iA(r));return i.length===1?i[0]:{compositeFilter:{op:Y$(n.op),filters:i}}}(t):K()}function J$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ta=class t{constructor(e,n,i,r,o=te.min(),s=te.min(),a=Et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Vf=class{constructor(e){this.ct=e}};function Z$(t,e){let n;if(e.document)n=ZM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=$.fromSegments(e.noDocument.path),r=Lo(e.noDocument.readTime);n=dt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let i=$.fromSegments(e.unknownDocument.path),r=Lo(e.unknownDocument.version);n=dt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new Ke(r[0],r[1]);return te.fromTimestamp(o)}(e.readTime)),n}function Px(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,s){return{name:Zl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ia(o,s.version.toTimestamp()),createTime:Ia(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Vo(e.version)};else{if(!e.isUnknownDocument())return K();i.unknownDocument={path:n.path.toArray(),version:Vo(e.version)}}return i}function Lf(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lo(t){let e=new Ke(t.seconds,t.nanoseconds);return te.fromTimestamp(e)}function So(t,e){let n=(e.baseMutations||[]).map(o=>Ev(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>Ev(t.ct,o)),r=Ke.fromMillis(e.localWriteTimeMs);return new Ql(e.batchId,r,n,i)}function kl(t){let e=Lo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Lo(t.lastLimboFreeSnapshotVersion):te.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return X(o.documents.length===1),qt(Va(YM(o.documents[0])))}(t.query):function(o){return qt(tA(o))}(t.query),new Ta(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Et.fromBase64String(t.resumeToken))}function oA(t,e){let n=Vo(e.snapshotVersion),i=Vo(e.lastLimboFreeSnapshotVersion),r;r=Rf(e.target)?XM(t.ct,e.target):eA(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ko(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Qw(t){let e=tA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Of(e,e.limit,"L"):e}function V0(t,e){return new Kl(e.largestBatchId,Ev(t.ct,e.overlayMutation))}function Ox(t,e){let n=e.path.lastSegment();return[t,zt(e.path.popLast()),n]}function Nx(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Vo(i.readTime),documentKey:zt(i.documentKey.path),largestBatchId:i.largestBatchId}}var Dv=class{getBundleMetadata(e,n){return kx(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:Lo(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return kx(e).put(function(r){return{bundleId:r.id,createTime:Vo(ot(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return Fx(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:Qw(o.bundledQuery),readTime:Lo(o.readTime)}}(i)})}saveNamedQuery(e,n){return Fx(e).put(function(r){return{name:r.name,readTime:Vo(ot(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function kx(t){return Dt(t,"bundles")}function Fx(t){return Dt(t,"namedQueries")}var Bf=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return Al(e).get(Ox(this.userId,n)).next(i=>i?V0(this.serializer,i):null)}getOverlays(e,n){let i=oi();return M.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,s)=>{let a=new Kl(n,s);r.push(this.ht(e,a))}),M.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(s=>r.add(zt(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Al(e).j("collectionPathOverlayIndex",a))}),M.waitFor(o)}getOverlaysForCollection(e,n,i){let r=oi(),o=zt(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Al(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=V0(this.serializer,c);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=oi(),s,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Al(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,d)=>{let f=V0(this.serializer,u);o.size()<r||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,n){return Al(e).put(function(r,o,s){let[a,c,u]=Ox(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Xl(r.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Al(t){return Dt(t,"documentOverlays")}var Ui=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(et(e.integerValue));else if("doubleValue"in e){let i=et(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),$l(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=Hi(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ar(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?bM(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):K()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),$.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Ui.bt=new Ui;function X$(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Vx(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let s=X$(255&i[o]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}var Cv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){let n=this.Bt(e),i=Vx(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Bt(e),i=Vx(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},Iv=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},Tv=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},xo=class{constructor(){this.Gt=new Cv,this.zt=new Iv(this.Gt),this.jt=new Tv(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Mo=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function Er(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Lx(t.arrayValue,e.arrayValue),n!==0?n:(n=Lx(t.directionalValue,e.directionalValue),n!==0?n:$.comparator(t.documentKey,e.documentKey)))}function Lx(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var jf=class{constructor(e){this.Yt=new Be((n,i)=>rt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(X(e.collectionGroup===this.collectionId),this.en)return!1;let n=Q0(e);if(n!==void 0&&!this.nn(n))return!1;let i=Io(e),r=new Set,o=0,s=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Be(rt.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new ma(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new ma(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new ma(i.field,i.dir==="asc"?0:1)));return new wa(wa.UNKNOWN_ID,this.collectionId,n,Ul.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function sA(t){var e,n;if(X(t instanceof be||t instanceof Ne),t instanceof be){if(t instanceof Af){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>be.create(t.field,"==",o)))||[];return Ne.create(r,"or")}return t}let i=t.filters.map(r=>sA(r));return Ne.create(i,t.op)}function e3(t){if(t.getFilters().length===0)return[];let e=Mv(sA(t));return X(aA(e)),Sv(e)||xv(e)?[e]:e.getFilters()}function Sv(t){return t instanceof be}function xv(t){return t instanceof Ne&&Gw(t)}function aA(t){return Sv(t)||xv(t)||function(n){if(n instanceof Ne&&nv(n)){for(let i of n.getFilters())if(!Sv(i)&&!xv(i))return!1;return!0}return!1}(t)}function Mv(t){if(X(t instanceof be||t instanceof Ne),t instanceof be)return t;if(t.filters.length===1)return Mv(t.filters[0]);let e=t.filters.map(i=>Mv(i)),n=Ne.create(e,t.op);return n=Uf(n),aA(n)?n:(X(n instanceof Ne),X(Ea(n)),X(n.filters.length>1),n.filters.reduce((i,r)=>Kw(i,r)))}function Kw(t,e){let n;return X(t instanceof be||t instanceof Ne),X(e instanceof be||e instanceof Ne),n=t instanceof be?e instanceof be?function(r,o){return Ne.create([r,o],"and")}(t,e):Bx(t,e):e instanceof be?Bx(e,t):function(r,o){if(X(r.filters.length>0&&o.filters.length>0),Ea(r)&&Ea(o))return IM(r,o.getFilters());let s=nv(r)?r:o,a=nv(r)?o:r,c=s.filters.map(u=>Kw(u,a));return Ne.create(c,"or")}(t,e),Uf(n)}function Bx(t,e){if(Ea(e))return IM(e,t.getFilters());{let n=e.filters.map(i=>Kw(t,i));return Ne.create(n,"or")}}function Uf(t){if(X(t instanceof be||t instanceof Ne),t instanceof be)return t;let e=t.getFilters();if(e.length===1)return Uf(e[0]);if(DM(t))return t;let n=e.map(r=>Uf(r)),i=[];return n.forEach(r=>{r instanceof be?i.push(r):r instanceof Ne&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ne.create(i,t.op)}var Av=class{constructor(){this._n=new eu}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Dn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Dn.min())}updateCollectionGroup(e,n,i){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},eu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Be(Ce.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Be(Ce.comparator)).toArray()}};var hf=new Uint8Array(0),Rv=class{constructor(e,n){this.databaseId=n,this.an=new eu,this.un=new di(i=>ko(i),(i,r)=>uu(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:i,parent:zt(r)};return jx(e).put(o)}return M.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[cM(n),""],!1,!0);return jx(e).U(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(ri(s.parent))}return i})}addFieldIndex(e,n){let i=Rl(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=ca(e);return o.next(a=>{s.put(Nx(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=Rl(e),r=ca(e),o=aa(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Rl(e),i=aa(e),r=ca(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return M.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new jf(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=aa(e),r=!0,o=new Map;return M.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=pe(),a=[];return M.forEach(o,(c,u)=>{F("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(c)} to execute ${ko(n)}`);let d=function(O,U){let ee=Q0(U);if(ee===void 0)return null;for(let Y of Pf(O,ee.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(u,c),f=function(O,U){let ee=new Map;for(let Y of Io(U))for(let b of Pf(O,Y.fieldPath))switch(b.op){case"==":case"in":ee.set(Y.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return ee.set(Y.fieldPath.canonicalString(),b.value),Array.from(ee.values())}return null}(u,c),g=function(O,U){let ee=[],Y=!0;for(let b of Io(U)){let y=b.kind===0?vx(O,b.fieldPath,O.startAt):wx(O,b.fieldPath,O.startAt);ee.push(y.value),Y&&(Y=y.inclusive)}return new ui(ee,Y)}(u,c),_=function(O,U){let ee=[],Y=!0;for(let b of Io(U)){let y=b.kind===0?wx(O,b.fieldPath,O.endAt):vx(O,b.fieldPath,O.endAt);ee.push(y.value),Y&&(Y=y.inclusive)}return new ui(ee,Y)}(u,c),D=this.hn(c,u,g),x=this.hn(c,u,_),T=this.Pn(c,u,f),V=this.In(c.indexId,d,D,g.inclusive,x,_.inclusive,T);return M.forEach(V,j=>i.G(j,n.limit).next(O=>{O.forEach(U=>{let ee=$.fromSegments(U.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return M.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=e3(Ne.create(e.filters,"and")).map(i=>dv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,s,a){let c=(n!=null?n.length:1)*Math.max(i.length,o.length),u=c/(n!=null?n.length:1),d=[];for(let f=0;f<c;++f){let g=n?this.Tn(n[f/u]):hf,_=this.En(e,g,i[f%u],r),D=this.dn(e,g,o[f%u],s),x=a.map(T=>this.En(e,g,T,!0));d.push(...this.createRange(_,D,x))}return d}En(e,n,i,r){let o=new Mo(e,$.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){let o=new Mo(e,$.empty(),n,i);return r?o.Jt():o}ln(e,n){let i=new jf(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let a of o)i.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let i=2,r=this.cn(n);return M.forEach(r,o=>this.ln(e,o).next(s=>{s?i!==0&&s.fields.length<function(c){let u=new Be(rt.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:u=u.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new xo;for(let r of Io(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.Ht(r.kind);Ui.bt.Pt(o,s)}return i.Wt()}Tn(e){let n=new xo;return Ui.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new xo;return Ui.bt.Pt(Oo(this.databaseId,n),i.Ht(function(o){let s=Io(o);return s.length===0?0:s[s.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new xo);let o=0;for(let s of Io(e)){let a=i[o++];for(let c of r)if(this.Vn(n,s.fieldPath)&&ql(a))r=this.mn(r,s,a);else{let u=c.Ht(s.kind);Ui.bt.Pt(a,u)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let c=new xo;c.seed(a.Wt()),Ui.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof be&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=Rl(e),r=ca(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let s=[];return M.forEach(o,a=>r.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let g=f?new Ul(f.sequenceNumber,new Dn(Lo(f.readTime),new $(ri(f.documentKey)),f.largestBatchId)):Ul.empty(),_=d.fields.map(([D,x])=>new ma(rt.fromServerFormat(D),x));return new wa(d.indexId,d.collectionGroup,_,g)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:he(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=Rl(e),o=ca(e);return this.gn(e).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,c=>o.put(Nx(c.indexId,this.uid,s,i)))))}updateIndexEntries(e,n){let i=new Map;return M.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),M.forEach(a,c=>this.pn(e,r,c).next(u=>{let d=this.yn(o,c);return u.isEqual(d)?M.resolve():this.wn(e,o,c,u,d)}))))})}Sn(e,n,i,r){return aa(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return aa(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=aa(e),o=new Be(Er);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(s,a)=>{o=o.add(new Mo(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let i=new Be(Er),r=this.An(n,e);if(r==null)return i;let o=Q0(n);if(o!=null){let s=e.data.field(o.fieldPath);if(ql(s))for(let a of s.arrayValue.values||[])i=i.add(new Mo(n.indexId,e.key,this.Tn(a),r))}else i=i.add(new Mo(n.indexId,e.key,hf,r));return i}wn(e,n,i,r,o){F("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,d,f,g){let _=c.getIterator(),D=u.getIterator(),x=sa(_),T=sa(D);for(;x||T;){let V=!1,j=!1;if(x&&T){let O=d(x,T);O<0?j=!0:O>0&&(V=!0)}else x!=null?j=!0:V=!0;V?(f(T),T=sa(D)):j?(g(x),x=sa(_)):(x=sa(_),T=sa(D))}}(r,o,Er,a=>{s.push(this.Sn(e,n,i,a))},a=>{s.push(this.bn(e,n,i,a))}),M.waitFor(s)}gn(e){let n=1;return ca(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((s,a)=>Er(s,a)).filter((s,a,c)=>!a||Er(s,c[a-1])!==0);let r=[];r.push(e);for(let s of i){let a=Er(s,e),c=Er(s,n);if(a===0)r[0]=e.Jt();else if(a>0&&c<0)r.push(s),r.push(s.Jt());else if(c>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,hf,[]],c=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,hf,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return Er(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ux)}getMinOffset(e,n){return M.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||K())).next(Ux)}};function jx(t){return Dt(t,"collectionParents")}function aa(t){return Dt(t,"indexEntries")}function Rl(t){return Dt(t,"indexConfiguration")}function ca(t){return Dt(t,"indexState")}function Ux(t){X(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;Uw(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Dn(e.readTime,e.documentKey,n)}var $x={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bn=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function cA(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=i.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(c.next(()=>{X(a===1)}));let u=[];for(let d of n.mutations){let f=pM(e,d.key.path,n.batchId);o.push(r.delete(f)),u.push(d.key)}return M.waitFor(o).next(()=>u)}function $f(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw K();e=t.noDocument}return JSON.stringify(e).length}bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(41943040,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);var Hf=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){X(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dr(e).J({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=pa(e),s=Dr(e);return s.add({}).next(a=>{X(typeof a=="number");let c=new Ql(a,n,i,r),u=function(_,D,x){let T=x.baseMutations.map(j=>Xl(_.ct,j)),V=x.mutations.map(j=>Xl(_.ct,j));return{userId:D,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:T,mutations:V}}(this.serializer,this.userId,c),d=[],f=new Be((g,_)=>he(g.canonicalString(),_.canonicalString()));for(let g of r){let _=pM(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(u)),d.push(o.put(_,a$))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),M.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return Dr(e).get(n).next(i=>i?(X(i.userId===this.userId),So(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?M.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Dr(e).J({index:"userMutationsIndex",range:r},(s,a,c)=>{a.userId===this.userId&&(X(a.batchId>=i),o=So(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Dr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dr(e).U("userMutationsIndex",n).next(i=>i.map(r=>So(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=mf(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return pa(e).J({range:r},(s,a,c)=>{let[u,d,f]=s,g=ri(d);if(u===this.userId&&n.path.isEqual(g))return Dr(e).get(f).next(_=>{if(!_)throw K();X(_.userId===this.userId),o.push(So(this.serializer,_))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Be(he),r=[];return n.forEach(o=>{let s=mf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=pa(e).J({range:a},(u,d,f)=>{let[g,_,D]=u,x=ri(_);g===this.userId&&o.path.isEqual(x)?i=i.add(D):f.done()});r.push(c)}),M.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=mf(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new Be(he);return pa(e).J({range:s},(c,u,d)=>{let[f,g,_]=c,D=ri(g);f===this.userId&&i.isPrefixOf(D)?D.length===r&&(a=a.add(_)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(Dr(e).get(o).next(s=>{if(s===null)throw K();X(s.userId===this.userId),i.push(So(this.serializer,s))}))}),M.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return cA(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),M.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return pa(e).J({range:i},(o,s,a)=>{if(o[0]===this.userId){let c=ri(o[1]);r.push(c)}else a.done()}).next(()=>{X(r.length===0)})})}containsKey(e,n){return lA(e,this.userId,n)}xn(e){return uA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function lA(t,e,n){let i=mf(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return pa(t).J({range:o,H:!0},(a,c,u)=>{let[d,f,g]=a;d===e&&f===r&&(s=!0),u.done()}).next(()=>s)}function Dr(t){return Dt(t,"mutations")}function pa(t){return Dt(t,"documentMutations")}function uA(t){return Dt(t,"mutationQueues")}var Sa=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Pv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new Sa(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>te.fromTimestamp(new Ke(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>la(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(X(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return la(e).J((s,a)=>{let c=kl(a);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(e,c)))}).next(()=>M.waitFor(o)).next(()=>r)}forEachTarget(e,n){return la(e).J((i,r)=>{let o=kl(r);n(o)})}Bn(e){return Hx(e).get("targetGlobalKey").next(n=>(X(n!==null),n))}kn(e,n){return Hx(e).put("targetGlobalKey",n)}qn(e,n){return la(e).put(oA(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=ko(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return la(e).J({range:r,index:"queryTargetsIndex"},(s,a,c)=>{let u=kl(a);uu(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=Cr(e);return n.forEach(s=>{let a=zt(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),M.waitFor(r)}removeMatchingKeys(e,n,i){let r=Cr(e);return M.forEach(n,o=>{let s=zt(o.path);return M.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=Cr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Cr(e),o=pe();return r.J({range:i,H:!0},(s,a,c)=>{let u=ri(s[1]),d=new $(u);o=o.add(d)}).next(()=>o)}containsKey(e,n){let i=zt(n.path),r=IDBKeyRange.bound([i],[cM(i)],!1,!0),o=0;return Cr(e).J({index:"documentTargetsIndex",H:!0,range:r},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return la(e).get(n).next(i=>i?kl(i):null)}};function la(t){return Dt(t,"targets")}function Hx(t){return Dt(t,"targetGlobal")}function Cr(t){return Dt(t,"targetDocuments")}function Gx([t,e],[n,i]){let r=he(t,n);return r===0?he(e,i):r}var Ov=class{constructor(e){this.Kn=e,this.buffer=new Be(Gx),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();Gx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},Nv=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>A(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Br(n)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Lr(n)}yield this.zn(3e5)}))}},kv=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return M.resolve(dn.oe);let i=new Ov(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve($x)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$x):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,s=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(e,i,n))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(u=Date.now(),ua()<=Hn.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:f})))}};function t3(t,e){return new kv(t,e)}var Fv=class{constructor(e,n){this.db=e,this.garbageCollector=t3(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return ff(e,i)}removeReference(e,n,i){return ff(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return ff(e,n)}er(e,n){return function(r,o){let s=!1;return uA(r).Y(a=>lA(r,a,o).next(c=>(c&&(s=!0),M.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(u=>{if(!u)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,te.min()),Cr(e).delete(function(f){return[0,zt(f.path)]}(s))))});r.push(c)}}).next(()=>M.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return ff(e,n)}Xn(e,n){let i=Cr(e),r,o=dn.oe;return i.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==dn.oe&&n(new $(ri(r)),o),o=u,r=c):o=dn.oe}).next(()=>{o!==dn.oe&&n(new $(ri(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function ff(t,e){return Cr(t).put(function(i,r){return{targetId:0,path:zt(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var Gf=class{constructor(){this.changes=new di(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?M.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Vv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Co(e).put(i)}removeEntry(e,n,i){return Co(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Lf(s),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=dt.newInvalidDocument(n);return Co(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pl(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:dt.newInvalidDocument(n)};return Co(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pl(n))},(r,o)=>{i={document:this.nr(n,o),size:$f(o)}}).next(()=>i)}getEntries(e,n){let i=tn();return this.ir(e,n,(r,o)=>{let s=this.nr(r,o);i=i.insert(r,s)}).next(()=>i)}sr(e,n){let i=tn(),r=new He($.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);i=i.insert(o,a),r=r.insert(o,$f(s))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return M.resolve();let r=new Be(Wx);n.forEach(c=>r=r.add(c));let o=IDBKeyRange.bound(Pl(r.first()),Pl(r.last())),s=r.getIterator(),a=s.getNext();return Co(e).J({index:"documentKeyIndex",range:o},(c,u,d)=>{let f=$.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&Wx(a,f)<0;)i(a,null),a=s.getNext();a&&a.isEqual(f)&&(i(a,u),a=s.hasNext()?s.getNext():null),a?d.$(Pl(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Lf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Co(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let d=tn();for(let f of u){let g=this.nr($.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(hu(n,g)||r.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,n,i,r){let o=tn(),s=qx(n,i),a=qx(n,Dn.max());return Co(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,d)=>{let f=this.nr($.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(f.key,f),o.size===r&&d.done()}).next(()=>o)}newChangeBuffer(e){return new Lv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return zx(e).get("remoteDocumentGlobalKey").next(n=>(X(!!n),n))}tr(e,n){return zx(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=Z$(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(te.min())))return i}return dt.newInvalidDocument(e)}};function dA(t){return new Vv(t)}var Lv=class extends Gf{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new di(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new Be((o,s)=>he(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=Px(this.ar.serializer,s);r=r.add(o.path.popLast());let u=$f(c);i+=u-a.size,n.push(this.ar.addEntry(e,o,c))}else if(i-=a.size,this.trackRemovals){let c=Px(this.ar.serializer,s.convertToNoDocument(te.min()));n.push(this.ar.addEntry(e,o,c))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),M.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function zx(t){return Dt(t,"remoteDocumentGlobal")}function Co(t){return Dt(t,"remoteDocumentsV14")}function Pl(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qx(t,e){let n=e.documentKey.path.toArray();return[t,Lf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Wx(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=he(n[o],i[o]),r)return r;return r=he(n.length,i.length),r||(r=he(n[n.length-2],i[i.length-2]),r||he(n[n.length-1],i[i.length-1]))}var Bv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var zf=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ll(i.mutation,r,hn.empty(),Ke.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,pe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=pe()){let r=oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=Nl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let i=oi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,pe()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,i,r){let o=tn(),s=Vl(),a=function(){return Vl()}();return n.forEach((c,u)=>{let d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Bn)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),Ll(d.mutation,u,d.mutation.getFieldMask(),Ke.now())):s.set(u.key,hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new Bv(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Vl(),r=new He((s,a)=>s-a),o=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let d=i.get(c)||hn.empty();d=a.applyToLocalView(u,d),i.set(c,d);let f=(r.get(a.batchId)||pe()).add(c);r=r.insert(a.batchId,f)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=NM();d.forEach(g=>{if(!o.has(g)){let _=$M(n.get(g),i.get(g));_!==null&&f.set(g,_),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return M.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):M.resolve(oi()),a=-1,c=o;return s.next(u=>M.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,pe())).next(d=>({batchId:a,changes:OM(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(i=>{let r=Nl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,s=Nl();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,c=>{let u=function(f,g){return new Ln(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,dt.newInvalidDocument(d)))});let a=Nl();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&Ll(d.mutation,u,hn.empty(),Ke.now()),hu(n,u)&&(a=a.insert(c,u))}),a})}};var jv=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ot(r.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:Qw(r.bundledQuery),readTime:ot(r.readTime)}}(n)),M.resolve()}};var Uv=class{constructor(){this.overlays=new He($.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let i=oi();return M.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),M.resolve()}getOverlaysForCollection(e,n,i){let r=oi(),o=n.length+1,s=new $(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return M.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new He((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let d=o.get(u.largestBatchId);d===null&&(d=oi(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=oi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=r)););return M.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new Kl(n,i));let o=this.hr.get(n);o===void 0&&(o=pe(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}};var tu=class{constructor(){this.Pr=new Be(ct.Ir),this.Tr=new Be(ct.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new ct(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new ct(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new $(new Ce([])),i=new ct(n,e),r=new ct(n,e+1),o=[];return this.Tr.forEachInRange([i,r],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new $(new Ce([])),i=new ct(n,e),r=new ct(n,e+1),o=pe();return this.Tr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new ct(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},ct=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return $.comparator(e.key,n.key)||he(e.pr,n.pr)}static Er(e,n){return he(e.pr,n.pr)||$.comparator(e.key,n.key)}};var $v=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Be(ct.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ql(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.wr=this.wr.add(new ct(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),o=r<0?0:r;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new ct(n,0),r=new ct(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],s=>{let a=this.Sr(s.pr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Be(he);return n.forEach(r=>{let o=new ct(r,0),s=new ct(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{i=i.add(a.pr)})}),M.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;$.isDocumentKey(o)||(o=o.child(""));let s=new ct(new $(o),0),a=new Be(he);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(c.pr)),!0)},s),M.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){X(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return M.forEach(n.mutations,r=>{let o=new ct(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new ct(n,0),r=this.wr.firstAfterOrEqual(i);return M.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Hv=class{constructor(e){this.vr=e,this.docs=function(){return new He($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return M.resolve(i?i.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let i=tn();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():dt.newInvalidDocument(r))}),M.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=tn(),s=n.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Uw(uM(d),i)<=0||(r.has(d.key)||hu(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,i,r){K()}Fr(e,n){return M.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Gv(this)}getSize(e){return M.resolve(this.size)}},Gv=class extends Gf{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var zv=class{constructor(e){this.persistence=e,this.Mr=new di(n=>ko(n),uu),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Or=0,this.Nr=new tu,this.targetCount=0,this.Lr=Sa.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Sa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),M.waitFor(o).next(()=>r)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return M.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),M.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return M.resolve(i)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}};var qf=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new dn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new zv(this),this.indexManager=new Av,this.remoteDocumentCache=function(r){return new Hv(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Vf(n),this.$r=new jv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Uv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new $v(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){F("MemoryPersistence","Starting transaction:",e);let r=new qv(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return M.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},qv=class extends If{constructor(e){super(),this.currentSequenceNumber=e}},Wf=class t{constructor(e){this.persistence=e,this.zr=new tu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw K()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),M.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,i=>{let r=$.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,te.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Wv=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new Tf("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ux,{unique:!0}),c.createObjectStore("documentMutations")}(e),Qx(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=M.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Qx(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ux,{unique:!0});let f=u.store("mutations"),g=d.map(_=>f.put(_));return M.waitFor(g)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(s=s.next(()=>this.Xr(o))),i<6&&r>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(s=s.next(()=>this.ti(o))),i<8&&r>=8&&(s=s.next(()=>this.ni(e,o))),i<9&&r>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(s=s.next(()=>this.ri(o))),i<11&&r>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:v$});u.createIndex("collectionPathOverlayIndex",w$,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",b$,{unique:!1})})(e)})),i<13&&r>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:c$});u.createIndex("documentKeyIndex",l$),u.createIndex("collectionGroupIndex",u$)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.si(e,o))),i<15&&r>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:g$}).createIndex("sequenceNumberIndex",m$,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:_$}).createIndex("documentKeyIndex",y$,{unique:!1})}(e))),i<16&&r>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=$f(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>M.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(a=>M.forEach(a,c=>{X(c.userId===o.userId);let u=So(this.serializer,c);return cA(e,o.userId,u).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,a)=>{let c=new Ce(s),u=function(f){return[0,zt(f)]}(c);o.push(n.get(u).next(d=>d?M.resolve():(f=>n.put({targetId:0,path:zt(f),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>M.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:p$});let i=n.store("collectionParents"),r=new eu,o=s=>{if(r.add(s)){let a=s.lastSegment(),c=s.popLast();return i.put({collectionId:a,parent:zt(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Ce(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],u)=>{let d=ri(a);return o(d.popLast())}))}ri(e){let n=e.store("targets");return n.J((i,r)=>{let o=kl(r),s=oA(this.serializer,o);return n.put(s)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(f){return f.document?new $(Ce.fromString(f.document.name).popFirst(5)):f.noDocument?$.fromSegments(f.noDocument.path):f.unknownDocument?$.fromSegments(f.unknownDocument.path):K()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(u))}).next(()=>M.waitFor(r))}si(e,n){let i=n.store("mutations"),r=dA(this.serializer),o=new qf(Wf.Hr,this.serializer.ct);return i.U().next(s=>{let a=new Map;return s.forEach(c=>{var u;let d=(u=a.get(c.userId))!==null&&u!==void 0?u:pe();So(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),M.forEach(a,(c,u)=>{let d=new lt(u),f=Bf.lt(this.serializer,d),g=o.getIndexManager(d),_=Hf.lt(d,this.serializer,g,o.referenceDelegate);return new zf(r,_,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Hl(n,dn.oe),c).next()})})}};function Qx(t){t.createObjectStore("targetDocuments",{keyPath:h$}).createIndex("documentTargetsIndex",f$,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",d$,{unique:!0}),t.createObjectStore("targetGlobal")}var L0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qv=class t{constructor(e,n,i,r,o,s,a,c,u,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=s,this.document=a,this._i=u,this.ai=d,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=g=>Promise.resolve(),!t.D())throw new k(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fv(this,r),this.Ti=n+"main",this.serializer=new Vf(c),this.Ei=new Mr(this.Ti,this.ui,new Wv(this.serializer)),this.Qr=new Pv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dA(this.serializer),this.$r=new Dv,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&it("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(P.FAILED_PRECONDITION,L0);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new dn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>A(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>A(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>A(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Br(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Ol(e).get("owner").next(n=>M.resolve(this.Si(n)))}bi(e){return pf(e).delete(this.clientId)}Di(){return A(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=Dt(n,"clientMetadata");return i.U().next(r=>{let o=this.vi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?M.resolve(!0):Ol(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new k(P.FAILED_PRECONDITION,L0);return!1}}return!(!this.networkEnabled||!this.inForeground)||pf(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&F("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return A(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Hl(e,dn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>pf(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Hf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Bf.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){F("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?D$:c===15?yM:c===14?_M:c===13?mM:c===12?E$:c===11?gM:void K()}(this.ui),s;return this.Ei.runTransaction(e,r,o,a=>(s=new Hl(a,this.kr?this.kr.next():dn.oe),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw it(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new k(P.FAILED_PRECONDITION,dM);return i(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Ol(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new k(P.FAILED_PRECONDITION,L0)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ol(e).put("owner",n)}static D(){return Mr.D()}yi(e){let n=Ol(e);return n.get("owner").next(i=>this.Si(i)?(F("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(it(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Pg()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return it("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){it("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ol(t){return Dt(t,"owner")}function pf(t){return Dt(t,"clientMetadata")}function Yw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Kv=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=pe(),r=pe();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var Yv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Qf=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Pg()?8:hM(Tc())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Yv;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(ua()<=Hn.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",da(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(ua()<=Hn.DEBUG&&F("QueryEngine","Query:",da(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(ua()<=Hn.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",da(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qt(n))):M.resolve())}ji(e,n){if(bx(n))return M.resolve(null);let i=qt(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Of(n,null,"F"),i=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=pe(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,s,c.readTime)?this.ji(e,Of(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,i,r){return bx(n)||r.isEqual(te.min())?M.resolve(null):this.zi.getDocuments(e,i).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,i,r)?M.resolve(null):(ua()<=Hn.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),da(n)),this.es(e,s,n,lM(r,-1)).next(a=>a))})}Zi(e,n){let i=new Be(RM(e));return n.forEach((r,o)=>{hu(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return ua()<=Hn.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",da(n)),this.zi.getDocumentsMatchingQuery(e,n,Dn.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Jv=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new He(he),this.rs=new di(o=>ko(o),uu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zf(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function hA(t,e,n,i){return new Jv(t,e,n,i)}function fA(t,e){return A(this,null,function*(){let n=H(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],c=pe();for(let u of r){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(i,c).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})})}function n3(t,e){let n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,g=f.keys(),_=M.resolve();return g.forEach(D=>{_=_.next(()=>d.getEntry(c,D)).next(x=>{let T=u.docVersions.get(D);X(T!==null),x.version.compareTo(T)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function pA(t){let e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function i3(t,e){let n=H(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let a=[];e.targetChanges.forEach((d,f)=>{let g=r.get(f);if(!g)return;a.push(n.Qr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(o,d.addedDocuments,f)));let _=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(Et.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(f,_),function(x,T,V){return x.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(g,_,d)&&a.push(n.Qr.updateTargetData(o,_))});let c=tn(),u=pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(gA(o,s,e.documentUpdates).next(d=>{c=d.cs,u=d.ls})),!i.isEqual(te.min())){let d=n.Qr.getLastRemoteSnapshotVersion(o).next(f=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ns=r,o))}function gA(t,e,n){let i=pe(),r=pe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=tn();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:s,ls:r}})}function r3(t,e){let n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xa(t,e){let n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,M.resolve(r)):n.Qr.allocateTargetId(i).next(s=>(r=new Ta(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function Ma(t,e,n){return A(this,null,function*(){let i=H(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Br(s))throw s;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function Kf(t,e,n){let i=H(t),r=te.min(),o=pe();return i.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=H(c),g=f.rs.get(d);return g!==void 0?M.resolve(f.ns.get(g)):f.Qr.getTargetData(u,d)}(i,s,qt(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>i.ts.getDocumentsMatchingQuery(s,e,n?r:te.min(),n?o:pe())).next(a=>(yA(i,AM(e),a),{documents:a,hs:o})))}function mA(t,e){let n=H(t),i=H(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(s=>s?s.target:null))}function _A(t,e){let n=H(t),i=n.ss.get(e)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,lM(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(yA(n,e,r),r))}function yA(t,e,n){let i=t.ss.get(e)||te.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}function o3(t,e,n,i){return A(this,null,function*(){let r=H(t),o=pe(),s=tn();for(let u of n){let d=e.Ps(u.metadata.name);u.document&&(o=o.add(d));let f=e.Is(u);f.setReadTime(e.Ts(u.metadata.readTime)),s=s.insert(d,f)}let a=r.os.newChangeBuffer({trackRemovals:!0}),c=yield xa(r,function(d){return qt(Va(Ce.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>gA(u,a,s).next(d=>(a.apply(u),d)).next(d=>r.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>r.Qr.addMatchingKeys(u,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,d.cs,d.ls)).next(()=>d.cs)))})}function s3(i,r){return A(this,arguments,function*(t,e,n=pe()){let o=yield xa(t,qt(Qw(e.bundledQuery))),s=H(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=ot(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let u=o.withResumeToken(Et.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(u.targetId,u),s.Qr.updateTargetData(a,u).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function Kx(t,e){return`firestore_clients_${t}_${e}`}function Yx(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function B0(t,e){return`firestore_targets_${t}_${e}`}var Yf=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new k(r.error.code,r.error.message))),s?new t(e,n,r.state,o):(it("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Bl=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new k(i.error.code,i.error.message))),o?new t(e,i.state,r):(it("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Jf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=qw();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=fM(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(it("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Zv=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(it("SharedClientState",`Failed to parse online state: ${e}`),null)}},nu=class{constructor(){this.activeTargetIds=qw()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},jl=class{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new He(he),this.started=!1,this.ys=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=Kx(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new nu),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return A(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(Kx(this.persistenceKey,i));if(r){let o=Jf.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(B0(this.persistenceKey,e));if(i){let r=Bl.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(B0(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return F("SharedClientState","READ",e,n),n}setItem(e,n){F("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){F("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(F("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void it("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>A(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(o){let s=dn.oe;if(o!=null)try{let a=JSON.parse(o);X(typeof a=="number"),s=a}catch(a){it("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==dn.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){let r=new Yf(this.currentUser,e,n,i),o=Yx(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){let n=Yx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=B0(this.persistenceKey,e),o=new Bl(e,n,i);this.setItem(r,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return Jf.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Yf.Es(new lt(o),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return Bl.Es(r,n)}xs(e){return Zv.Es(e)}Js(e){return JSON.parse(e)}zs(e){return A(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);F("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),s=[],a=[];return o.forEach(c=>{r.has(c)||s.push(c)}),r.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=qw();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},Zf=class{constructor(){this.no=new nu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new nu,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Xv=class{io(e){}shutdown(){}};var Xf=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gf=null;function j0(){return gf===null?gf=function(){return 268435456+Math.round(2147483648*Math.random())}():gf++,"0x"+gf.toString(16)}var a3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ew=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Ft="WebChannelConnection",tw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,s){let a=j0(),c=this.vo(n,i.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,o,s),this.Mo(n,c,u,r).then(d=>(F("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw En("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",r),d})}xo(n,i,r,o,s,a){return this.Co(n,i,r,o,s)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}vo(n,i){let r=a3[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let o=j0();return new Promise((s,a)=>{let c=new R0;c.setWithCredentials(!0),c.listenOnce(O0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ml.NO_ERROR:let d=c.getResponseJson();F(Ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Ml.TIMEOUT:F(Ft,`RPC '${e}' ${o} timed out`),a(new k(P.DEADLINE_EXCEEDED,"Request time out"));break;case Ml.HTTP_ERROR:let f=c.getStatus();if(F(Ft,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let _=g?.error;if(_&&_.status&&_.message){let D=function(T){let V=T.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(V)>=0?V:P.UNKNOWN}(_.status);a(new k(D,_.message))}else a(new k(P.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new k(P.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{F(Ft,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);F(Ft,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",u,i,15)})}Oo(e,n,i){let r=j0(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=F0(),a=k0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new P0({})),this.Fo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let d=o.join("");F(Ft,`Creating RPC '${e}' stream ${r}: ${d}`,c);let f=s.createWebChannel(d,c),g=!1,_=!1,D=new ew({lo:T=>{_?F(Ft,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(g||(F(Ft,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),F(Ft,`RPC '${e}' stream ${r} sending:`,T),f.send(T))},ho:()=>f.close()}),x=(T,V,j)=>{T.listen(V,O=>{try{j(O)}catch(U){setTimeout(()=>{throw U},0)}})};return x(f,oa.EventType.OPEN,()=>{_||(F(Ft,`RPC '${e}' stream ${r} transport opened.`),D.mo())}),x(f,oa.EventType.CLOSE,()=>{_||(_=!0,F(Ft,`RPC '${e}' stream ${r} transport closed`),D.po())}),x(f,oa.EventType.ERROR,T=>{_||(_=!0,En(Ft,`RPC '${e}' stream ${r} transport errored:`,T),D.po(new k(P.UNAVAILABLE,"The operation could not be completed")))}),x(f,oa.EventType.MESSAGE,T=>{var V;if(!_){let j=T.data[0];X(!!j);let O=j,U=O.error||((V=O[0])===null||V===void 0?void 0:V.error);if(U){F(Ft,`RPC '${e}' stream ${r} received error:`,U);let ee=U.status,Y=function(v){let E=at[v];if(E!==void 0)return zM(E)}(ee),b=U.message;Y===void 0&&(Y=P.INTERNAL,b="Unknown error status: "+ee+" with message "+U.message),_=!0,D.po(new k(Y,b)),f.close()}else F(Ft,`RPC '${e}' stream ${r} received:`,j),D.yo(j)}}),x(a,N0.STAT_EVENT,T=>{T.stat===df.PROXY?F(Ft,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===df.NOPROXY&&F(Ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.fo()},0),D}};function vA(){return typeof window<"u"?window:null}function wf(){return typeof document<"u"?document:null}function fu(t){return new yv(t,!0)}var iu=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&F("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var ep=class{constructor(e,n,i,r,o,s,a,c){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new iu(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return A(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return A(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return A(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(it(n.toString()),it("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new k(P.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>A(this,null,function*(){this.state=0,this.start()}))}c_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},nw=class extends ep{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=z$(this.serializer,e),i=function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?ot(s.readTime):te.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=bv(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Rf(c)?{documents:XM(o,c)}:{query:eA(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=WM(o,s.resumeToken);let u=vv(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=Ia(o,s.snapshotVersion.toTimestamp());let u=vv(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let i=W$(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=bv(this.serializer),n.removeTarget=e,this.i_(n)}},iw=class extends ep{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(X(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=q$(e.writeResults,e.commitTime),i=ot(e.commitTime);return this.listener.A_(i,n)}return X(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=bv(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Xl(this.serializer,i))};this.i_(n)}};var rw=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new k(P.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,wv(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(P.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,wv(n,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(P.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},ow=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(it(n),this.y_=!1):F("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var sw=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{i.enqueueAndForget(()=>A(this,null,function*(){jr(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(c){return A(this,null,function*(){let u=H(c);u.M_.add(4),yield La(u),u.N_.set("Unknown"),u.M_.delete(4),yield pu(u)})}(this))}))}),this.N_=new ow(i,r)}};function pu(t){return A(this,null,function*(){if(jr(t))for(let e of t.x_)yield e(!0)})}function La(t){return A(this,null,function*(){for(let e of t.x_)yield e(!1)})}function vp(t,e){let n=H(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Xw(n)?Zw(n):ja(n).Xo()&&Jw(n,e))}function Aa(t,e){let n=H(t),i=ja(n);n.F_.delete(e),i.Xo()&&wA(n,e),n.F_.size===0&&(i.Xo()?i.n_():jr(n)&&n.N_.set("Unknown"))}function Jw(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ja(t).P_(e)}function wA(t,e){t.L_.xe(e),ja(t).I_(e)}function Zw(t){t.L_=new _v({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ja(t).start(),t.N_.w_()}function Xw(t){return jr(t)&&!ja(t).Zo()&&t.F_.size>0}function jr(t){return H(t).M_.size===0}function bA(t){t.L_=void 0}function c3(t){return A(this,null,function*(){t.N_.set("Online")})}function l3(t){return A(this,null,function*(){t.F_.forEach((e,n)=>{Jw(t,e)})})}function u3(t,e){return A(this,null,function*(){bA(t),Xw(t)?(t.N_.D_(e),Zw(t)):t.N_.set("Unknown")})}function d3(t,e,n){return A(this,null,function*(){if(t.N_.set("Online"),e instanceof kf&&e.state===2&&e.cause)try{yield function(r,o){return A(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.F_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.F_.delete(a),r.L_.removeTarget(a))})}(t,e)}catch(i){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield tp(t,i)}else if(e instanceof ya?t.L_.Ke(e):e instanceof Nf?t.L_.He(e):t.L_.We(e),!n.isEqual(te.min()))try{let i=yield pA(t.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.F_.get(u);d&&o.F_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.F_.get(c);if(!d)return;o.F_.set(c,d.withResumeToken(Et.EMPTY_BYTE_STRING,d.snapshotVersion)),wA(o,c);let f=new Ta(d.target,c,u,d.sequenceNumber);Jw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){F("RemoteStore","Failed to raise snapshot:",i),yield tp(t,i)}})}function tp(t,e,n){return A(this,null,function*(){if(!Br(e))throw e;t.M_.add(1),yield La(t),t.N_.set("Offline"),n||(n=()=>pA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>A(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield pu(t)}))})}function EA(t,e){return e().catch(n=>tp(t,n,e))}function Ba(t){return A(this,null,function*(){let e=H(t),n=Vr(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;h3(e);)try{let r=yield r3(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,f3(e,r)}catch(r){yield tp(e,r)}DA(e)&&CA(e)})}function h3(t){return jr(t)&&t.v_.length<10}function f3(t,e){t.v_.push(e);let n=Vr(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function DA(t){return jr(t)&&!Vr(t).Zo()&&t.v_.length>0}function CA(t){Vr(t).start()}function p3(t){return A(this,null,function*(){Vr(t).V_()})}function g3(t){return A(this,null,function*(){let e=Vr(t);for(let n of t.v_)e.d_(n.mutations)})}function m3(t,e,n){return A(this,null,function*(){let i=t.v_.shift(),r=pv.from(i,e,n);yield EA(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Ba(t)})}function _3(t,e){return A(this,null,function*(){e&&Vr(t).E_&&(yield function(i,r){return A(this,null,function*(){if(function(s){return GM(s)&&s!==P.ABORTED}(r.code)){let o=i.v_.shift();Vr(i).t_(),yield EA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Ba(i)}})}(t,e)),DA(t)&&CA(t)})}function Jx(t,e){return A(this,null,function*(){let n=H(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let i=jr(n);n.M_.add(3),yield La(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield pu(n)})}function aw(t,e){return A(this,null,function*(){let n=H(t);e?(n.M_.delete(2),yield pu(n)):e||(n.M_.add(2),yield La(n),n.N_.set("Unknown"))})}function ja(t){return t.B_||(t.B_=function(n,i,r){let o=H(n);return o.f_(),new nw(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:c3.bind(null,t),To:l3.bind(null,t),Ao:u3.bind(null,t),h_:d3.bind(null,t)}),t.x_.push(e=>A(this,null,function*(){e?(t.B_.t_(),Xw(t)?Zw(t):t.N_.set("Unknown")):(yield t.B_.stop(),bA(t))}))),t.B_}function Vr(t){return t.k_||(t.k_=function(n,i,r){let o=H(n);return o.f_(),new iw(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:p3.bind(null,t),Ao:_3.bind(null,t),R_:g3.bind(null,t),A_:m3.bind(null,t)}),t.x_.push(e=>A(this,null,function*(){e?(t.k_.t_(),yield Ba(t)):(yield t.k_.stop(),t.v_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var cw=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ut,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let s=Date.now()+i,a=new t(e,n,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ua(t,e){if(it("AsyncQueue",`${e}: ${t}`),Br(t))return new k(P.UNAVAILABLE,`${e}: ${t}`);throw t}var np=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||$.comparator(n.key,i.key):(n,i)=>$.comparator(n.key,i.key),this.keyedMap=Nl(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var ip=class{constructor(){this.q_=new He($.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):K():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},Ra=class t{constructor(e,n,i,r,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,np.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var lw=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},uw=class{constructor(){this.queries=new di(e=>MM(e),du),this.onlineState="Unknown",this.z_=new Set}};function eb(t,e){return A(this,null,function*(){let n=H(t),i=3,r=e.query,o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new lw,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield n.onListen(r,!0);break;case 1:o.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(s){let a=Ua(s,`Initialization of query '${da(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&nb(n)})}function tb(t,e){return A(this,null,function*(){let n=H(t),i=e.query,r=3,o=n.queries.get(i);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function y3(t,e){let n=H(t),i=!1;for(let r of e){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(r)&&(i=!0);s.K_=r}}i&&nb(n)}function v3(t,e,n){let i=H(t),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(n);i.queries.delete(e)}function nb(t){t.z_.forEach(e=>{e.next()})}var dw,Zx;(Zx=dw||(dw={})).J_="default",Zx.Cache="cache";var ru=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Ra(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==dw.Cache}};var hw=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var rp=class{constructor(e){this.serializer=e}Ps(e){return ai(this.serializer,e)}Is(e){return e.metadata.exists?ZM(this.serializer,e.document,!1):dt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return ot(e)}},fw=class{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=IA(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let i=Ce.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,i=new rp(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let s of r.metadata.queries){let a=(n.get(s)||pe()).add(o);n.set(s,a)}}return n}complete(){return A(this,null,function*(){let e=yield o3(this.localStore,new rp(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let i of this.queries)yield s3(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function IA(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var op=class{constructor(e){this.key=e}},sp=class{constructor(e){this.key=e}},ap=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=pe(),this.mutatedKeys=pe(),this.Ia=RM(e),this.Ta=new np(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new ip,r=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{let g=r.get(d),_=hu(this.query,f)?f:null,D=!!g&&this.mutatedKeys.has(g.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),T=!1;g&&_?g.data.isEqual(_.data)?D!==x&&(i.track({type:3,doc:_}),T=!0):this.Ra(g,_)||(i.track({type:2,doc:_}),T=!0,(c&&this.Ia(_,c)>0||u&&this.Ia(_,u)<0)&&(a=!0)):!g&&_?(i.track({type:0,doc:_}),T=!0):g&&!_&&(i.track({type:1,doc:g}),T=!0,(c||u)&&(a=!0)),T&&(_?(s=s.add(_),o=x?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{Ta:s,Aa:i,Xi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((d,f)=>function(_,D){let x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return x(_)-x(D)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(i),r=r!=null&&r;let a=n&&!r?this.ma():[],c=this.Pa.size===0&&this.current&&!r?1:0,u=c!==this.ha;return this.ha=c,s.length!==0||u?{snapshot:new Ra(this.query,e.Ta,o,s,e.mutatedKeys,c===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ip,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=pe(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new sp(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new op(i))}),n}pa(e){this.la=e.hs,this.Pa=pe();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Ra.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},pw=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},gw=class{constructor(e){this.key=e,this.wa=!1}},mw=class{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new di(a=>MM(a),du),this.Da=new Map,this.Ca=new Set,this.va=new He($.comparator),this.Fa=new Map,this.Ma=new tu,this.xa={},this.Oa=new Map,this.Na=Sa.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function w3(t,e,n=!0){return A(this,null,function*(){let i=wp(t),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield TA(i,e,n,!0),r})}function b3(t,e){return A(this,null,function*(){let n=wp(t);yield TA(n,e,!0,!1)})}function TA(t,e,n,i){return A(this,null,function*(){let r=yield xa(t.localStore,qt(e)),o=r.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return i&&(a=yield ib(t,e,o,s==="current",r.resumeToken)),t.isPrimaryClient&&n&&vp(t.remoteStore,r),a})}function ib(t,e,n,i,r){return A(this,null,function*(){t.Ba=(f,g,_)=>function(x,T,V,j){return A(this,null,function*(){let O=T.view.da(V);O.Xi&&(O=yield Kf(x.localStore,T.query,!1).then(({documents:b})=>T.view.da(b,O)));let U=j&&j.targetChanges.get(T.targetId),ee=j&&j.targetMismatches.get(T.targetId)!=null,Y=T.view.applyChanges(O,x.isPrimaryClient,U,ee);return _w(x,T.targetId,Y.fa),Y.snapshot})}(t,f,g,_);let o=yield Kf(t.localStore,e,!0),s=new ap(e,o.hs),a=s.da(o.documents),c=Jl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=s.applyChanges(a,t.isPrimaryClient,c);_w(t,n,u.fa);let d=new pw(e,n,s);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot})}function E3(t,e,n){return A(this,null,function*(){let i=H(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(s=>!du(s,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ma(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Aa(i.remoteStore,r.targetId),Pa(i,r.targetId)}).catch(Lr))):(Pa(i,r.targetId),yield Ma(i.localStore,r.targetId,!0))})}function D3(t,e){return A(this,null,function*(){let n=H(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Aa(n.remoteStore,i.targetId))})}function C3(t,e,n){return A(this,null,function*(){let i=ab(t);try{let r=yield function(s,a){let c=H(s),u=Ke.now(),d=a.reduce((_,D)=>_.add(D.key),pe()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let D=tn(),x=pe();return c.os.getEntries(_,d).next(T=>{D=T,D.forEach((V,j)=>{j.isValidDocument()||(x=x.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,D)).next(T=>{f=T;let V=[];for(let j of a){let O=L$(j,f.get(j.key).overlayedDocument);O!=null&&V.push(new Bn(j.key,O,EM(O.value.mapValue),tt.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,V,a)}).next(T=>{g=T;let V=T.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(_,T.batchId,V)})}).then(()=>({batchId:g.batchId,changes:OM(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let u=s.xa[s.currentUser.toKey()];u||(u=new He(he)),u=u.insert(a,c),s.xa[s.currentUser.toKey()]=u}(i,r.batchId,n),yield Qi(i,r.changes),yield Ba(i.remoteStore)}catch(r){let o=Ua(r,"Failed to persist write");n.reject(o)}})}function SA(t,e){return A(this,null,function*(){let n=H(t);try{let i=yield i3(n.localStore,e);e.targetChanges.forEach((r,o)=>{let s=n.Fa.get(o);s&&(X(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.wa=!0:r.modifiedDocuments.size>0?X(s.wa):r.removedDocuments.size>0&&(X(s.wa),s.wa=!1))}),yield Qi(n,i,e)}catch(i){yield Lr(i)}})}function Xx(t,e,n){let i=H(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){let c=H(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let g of f.U_)g.j_(a)&&(u=!0)}),u&&nb(c)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function I3(t,e,n){return A(this,null,function*(){let i=H(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),o=r&&r.key;if(o){let s=new He($.comparator);s=s.insert(o,dt.newNoDocument(o,te.min()));let a=pe().add(o),c=new Yl(te.min(),new Map,new He(he),s,a);yield SA(i,c),i.va=i.va.remove(o),i.Fa.delete(e),sb(i)}else yield Ma(i.localStore,e,!1).then(()=>Pa(i,e,n)).catch(Lr)})}function T3(t,e){return A(this,null,function*(){let n=H(t),i=e.batch.batchId;try{let r=yield n3(n.localStore,e);ob(n,i,null),rb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Qi(n,r)}catch(r){yield Lr(r)}})}function S3(t,e,n){return A(this,null,function*(){let i=H(t);try{let r=yield function(s,a){let c=H(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(X(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(i.localStore,e);ob(i,e,n),rb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Qi(i,r)}catch(r){yield Lr(r)}})}function x3(t,e){return A(this,null,function*(){let n=H(t);jr(n.remoteStore)||F("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();let r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){let r=Ua(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function rb(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function ob(t,e,n){let i=H(t),r=i.xa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function Pa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||xA(t,i)})}function xA(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Aa(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),sb(t))}function _w(t,e,n){for(let i of n)i instanceof op?(t.Ma.addReference(i.key,e),M3(t,i)):i instanceof sp?(F("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||xA(t,i.key)):K()}function M3(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(F("SyncEngine","New document in limbo: "+n),t.Ca.add(i),sb(t))}function sb(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new $(Ce.fromString(e)),i=t.Na.next();t.Fa.set(i,new gw(n)),t.va=t.va.insert(n,i),vp(t.remoteStore,new Ta(qt(Va(n.path)),i,"TargetPurposeLimboResolution",dn.oe))}}function Qi(t,e,n){return A(this,null,function*(){let i=H(t),r=[],o=[],s=[];i.ba.isEmpty()||(i.ba.forEach((a,c)=>{s.push(i.Ba(c,e,n).then(u=>{if((u||n)&&i.isPrimaryClient){let d=u&&!u.fromCache;i.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){r.push(u);let d=Kv.Ki(c.targetId,u);o.push(d)}}))}),yield Promise.all(s),i.Sa.h_(r),yield function(c,u){return A(this,null,function*(){let d=H(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(u,g=>M.forEach(g.qi,_=>d.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>M.forEach(g.Qi,_=>d.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!Br(f))throw f;F("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let g=f.targetId;if(!f.fromCache){let _=d.ns.get(g),D=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(D);d.ns=d.ns.insert(g,x)}}})}(i.localStore,o))})}function A3(t,e){return A(this,null,function*(){let n=H(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let i=yield fA(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new k(P.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Qi(n,i.us)}})}function R3(t,e){let n=H(t),i=n.Fa.get(e);if(i&&i.wa)return pe().add(i.key);{let r=pe(),o=n.Da.get(e);if(!o)return r;for(let s of o){let a=n.ba.get(s);r=r.unionWith(a.view.Ea)}return r}}function P3(t,e){return A(this,null,function*(){let n=H(t),i=yield Kf(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&_w(n,e.targetId,r.fa),r})}function O3(t,e){return A(this,null,function*(){let n=H(t);return _A(n.localStore,e).then(i=>Qi(n,i))})}function N3(t,e,n,i){return A(this,null,function*(){let r=H(t),o=yield function(a,c){let u=H(a),d=H(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.vn(f,c).next(g=>g?u.localDocuments.getDocuments(f,g):M.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield Ba(r.remoteStore):n==="acknowledged"||n==="rejected"?(ob(r,e,i||null),rb(r,e),function(a,c){H(H(a).mutationQueue).Mn(c)}(r.localStore,e)):K(),yield Qi(r,o)):F("SyncEngine","Cannot apply mutation batch with id: "+e)})}function k3(t,e){return A(this,null,function*(){let n=H(t);if(wp(n),ab(n),e===!0&&n.La!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield eM(n,i.toArray());n.La=!0,yield aw(n.remoteStore,!0);for(let o of r)vp(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let i=[],r=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(Pa(n,s),Ma(n.localStore,s,!0))),Aa(n.remoteStore,s)}),yield r,yield eM(n,i),function(s){let a=H(s);a.Fa.forEach((c,u)=>{Aa(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new He($.comparator)}(n),n.La=!1,yield aw(n.remoteStore,!1)}})}function eM(t,e,n){return A(this,null,function*(){let i=H(t),r=[],o=[];for(let s of e){let a,c=i.Da.get(s);if(c&&c.length!==0){a=yield xa(i.localStore,qt(c[0]));for(let u of c){let d=i.ba.get(u),f=yield P3(i,d);f.snapshot&&o.push(f.snapshot)}}else{let u=yield mA(i.localStore,s);a=yield xa(i.localStore,u),yield ib(i,MA(u),s,!1,a.resumeToken)}r.push(a)}return i.Sa.h_(o),r})}function MA(t){return xM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function F3(t){return function(n){return H(H(n).persistence).Bi()}(H(t).localStore)}function V3(t,e,n,i){return A(this,null,function*(){let r=H(t);if(r.La)return void F("SyncEngine","Ignoring unexpected query state notification.");let o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield _A(r.localStore,AM(o[0])),a=Yl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Et.EMPTY_BYTE_STRING);yield Qi(r,s,a);break}case"rejected":yield Ma(r.localStore,e,!0),Pa(r,e,i);break;default:K()}})}function L3(t,e,n){return A(this,null,function*(){let i=wp(t);if(i.La){for(let r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){F("SyncEngine","Adding an already active target "+r);continue}let o=yield mA(i.localStore,r),s=yield xa(i.localStore,o);yield ib(i,MA(o),s.targetId,!1,s.resumeToken),vp(i.remoteStore,s)}for(let r of n)i.Da.has(r)&&(yield Ma(i.localStore,r,!1).then(()=>{Aa(i.remoteStore,r),Pa(i,r)}).catch(Lr))}})}function wp(t){let e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I3.bind(null,e),e.Sa.h_=y3.bind(null,e.eventManager),e.Sa.ka=v3.bind(null,e.eventManager),e}function ab(t){let e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S3.bind(null,e),e}function B3(t,e,n){let i=H(t);(function(o,s,a){return A(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(_,D){let x=H(_),T=ot(D.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",V=>x.$r.getBundleMetadata(V,D.id)).then(V=>!!V&&V.createTime.compareTo(T)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(IA(c));let u=new fw(c,o.localStore,s.serializer),d=yield s.qa();for(;d;){let g=yield u._a(d);g&&a._updateProgress(g),d=yield s.qa()}let f=yield u.complete();return yield Qi(o,f.ca,void 0),yield function(_,D){let x=H(_);return x.persistence.runTransaction("Save bundle","readwrite",T=>x.$r.saveBundleMetadata(T,D))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(c){return En("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var ou=class{constructor(){this.synchronizeTabs=!1}initialize(e){return A(this,null,function*(){this.serializer=fu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return hA(this.persistence,new Qf,e.initialUser,this.serializer)}createPersistence(e){return new qf(Wf.Hr,this.serializer)}createSharedClientState(e){return new Zf}terminate(){return A(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var cp=class t extends ou{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return A(this,null,function*(){yield Mg(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield ab(this.Qa.syncEngine),yield Ba(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return hA(this.persistence,new Qf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new Nv(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new Z0(n,this.persistence);return new J0(e.asyncQueue,i)}createPersistence(e){let n=Yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new Qv(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,vA(),wf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Zf}},yw=class t extends cp{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return A(this,null,function*(){yield Mg(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof jl&&(this.sharedClientState.syncEngine={Zs:N3.bind(null,n),Xs:V3.bind(null,n),eo:L3.bind(null,n),Bi:F3.bind(null,n),Ys:O3.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>A(this,null,function*(){yield k3(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=vA();if(!jl.D(n))throw new k(P.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=Yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jl(n,e.asyncQueue,i,e.clientId,e.initialUser)}},su=class{initialize(e,n){return A(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Xx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=A3.bind(null,this.syncEngine),yield aw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new uw}()}createDatastore(e){let n=fu(e.databaseInfo.databaseId),i=function(o){return new tw(o)}(e.databaseInfo);return function(o,s,a,c){return new rw(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,a){return new sw(i,r,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Xx(this.syncEngine,n,0),function(){return Xf.D()?new Xf:new Xv}())}createSyncEngine(e,n){return function(r,o,s,a,c,u,d){let f=new mw(r,o,s,a,c,u);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return A(this,null,function*(){var e;yield function(i){return A(this,null,function*(){let r=H(i);F("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield La(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function tM(t,e=10240){let n=0;return{read(){return A(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return A(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Oa=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):it("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var vw=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new ut,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){return A(this,null,function*(){return this.metadata.promise})}qa(){return A(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return A(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);let r=yield this.Ha(i);return new hw(JSON.parse(r),e.length+i)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return A(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return A(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return A(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var ww=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return A(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(P.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return A(this,null,function*(){let s=H(r),a={documents:o.map(f=>Zl(s.serializer,f))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,Ce.emptyPath(),a,o.length),u=new Map;c.forEach(f=>{let g=G$(s.serializer,f);u.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=u.get(f.toString());X(!!g),d.push(g)}),d})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return A(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=$.fromPath(i);this.mutations.push(new Wl(r,this.precondition(r)))}),yield function(i,r){return A(this,null,function*(){let o=H(i),s={writes:r.map(a=>Xl(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,Ce.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw K();n=te.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new k(P.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(te.min())?tt.exists(!1):tt.updateTime(n):tt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(te.min()))throw new k(P.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tt.updateTime(n)}return tt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var bw=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new iu(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>A(this,null,function*(){let e=new ww(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})}))}tu(e){try{let n=this.updateFunction(e);return!lu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!GM(n)}return!1}};var Ew=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=lt.UNAUTHENTICATED,this.clientId=Df.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>A(this,null,function*(){F("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(F("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ut;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>A(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Ua(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function bf(t,e){return A(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>A(this,null,function*(){i.isEqual(r)||(yield fA(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Dw(t,e){return A(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield cb(t);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Jx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Jx(e.remoteStore,r)),t._onlineComponents=e})}function AA(t){return t.name==="FirebaseError"?t.code===P.FAILED_PRECONDITION||t.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function cb(t){return A(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!AA(n))throw n;En("Error using user provided cache. Falling back to memory cache: "+n),yield bf(t,new ou)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield bf(t,new ou);return t._offlineComponents})}function bp(t){return A(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield Dw(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield Dw(t,new su))),t._onlineComponents})}function RA(t){return cb(t).then(e=>e.persistence)}function lb(t){return cb(t).then(e=>e.localStore)}function PA(t){return bp(t).then(e=>e.remoteStore)}function ub(t){return bp(t).then(e=>e.syncEngine)}function j3(t){return bp(t).then(e=>e.datastore)}function Na(t){return A(this,null,function*(){let e=yield bp(t),n=e.eventManager;return n.onListen=w3.bind(null,e.syncEngine),n.onUnlisten=E3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=b3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D3.bind(null,e.syncEngine),n})}function U3(t){return t.asyncQueue.enqueue(()=>A(this,null,function*(){let e=yield RA(t),n=yield PA(t);return e.setNetworkEnabled(!0),function(r){let o=H(r);return o.M_.delete(0),pu(o)}(n)}))}function $3(t){return t.asyncQueue.enqueue(()=>A(this,null,function*(){let e=yield RA(t),n=yield PA(t);return e.setNetworkEnabled(!1),function(r){return A(this,null,function*(){let o=H(r);o.M_.add(0),yield La(o),o.N_.set("Offline")})}(n)}))}function H3(t,e){let n=new ut;return t.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return function(r,o,s){return A(this,null,function*(){try{let a=yield function(u,d){let f=H(u);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(P.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ua(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield lb(t),e,n)})),n.promise}function OA(t,e,n={}){let i=new ut;return t.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return function(o,s,a,c,u){let d=new Oa({next:g=>{s.enqueueAndForget(()=>tb(o,f));let _=g.docs.has(a);!_&&g.fromCache?u.reject(new k(P.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&c&&c.source==="server"?u.reject(new k(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new ru(Va(a.path),d,{includeMetadataChanges:!0,ra:!0});return eb(o,f)}(yield Na(t),t.asyncQueue,e,n,i)})),i.promise}function G3(t,e){let n=new ut;return t.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return function(r,o,s){return A(this,null,function*(){try{let a=yield Kf(r,o,!0),c=new ap(o,a.hs),u=c.da(a.documents),d=c.applyChanges(u,!1);s.resolve(d.snapshot)}catch(a){let c=Ua(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield lb(t),e,n)})),n.promise}function NA(t,e,n={}){let i=new ut;return t.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return function(o,s,a,c,u){let d=new Oa({next:g=>{s.enqueueAndForget(()=>tb(o,f)),g.fromCache&&c.source==="server"?u.reject(new k(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new ru(a,d,{includeMetadataChanges:!0,ra:!0});return eb(o,f)}(yield Na(t),t.asyncQueue,e,n,i)})),i.promise}function z3(t,e){let n=new Oa(e);return t.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return function(r,o){H(r).z_.add(o),o.next()}(yield Na(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return function(r,o){H(r).z_.delete(o)}(yield Na(t),n)}))}}function q3(t,e,n,i){let r=function(s,a){let c;return c=typeof s=="string"?qM().encode(s):s,function(d,f){return new vw(d,f)}(function(d,f){if(d instanceof Uint8Array)return tM(d,f);if(d instanceof ArrayBuffer)return tM(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,fu(e));t.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){B3(yield ub(t),r,i)}))}function W3(t,e){return t.asyncQueue.enqueue(()=>A(this,null,function*(){return function(i,r){let o=H(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,r))}(yield lb(t),e)}))}function kA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var nM=new Map;function db(t,e,n){if(!n)throw new k(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hb(t,e,n,i){if(e===!0&&i===!0)throw new k(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iM(t){if(!$.isDocumentKey(t))throw new k(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rM(t){if($.isDocumentKey(t))throw new k(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ep(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function Ie(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ep(t);throw new k(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function FA(t,e){if(e<=0)throw new k(P.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var lp=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new k(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Bo=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lp(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new U0;switch(i.type){case"firstParty":return new z0(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new k(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=nM.get(n);i&&(F("ComponentProvider","Removing Datastore"),nM.delete(n),i.terminate())}(this),Promise.resolve()}};function Dp(t,e,n,i={}){var r;let o=(t=Ie(t,Bo))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&En("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=lt.MOCK_USER;else{a=qu(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new k(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new lt(u)}t._authCredentials=new $0(new Ef(a,c))}}var xt=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ue=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ci=class t extends xt{constructor(e,n,i){super(e,n,Va(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function gu(t,e,...n){if(t=xe(t),db("collection","path",e),t instanceof Bo){let i=Ce.fromString(e,...n);return rM(i),new ci(t,null,i)}{if(!(t instanceof Ue||t instanceof ci))throw new k(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ce.fromString(e,...n));return rM(i),new ci(t.firestore,null,i)}}function fb(t,e){if(t=Ie(t,Bo),db("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(P.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xt(t,null,function(i){return new Ln(Ce.emptyPath(),i)}(e))}function $a(t,e,...n){if(t=xe(t),arguments.length===1&&(e=Df.newId()),db("doc","path",e),t instanceof Bo){let i=Ce.fromString(e,...n);return iM(i),new Ue(t,null,new $(i))}{if(!(t instanceof Ue||t instanceof ci))throw new k(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ce.fromString(e,...n));return iM(i),new Ue(t.firestore,t instanceof ci?t.converter:null,new $(i))}}function mu(t,e){return t=xe(t),e=xe(e),(t instanceof Ue||t instanceof ci)&&(e instanceof Ue||e instanceof ci)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Cp(t,e){return t=xe(t),e=xe(e),t instanceof xt&&e instanceof xt&&t.firestore===e.firestore&&du(t._query,e._query)&&t.converter===e.converter}var Cw=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new iu(this,"async_queue_retry"),this.hu=()=>{let n=wf();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=wf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new ut;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return A(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Br(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw it("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=cw.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&K()}verifyOperationInProgress(){}du(){return A(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function Iw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Tw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ut,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var VA=-1,Ge=class extends Bo{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new Cw}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||BA(this),this._firestoreClient.terminate()}};function LA(t,e){let n=typeof t=="object"?t:os(),i=typeof t=="string"?t:e||"(default)",r=Yu(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=Ag("firestore");o&&Dp(r,...o)}return r}function gt(t){return t._firestoreClient||BA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function BA(t){var e,n,i;let r=t._freezeSettings(),o=function(a,c,u,d){return new X0(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new Ew(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function pb(t,e){UA(t=Ie(t,Ge));let n=gt(t);if(n._uninitializedComponentsProvider)throw new k(P.FAILED_PRECONDITION,"SDK cache is already specified.");En("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new su;return jA(n,r,new cp(r,i.cacheSizeBytes,e?.forceOwnership))}function gb(t){UA(t=Ie(t,Ge));let e=gt(t);if(e._uninitializedComponentsProvider)throw new k(P.FAILED_PRECONDITION,"SDK cache is already specified.");En("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new su;return jA(e,i,new yw(i,n.cacheSizeBytes))}function jA(t,e,n){let i=new ut;return t.asyncQueue.enqueue(()=>A(this,null,function*(){try{yield bf(t,n),yield Dw(t,e),i.resolve()}catch(r){let o=r;if(!AA(o))throw o;En("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function mb(t){if(t._initialized&&!t._terminated)throw new k(P.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ut;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>A(this,null,function*(){try{yield function(i){return A(this,null,function*(){if(!Mr.D())return Promise.resolve();let r=i+"main";yield Mr.delete(r)})}(Yw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function _b(t){return function(n){let i=new ut;return n.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return x3(yield ub(n),i)})),i.promise}(gt(t=Ie(t,Ge)))}function yb(t){return U3(gt(t=Ie(t,Ge)))}function vb(t){return $3(gt(t=Ie(t,Ge)))}function wb(t,e){let n=gt(t=Ie(t,Ge)),i=new Tw;return q3(n,t._databaseId,e,i),i}function bb(t,e){return W3(gt(t=Ie(t,Ge)),e).then(n=>n?new xt(t,null,n.query):null)}function UA(t){if(t._initialized||t._terminated)throw new k(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var hi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Et.fromBase64String(e))}catch(n){throw new k(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var jn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qi=class{constructor(e){this._methodName=e}};var jo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}};var Q3=/^__.*__$/,Sw=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Bn(e,this.data,this.fieldMask,n,this.fieldTransforms):new kr(e,this.data,n,this.fieldTransforms)}},up=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Bn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function $A(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var dp=class t{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return hp(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if($A(this.fu)&&Q3.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},xw=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||fu(e)}Fu(e,n,i,r=!1){return new dp({fu:e,methodName:n,vu:i,path:rt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Go(t){let e=t._freezeSettings(),n=fu(t._databaseId);return new xw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ip(t,e,n,i,r,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);Cb("Data must be an object, but it was:",s,i);let a=zA(i,s),c,u;if(o.merge)c=new hn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=Ow(e,f,n);if(!s.contains(g))throw new k(P.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);WA(d,g)||d.push(g)}c=new hn(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new Sw(new Vt(a),c,u)}var au=class t extends qi{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function HA(t,e,n){return new dp({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Mw=class t extends qi{_toFieldTransform(e){return new Fo(e.path,new Or)}isEqual(e){return e instanceof t}},Aw=class t extends qi{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=HA(this,e,!0),i=this.Mu.map(o=>zo(o,n)),r=new Gi(i);return new Fo(e.path,r)}isEqual(e){return e instanceof t&&Og(this.Mu,e.Mu)}},Rw=class t extends qi{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=HA(this,e,!0),i=this.Mu.map(o=>zo(o,n)),r=new zi(i);return new Fo(e.path,r)}isEqual(e){return e instanceof t&&Og(this.Mu,e.Mu)}},Pw=class t extends qi{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Nr(e.serializer,VM(e.serializer,this.xu));return new Fo(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function Eb(t,e,n,i){let r=t.Fu(1,e,n);Cb("Data must be an object, but it was:",r,i);let o=[],s=Vt.empty();Ho(i,(c,u)=>{let d=Ib(e,c,n);u=xe(u);let f=r.Su(d);if(u instanceof au)o.push(d);else{let g=zo(u,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new hn(o);return new up(s,a,r.fieldTransforms)}function Db(t,e,n,i,r,o){let s=t.Fu(1,e,n),a=[Ow(e,i,n)],c=[r];if(o.length%2!=0)throw new k(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Ow(e,o[g])),c.push(o[g+1]);let u=[],d=Vt.empty();for(let g=a.length-1;g>=0;--g)if(!WA(u,a[g])){let _=a[g],D=c[g];D=xe(D);let x=s.Su(_);if(D instanceof au)u.push(_);else{let T=zo(D,x);T!=null&&(u.push(_),d.set(_,T))}}let f=new hn(u);return new up(d,f,s.fieldTransforms)}function GA(t,e,n,i=!1){return zo(n,t.Fu(i?4:3,e))}function zo(t,e){if(qA(t=xe(t)))return Cb("Unsupported field value:",e,t),zA(t,e);if(t instanceof qi)return function(i,r){if(!$A(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let c=zo(a,r.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=xe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return VM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Ke.fromDate(i);return{timestampValue:Ia(r.serializer,o)}}if(i instanceof Ke){let o=new Ke(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ia(r.serializer,o)}}if(i instanceof jo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof hi)return{bytesValue:WM(r.serializer,i._byteString)};if(i instanceof Ue){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ww(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${Ep(i)}`)}(t,e)}function zA(t,e){let n={};return vM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ho(t,(i,r)=>{let o=zo(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function qA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof jo||t instanceof hi||t instanceof Ue||t instanceof qi)}function Cb(t,e,n){if(!qA(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=Ep(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function Ow(t,e,n){if((e=xe(e))instanceof jn)return e._internalPath;if(typeof e=="string")return Ib(t,e);throw hp("Field path arguments must be of type string or ",t,!1,void 0,n)}var K3=new RegExp("[~\\*/\\[\\]]");function Ib(t,e,n){if(e.search(K3)>=0)throw hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jn(...e.split("."))._internalPath}catch{throw hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hp(t,e,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new k(P.INVALID_ARGUMENT,a+t+c)}function WA(t,e){return t.some(n=>n.isEqual(e))}var Uo=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Nw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Tp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Nw=class extends Uo{data(){return super.data()}};function Tp(t,e){return typeof e=="string"?Ib(t,e):e instanceof jn?e._internalPath:e._delegate._internalPath}function QA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cu=class{},$o=class extends cu{};function fi(t,e,...n){let i=[];e instanceof cu&&i.push(e),i=i.concat(n),function(o){let s=o.filter(c=>c instanceof kw).length,a=o.filter(c=>c instanceof fp).length;if(s>1||s>0&&a>0)throw new k(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var fp=class t extends $o{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return YA(e._query,n),new xt(e.firestore,e.converter,hv(e._query,n))}_parse(e){let n=Go(e.firestore);return function(o,s,a,c,u,d,f){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){sM(f,d);let _=[];for(let D of f)_.push(oM(c,o,D));g={arrayValue:{values:_}}}else g=oM(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||sM(f,d),g=GA(a,s,f,d==="in"||d==="not-in");return be.create(u,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Tb(t,e,n){let i=e,r=Tp("where",t);return fp._create(r,i,n)}var kw=class t extends cu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ne.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let c of a)YA(s,c),s=hv(s,c)}(e._query,n),new xt(e.firestore,e.converter,hv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Fw=class t extends $o{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,s){if(r.startAt!==null)throw new k(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new k(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new No(o,s)}(e._query,this._field,this._direction);return new xt(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new Ln(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function Sb(t,e="asc"){let n=e,i=Tp("orderBy",t);return Fw._create(i,n)}var pp=class t extends $o{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new xt(e.firestore,e.converter,Of(e._query,this._limit,this._limitType))}};function xb(t){return FA("limit",t),pp._create("limit",t,"F")}function Mb(t){return FA("limitToLast",t),pp._create("limitToLast",t,"L")}var gp=class t extends $o{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=KA(e,this.type,this._docOrFields,this._inclusive);return new xt(e.firestore,e.converter,function(r,o){return new Ln(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function Ab(...t){return gp._create("startAt",t,!0)}function Rb(...t){return gp._create("startAfter",t,!1)}var mp=class t extends $o{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=KA(e,this.type,this._docOrFields,this._inclusive);return new xt(e.firestore,e.converter,function(r,o){return new Ln(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function Pb(...t){return mp._create("endBefore",t,!1)}function Ob(...t){return mp._create("endAt",t,!0)}function KA(t,e,n,i){if(n[0]=xe(n[0]),n[0]instanceof Uo)return function(o,s,a,c,u){if(!c)throw new k(P.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of _a(o))if(f.field.isKeyField())d.push(Oo(s,c.key));else{let g=c.data.field(f.field);if(yp(g))throw new k(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let _=f.field.canonicalString();throw new k(P.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}d.push(g)}return new ui(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=Go(t.firestore);return function(s,a,c,u,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(P.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let _=[];for(let D=0;D<d.length;D++){let x=d[D];if(g[D].field.isKeyField()){if(typeof x!="string")throw new k(P.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!zw(s)&&x.indexOf("/")!==-1)throw new k(P.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);let T=s.path.child(Ce.fromString(x));if(!$.isDocumentKey(T))throw new k(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);let V=new $(T);_.push(Oo(a,V))}else{let T=GA(c,u,x);_.push(T)}}return new ui(_,f)}(t._query,t.firestore._databaseId,r,e,n,i)}}function oM(t,e,n){if(typeof(n=xe(n))=="string"){if(n==="")throw new k(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zw(e)&&n.indexOf("/")!==-1)throw new k(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Ce.fromString(n));if(!$.isDocumentKey(i))throw new k(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Oo(t,new $(i))}if(n instanceof Ue)return Oo(t,n._key);throw new k(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ep(n)}.`)}function sM(t,e){if(!Array.isArray(t)||t.length===0)throw new k(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YA(t,e){let n=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ka=class{convertValue(e,n="none"){switch(Po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Ho(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new jo(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=Hw(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){let n=Hi(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Ce.fromString(e);X(rA(i));let r=new Rr(i.get(1),i.get(3)),o=new $(i.popFirst(5));return r.isEqual(n)||it(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Sp(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var Vw=class extends ka{constructor(e){super(),this.firestore=e}convertBytes(e){return new hi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}};var $i=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Cn=class extends Uo{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Sr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(Tp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Sr=class extends Cn{data(e={}){return super.data(e)}},Un=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new $i(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Sr(this._firestore,this._userDataWriter,i.key,i,new $i(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new Sr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new $i(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Sr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new $i(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Y3(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Y3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function xp(t,e){return t instanceof Cn&&e instanceof Cn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Un&&e instanceof Un&&t._firestore===e._firestore&&Cp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Nb(t){t=Ie(t,Ue);let e=Ie(t.firestore,Ge);return OA(gt(e),t._key).then(n=>Hb(e,t,n))}var Wi=class extends ka{constructor(e){super(),this.firestore=e}convertBytes(e){return new hi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}};function kb(t){t=Ie(t,Ue);let e=Ie(t.firestore,Ge),n=gt(e),i=new Wi(e);return H3(n,t._key).then(r=>new Cn(e,i,t._key,r,new $i(r!==null&&r.hasLocalMutations,!0),t.converter))}function Fb(t){t=Ie(t,Ue);let e=Ie(t.firestore,Ge);return OA(gt(e),t._key,{source:"server"}).then(n=>Hb(e,t,n))}function Vb(t){t=Ie(t,xt);let e=Ie(t.firestore,Ge),n=gt(e),i=new Wi(e);return QA(t._query),NA(n,t._query).then(r=>new Un(e,i,t,r))}function Lb(t){t=Ie(t,xt);let e=Ie(t.firestore,Ge),n=gt(e),i=new Wi(e);return G3(n,t._query).then(r=>new Un(e,i,t,r))}function Bb(t){t=Ie(t,xt);let e=Ie(t.firestore,Ge),n=gt(e),i=new Wi(e);return NA(n,t._query,{source:"server"}).then(r=>new Un(e,i,t,r))}function Mp(t,e,n){t=Ie(t,Ue);let i=Ie(t.firestore,Ge),r=Sp(t.converter,e,n);return Ga(i,[Ip(Go(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,tt.none())])}function Ap(t,e,n,...i){t=Ie(t,Ue);let r=Ie(t.firestore,Ge),o=Go(r),s;return s=typeof(e=xe(e))=="string"||e instanceof jn?Db(o,"updateDoc",t._key,e,n,i):Eb(o,"updateDoc",t._key,e),Ga(r,[s.toMutation(t._key,tt.exists(!0))])}function jb(t){return Ga(Ie(t.firestore,Ge),[new Fr(t._key,tt.none())])}function Ub(t,e){let n=Ie(t.firestore,Ge),i=$a(t),r=Sp(t.converter,e);return Ga(n,[Ip(Go(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,tt.exists(!1))]).then(()=>i)}function Ha(t,...e){var n,i,r;t=xe(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Iw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Iw(e[s])){let f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[s+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let c,u,d;if(t instanceof Ue)u=Ie(t.firestore,Ge),d=Va(t._key.path),c={next:f=>{e[s]&&e[s](Hb(u,t,f))},error:e[s+1],complete:e[s+2]};else{let f=Ie(t,xt);u=Ie(f.firestore,Ge),d=f._query;let g=new Wi(u);c={next:_=>{e[s]&&e[s](new Un(u,g,f,_))},error:e[s+1],complete:e[s+2]},QA(t._query)}return function(g,_,D,x){let T=new Oa(x),V=new ru(_,T,D);return g.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return eb(yield Na(g),V)})),()=>{T.$a(),g.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return tb(yield Na(g),V)}))}}(gt(u),d,a,c)}function $b(t,e){return z3(gt(t=Ie(t,Ge)),Iw(e)?e:{next:e})}function Ga(t,e){return function(i,r){let o=new ut;return i.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return C3(yield ub(i),r,o)})),o.promise}(gt(t),e)}function Hb(t,e,n){let i=n.docs.get(e._key),r=new Wi(t);return new Cn(t,r,e._key,i,new $i(n.hasPendingWrites,n.fromCache),e.converter)}var J3={maxAttempts:5};var _p=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Go(e)}set(e,n,i){this._verifyNotCommitted();let r=Ir(e,this._firestore),o=Sp(r.converter,n,i),s=Ip(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,tt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=Ir(e,this._firestore),s;return s=typeof(n=xe(n))=="string"||n instanceof jn?Db(this._dataReader,"WriteBatch.update",o._key,n,i,r):Eb(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,tt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Ir(e,this._firestore);return this._mutations=this._mutations.concat(new Fr(n._key,tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ir(t,e){if((t=xe(t)).firestore!==e)throw new k(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Lw=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Go(n)}get(n){let i=Ir(n,this._firestore),r=new Vw(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return K();let s=o[0];if(s.isFoundDocument())return new Uo(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new Uo(this._firestore,r,i._key,null,i.converter);throw K()})}set(n,i,r){let o=Ir(n,this._firestore),s=Sp(o.converter,i,r),a=Ip(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(n,i,r,...o){let s=Ir(n,this._firestore),a;return a=typeof(i=xe(i))=="string"||i instanceof jn?Db(this._dataReader,"Transaction.update",s._key,i,r,o):Eb(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(n){let i=Ir(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Ir(e,this._firestore),i=new Wi(this._firestore);return super.get(e).then(r=>new Cn(this._firestore,i,n._key,r._document,new $i(!1,!1),n.converter))}};function Gb(t,e,n){t=Ie(t,Ge);let i=Object.assign(Object.assign({},J3),n);return function(o){if(o.maxAttempts<1)throw new k(P.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let c=new ut;return o.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){let u=yield j3(o);new bw(o.asyncQueue,u,a,s,c).Xa()})),c.promise}(gt(t),r=>e(new Lw(t,r)),i)}function zb(){return new au("deleteField")}function qb(){return new Mw("serverTimestamp")}function Wb(...t){return new Aw("arrayUnion",t)}function Qb(...t){return new Rw("arrayRemove",t)}function Kb(t){return new Pw("increment",t)}(function(e,n=!0){(function(r){Fa=r})(Ju),Wr(new Tn("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new Ge(new H0(i.getProvider("auth-internal")),new W0(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new k(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rr(u.options.projectId,d)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),mt(ax,"4.6.3",e),mt(ax,"4.6.3","esm2017")})();var Z3="@firebase/firestore-compat",X3="0.3.32";function t1(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function JA(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function ZA(){if(!wM())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Rp=class t{constructor(e){this._delegate=e}static fromBase64String(e){return ZA(),new t(hi.fromBase64String(e))}static fromUint8Array(e){return JA(),new t(hi.fromUint8Array(e))}toBase64(){return ZA(),this._delegate.toBase64()}toUint8Array(){return JA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Yb(t){return e4(t,["next","error","complete"])}function e4(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var Jb=class{enableIndexedDbPersistence(e,n){return pb(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return gb(e._delegate)}clearIndexedDbPersistence(e){return mb(e._delegate)}},Pp=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Rr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&En("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){Dp(this._delegate,e,n,i)}enableNetwork(){return yb(this._delegate)}disableNetwork(){return vb(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,hb("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return _b(this._delegate)}onSnapshotsInSync(e){return $b(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wa(this,gu(this._delegate,e))}catch(n){throw Wt(n,"collection()","Firestore.collection()")}}doc(e){try{return new pi(this,$a(this._delegate,e))}catch(n){throw Wt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ko(this,fb(this._delegate,e))}catch(n){throw Wt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Gb(this._delegate,n=>e(new Op(this,n)))}batch(){return gt(this._delegate),new Np(new _p(this._delegate,e=>Ga(this._delegate,e)))}loadBundle(e){return wb(this._delegate,e)}namedQuery(e){return bb(this._delegate,e).then(n=>n?new Ko(this,n):null)}},za=class extends ka{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rp(new hi(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return pi.forKey(n,this.firestore,null)}};function t4(t){Bw(t)}var Op=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new za(e)}get(e){let n=qo(e);return this._delegate.get(n).then(i=>new Wo(this._firestore,new Cn(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=qo(e);return i?(t1("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=qo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=qo(e);return this._delegate.delete(n),this}},Np=class{constructor(e){this._delegate=e}set(e,n,i){let r=qo(e);return i?(t1("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=qo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=qo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},qa=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new Sr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qo(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new za(e),n),r.set(n,o)),o}};qa.INSTANCES=new WeakMap;var pi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new za(e)}static forPath(e,n,i){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Ue(n._delegate,i,new $(e)))}static forKey(e,n,i){return new t(n,new Ue(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Wa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wa(this.firestore,gu(this._delegate,e))}catch(n){throw Wt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=xe(e),e instanceof Ue?mu(this._delegate,e):!1}set(e,n){n=t1("DocumentReference.set",n);try{return n?Mp(this._delegate,e,n):Mp(this._delegate,e)}catch(i){throw Wt(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?Ap(this._delegate,e):Ap(this._delegate,e,n,...i)}catch(r){throw Wt(r,"updateDoc()","DocumentReference.update()")}}delete(){return jb(this._delegate)}onSnapshot(...e){let n=XA(e),i=eR(e,r=>new Wo(this.firestore,new Cn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return Ha(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=kb(this._delegate):e?.source==="server"?n=Fb(this._delegate):n=Nb(this._delegate),n.then(i=>new Wo(this.firestore,new Cn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Wt(t,e,n){return t.message=t.message.replace(e,n),t}function XA(t){for(let e of t)if(typeof e=="object"&&!Yb(e))return e;return{}}function eR(t,e){var n,i;let r;return Yb(t[0])?r=t[0]:Yb(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Wo=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new pi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return xp(this._delegate,e._delegate)}},Qo=class extends Wo{data(e){let n=this._delegate.data(e);return this._delegate._converter||aM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Ko=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new za(e)}where(e,n,i){try{return new t(this.firestore,fi(this._delegate,Tb(e,n,i)))}catch(r){throw Wt(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,fi(this._delegate,Sb(e,n)))}catch(i){throw Wt(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,fi(this._delegate,xb(e)))}catch(n){throw Wt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,fi(this._delegate,Mb(e)))}catch(n){throw Wt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,fi(this._delegate,Ab(...e)))}catch(n){throw Wt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,fi(this._delegate,Rb(...e)))}catch(n){throw Wt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,fi(this._delegate,Pb(...e)))}catch(n){throw Wt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,fi(this._delegate,Ob(...e)))}catch(n){throw Wt(n,"endAt()","Query.endAt()")}}isEqual(e){return Cp(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=Lb(this._delegate):e?.source==="server"?n=Bb(this._delegate):n=Vb(this._delegate),n.then(i=>new _u(this.firestore,new Un(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=XA(e),i=eR(e,r=>new _u(this.firestore,new Un(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return Ha(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Zb=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Qo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},_u=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ko(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Zb(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Qo(this._firestore,i))})}isEqual(e){return xp(this._delegate,e._delegate)}},Wa=class t extends Ko{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new pi(this.firestore,e):null}doc(e){try{return e===void 0?new pi(this.firestore,$a(this._delegate)):new pi(this.firestore,$a(this._delegate,e))}catch(n){throw Wt(n,"doc()","CollectionReference.doc()")}}add(e){return Ub(this._delegate,e).then(n=>new pi(this.firestore,n))}isEqual(e){return mu(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function qo(t){return Ie(t,Ue)}var Xb=class t{constructor(...e){this._delegate=new jn(...e)}static documentId(){return new t(rt.keyField().canonicalString())}isEqual(e){return e=xe(e),e instanceof jn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var e1=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=qb();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=zb();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=Wb(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=Qb(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=Kb(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var n4={Firestore:Pp,GeoPoint:jo,Timestamp:Ke,Blob:Rp,Transaction:Op,WriteBatch:Np,DocumentReference:pi,DocumentSnapshot:Wo,Query:Ko,QueryDocumentSnapshot:Qo,QuerySnapshot:_u,CollectionReference:Wa,FieldPath:Xb,FieldValue:e1,setLogLevel:t4,CACHE_SIZE_UNLIMITED:VA};function i4(t,e){t.INTERNAL.registerComponent(new Tn("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},n4)))}function r4(t){i4(t,(e,n)=>new Pp(e,n,new Jb)),t.registerVersion(Z3,X3)}r4(Ut);function o4(t,e=Xi){return new re(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function tR(t,e){return o4(t,e)}function s4(t,e){return tR(t,e).pipe(Di(void 0),vs(),Z(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function r1(t,e){return tR(t,e).pipe(Z(n=>({payload:n,type:"query"})))}var kp=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=rR(i,n);return new Vp(r,o,this.afs)}snapshotChanges(){return s4(this.ref,this.afs.schedulers.outsideAngular).pipe(bt)}valueChanges(e={}){return this.snapshotChanges().pipe(Z(({payload:n})=>e.idField?Re(z({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return me(this.ref.get(e)).pipe(bt)}};function Fp(t,e){return r1(t,e).pipe(Di(void 0),vs(),Z(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let u=o.find(f=>f.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function nR(t,e,n){return Fp(t,n).pipe(sr((i,r)=>a4(i,r.map(o=>o.payload),e),[]),Ac(),Z(i=>i.map(r=>({type:r.type,payload:r}))))}function a4(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=c4(t,i))}),t}function n1(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function c4(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return n1(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return n1(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return n1(t,e.oldIndex,1);break}return t}function iR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Vp=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=Fp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Z(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(Di(void 0),vs(),We(([i,r])=>r.length>0||!i),Z(([,i])=>i),bt)}auditTrail(e){return this.stateChanges(e).pipe(sr((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=iR(e);return nR(this.query,n,this.afs.schedulers.outsideAngular).pipe(bt)}valueChanges(e={}){return r1(this.query,this.afs.schedulers.outsideAngular).pipe(Z(n=>n.payload.docs.map(i=>e.idField?Re(z({},i.data()),{[e.idField]:i.id}):i.data())),bt)}get(e){return me(this.query.get(e)).pipe(bt)}add(e){return this.ref.add(e)}doc(e){return new kp(this.ref.doc(e),this.afs)}},i1=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Fp(this.query,this.afs.schedulers.outsideAngular).pipe(bt):Fp(this.query,this.afs.schedulers.outsideAngular).pipe(Z(n=>n.filter(i=>e.indexOf(i.type)>-1)),We(n=>n.length>0),bt)}auditTrail(e){return this.stateChanges(e).pipe(sr((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=iR(e);return nR(this.query,n,this.afs.schedulers.outsideAngular).pipe(bt)}valueChanges(e={}){return r1(this.query,this.afs.schedulers.outsideAngular).pipe(Z(i=>i.payload.docs.map(r=>e.idField?z({[e.idField]:r.id},r.data()):r.data())),bt)}get(e){return me(this.query.get(e)).pipe(bt)}},l4=new G("angularfire2.enableFirestorePersistence"),u4=new G("angularfire2.firestore.persistenceSettings"),d4=new G("angularfire2.firestore.settings"),h4=new G("angularfire2.firestore.use-emulator");function rR(t,e=n=>n){return{query:e(t),ref:t}}var Ur=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,a,c,u,d,f,g,_,D,x,T,V,j){this.schedulers=c;let O=ia(n,a,i),U=d;f&&M0(O,a,g,D,x,T,_,V),[this.firestore,this.persistenceEnabled$]=ra(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{let ee=a.runOutsideAngular(()=>O.firestore());if(o&&ee.settings(o),U&&ee.useEmulator(...U),r&&!_o(s)){let Y=()=>{try{return me(ee.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(b){return typeof console<"u"&&console.warn(b),J(!1)}};return[ee,a.runOutsideAngular(Y)]}else return[ee,J(!1)]},[o,U,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=rR(r,i),a=this.schedulers.ngZone.run(()=>o);return new Vp(a,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new i1(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new kp(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(N(wr),N(na,8),N(l4,8),N(d4,8),N(yt),N(fe),N(kn),N(u4,8),N(h4,8),N(Vn,8),N(D0,8),N(C0,8),N(I0,8),N(T0,8),N(S0,8),N(x0,8),N(wn,8))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Qa=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.afs=r,this.router=o}signUp(i,r,o,s){this.afAuth.createUserWithEmailAndPassword(i,r).then(a=>{let c=a.user;if(c!==null){let{uid:u}=c;o?this.afs.collection("users").doc(u).set({username:s,avatarUrl:o}):this.afs.collection("users").doc(u).set({username:s}),console.log("Registration successful"),this.router.navigate(["/home"])}}).catch(a=>{console.error("Registration error:",a)})}login(i,r){this.afAuth.signInWithEmailAndPassword(i,r).then(()=>{console.log("login successful"),this.router.navigate(["/home"])}).catch(o=>{console.error("login error:",o)})}logout(){this.afAuth.signOut().then(()=>{console.log("signout successful"),this.router.navigate(["/"])}).catch(i=>{console.error("signout error:",i)})}get isAuthenticated(){return this.afAuth.currentUser!==null}};e.\u0275fac=function(r){return new(r||e)(N(Vn),N(Ur),N(ii))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hR=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(se(ho),se(en))},e.\u0275dir=sn({type:e});let t=e;return t})(),f4=(()=>{let e=class e extends hR{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Vs(e)))(o||e)}})(),e.\u0275dir=sn({type:e,features:[fo]});let t=e;return t})(),fR=new G("");var p4={provide:fR,useExisting:Os(()=>Ya),multi:!0};function g4(){let t=Xn()?Xn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var m4=new G(""),Ya=(()=>{let e=class e extends hR{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!g4())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(se(ho),se(en),se(m4,8))},e.\u0275dir=sn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&pt("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[xh([p4]),fo]});let t=e;return t})();var _4=new G(""),y4=new G("");function pR(t){return t!=null}function gR(t){return go(t)?me(t):t}function mR(t){let e={};return t.forEach(n=>{e=n!=null?z(z({},e),n):e}),Object.keys(e).length===0?null:e}function _R(t,e){return e.map(n=>n(t))}function v4(t){return!t.validate}function yR(t){return t.map(e=>v4(e)?e:n=>e.validate(n))}function w4(t){if(!t)return null;let e=t.filter(pR);return e.length==0?null:function(n){return mR(_R(n,e))}}function vR(t){return t!=null?w4(yR(t)):null}function b4(t){if(!t)return null;let e=t.filter(pR);return e.length==0?null:function(n){let i=_R(n,e).map(gR);return Jg(i).pipe(Z(mR))}}function wR(t){return t!=null?b4(yR(t)):null}function oR(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function E4(t){return t._rawValidators}function D4(t){return t._rawAsyncValidators}function s1(t){return t?Array.isArray(t)?t:[t]:[]}function jp(t,e){return Array.isArray(t)?t.includes(e):t===e}function sR(t,e){let n=s1(e);return s1(t).forEach(r=>{jp(n,r)||n.push(r)}),n}function aR(t,e){return s1(e).filter(n=>!jp(t,n))}var Up=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},a1=class extends Up{get formDirective(){return null}get path(){return null}},wu=class extends Up{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},c1=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},C4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cZ=Re(z({},C4),{"[class.ng-submitted]":"isSubmitted"}),$p=(()=>{let e=class e extends c1{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(se(wu,2))},e.\u0275dir=sn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&$s("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[fo]});let t=e;return t})();var yu="VALID",Bp="INVALID",Ka="PENDING",vu="DISABLED";function I4(t){return(Hp(t)?t.validators:t)||null}function T4(t){return Array.isArray(t)?vR(t):t||null}function S4(t,e){return(Hp(e)?e.asyncValidators:t)||null}function x4(t){return Array.isArray(t)?wR(t):t||null}function Hp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var l1=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yu}get invalid(){return this.status===Bp}get pending(){return this.status==Ka}get disabled(){return this.status===vu}get enabled(){return this.status!==vu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(sR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aR(e,this._rawAsyncValidators))}hasValidator(e){return jp(this._rawValidators,e)}hasAsyncValidator(e){return jp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ka,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=vu,this.errors=null,this._forEachChild(i=>{i.disable(Re(z({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Re(z({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=yu,this._forEachChild(i=>{i.enable(Re(z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Re(z({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yu||this.status===Ka)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vu:yu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ka,this._hasOwnPendingAsyncValidator=!0;let n=gR(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?vu:this.errors?Bp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ka)?Ka:this._anyControlsHaveStatus(Bp)?Bp:yu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Hp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=T4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=x4(this._rawAsyncValidators)}};var bR=new G("CallSetDisabledState",{providedIn:"root",factory:()=>u1}),u1="always";function M4(t,e){return[...e.path,t]}function A4(t,e,n=u1){P4(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),O4(t,e),k4(t,e),N4(t,e),R4(t,e)}function cR(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function R4(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function P4(t,e){let n=E4(t);e.validator!==null?t.setValidators(oR(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=D4(t);e.asyncValidator!==null?t.setAsyncValidators(oR(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();cR(e._rawValidators,r),cR(e._rawAsyncValidators,r)}function O4(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ER(t,e)})}function N4(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ER(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ER(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function k4(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function F4(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function V4(t){return Object.getPrototypeOf(t.constructor)===f4}function L4(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===Ya?n=o:V4(o)?i=o:r=o}),r||i||n||null}function lR(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function uR(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var B4=class extends l1{constructor(e=null,n,i){super(I4(n),S4(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(uR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){uR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var j4={provide:wu,useExisting:Os(()=>bu)},dR=Promise.resolve(),bu=(()=>{let e=class e extends wu{constructor(i,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new B4,this._registered=!1,this.name="",this.update=new Qe,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=L4(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),F4(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){A4(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){dR.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&mo(r);dR.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?M4(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(se(a1,9),se(_4,10),se(y4,10),se(fR,10),se(Zn,8),se(bR,8))},e.\u0275dir=sn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[kt.None,"disabled","isDisabled"],model:[kt.None,"ngModel","model"],options:[kt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[xh([j4]),fo,dr]});let t=e;return t})();var U4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var DR=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:bR,useValue:i.callSetDisabledState??u1}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({imports:[U4]});let t=e;return t})();var IR=(()=>{let e=class e{constructor(i){this.authService=i,this.email="",this.password=""}login(){this.authService.login(this.email,this.password)}get isAuthenticated(){return this.authService.isAuthenticated}};e.\u0275fac=function(r){return new(r||e)(se(Qa))},e.\u0275cmp=Le({type:e,selectors:[["app-login"]],decls:27,vars:2,consts:[["lang","en"],["property","og:title","content","Recipe Match - Login"],["name","viewport","content","width=device-width, initial-scale=1.0"],["charset","utf-8"],["property","twitter:card","content","summary_large_image"],[1,"login-container"],[1,"login-frame43-login02"],["alt","LoginFrame7015","src","assets/img/loginBackground.png",1,"login-login-frame"],["type","text","placeholder","Email",1,"login-input-username",3,"ngModelChange","ngModel"],[1,"login-text"],["type","password","placeholder","Password",1,"login-input-pwd",3,"ngModelChange","ngModel"],[1,"login-text2"],[1,"error-message"],[1,"login-button-confirm-login",3,"click"]],template:function(r,o){r&1&&(W(0,"html",0)(1,"head")(2,"title"),ce(3,"Recipe Match - Login"),Q(),we(4,"meta",1)(5,"meta",2)(6,"meta",3)(7,"meta",4),Q(),W(8,"body")(9,"div")(10,"div",5)(11,"div",6),we(12,"img",7),W(13,"label")(14,"input",8),Vi("ngModelChange",function(a){return fr(o.email,a)||(o.email=a),a}),Q()(),W(15,"span",9)(16,"span"),ce(17,"Email"),Q()(),W(18,"label")(19,"input",10),Vi("ngModelChange",function(a){return fr(o.password,a)||(o.password=a),a}),Q()(),W(20,"span",11)(21,"span"),ce(22,"Password"),Q()(),W(23,"span",12),we(24,"span"),Q(),W(25,"button",13),pt("click",function(){return o.login()}),ce(26,"Login"),Q()()()()()()),r&2&&(je(14),Fi("ngModel",o.email),je(5),Fi("ngModel",o.password))},dependencies:[Ya,$p,bu],styles:["@media only screen and (min-width: 1192px){.login-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100%;align-items:center;flex-direction:column;background-color:#fff5e4}.login-frame43-login02[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;overflow:hidden;position:relative;align-items:flex-start;flex-shrink:0}.login-login-frame[_ngcontent-%COMP%]{top:0;left:30%;width:40vw;height:100%;position:absolute}.login-text[_ngcontent-%COMP%]{top:25vh;left:36vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text2[_ngcontent-%COMP%]{top:40vh;left:36vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.error-message[_ngcontent-%COMP%]{top:60vh;left:39%;right:40%;color:#fff;height:auto;position:absolute;font-size:2vh;font-style:Regular;text-align:center;font-family:Inter}.login-button-confirm-login[_ngcontent-%COMP%]{top:70vh;left:42%;width:15vw;height:3vh;font-size:2vh;text-align:center;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#d40121;color:#fff5e4;transition-duration:.4s;border:none;margin:4px 2px;cursor:pointer;display:inline-block;padding:0 20px}.login-button-confirm-login[_ngcontent-%COMP%]:hover{background-color:coral}.login-input-pwd[_ngcontent-%COMP%]{top:45vh;left:35vw;width:30vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-username[_ngcontent-%COMP%]{top:30vh;left:35vw;width:30vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}}@media only screen and (min-width: 600px) and (max-width: 1191px){.login-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100vh;align-items:center;flex-direction:column;background-color:#fff5e4}.login-frame43-login02[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;overflow:hidden;position:relative;align-items:flex-start;flex-shrink:0}.login-login-frame[_ngcontent-%COMP%]{top:0;left:25%;width:50vw;height:100%;position:absolute}.login-button-confirm-login[_ngcontent-%COMP%]{top:70vh;left:42%;width:15vw;height:3vh;font-size:2vh;text-align:center;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#d9b68b;color:#680d0d;transition-duration:.4s;border:none;margin:4px 2px;cursor:pointer;display:inline-block;padding:0 20px}.login-button-confirm-login[_ngcontent-%COMP%]:hover{background-color:coral}.login-input-username[_ngcontent-%COMP%]{top:30vh;left:31vw;width:38vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-pwd[_ngcontent-%COMP%]{top:45vh;left:31vw;width:38vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-text[_ngcontent-%COMP%]{top:25vh;left:32vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text2[_ngcontent-%COMP%]{top:40vh;left:32vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.error-message[_ngcontent-%COMP%]{top:60vh;left:39%;right:40%;color:#fff;height:auto;position:absolute;font-size:2vh;font-style:Regular;text-align:center;font-family:Inter}}@media only screen and (max-width: 600px){.login-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100vh;align-items:center;flex-direction:column;background-color:#fff5e4}.login-frame43-login02[_ngcontent-%COMP%]{width:100%;height:800px;display:flex;overflow:hidden;position:relative;align-items:flex-start;flex-shrink:0}.login-login-frame[_ngcontent-%COMP%]{top:0;left:0;width:625px;height:800px;position:absolute}.login-button-confirm-login[_ngcontent-%COMP%]{top:527px;left:120px;width:111px;height:25px;font-size:18px;text-align:center;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#d9b68b;color:#ff9494;transition-duration:.4s;border:none;margin:4px 2px;cursor:pointer;display:inline-block;padding:0 20px}.login-button-confirm-login[_ngcontent-%COMP%]:hover{background-color:coral}.login-input-username[_ngcontent-%COMP%]{top:236px;left:62px;width:225px;height:20px;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-pwd[_ngcontent-%COMP%]{top:297px;left:62px;width:225px;height:20px;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-text[_ngcontent-%COMP%]{top:209px;left:69px;color:#fff;height:auto;position:absolute;font-size:18px;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text2[_ngcontent-%COMP%]{top:270px;left:69px;color:#fff;height:auto;position:absolute;font-size:18px;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.error-message[_ngcontent-%COMP%]{top:393px;left:45px;right:45px;color:#fff;height:auto;position:absolute;font-size:18px;font-style:Regular;text-align:center;font-family:Inter}}"]});let t=e;return t})();var TR=(()=>{let e=class e{constructor(i,r){this.afAuth=i,this.afs=r,this.userData={},this.userDataSubject=new st(null),this.afAuth.authState.subscribe(o=>{o?this.afs.collection("users").doc(o.uid).valueChanges().subscribe(s=>{this.userData=s,this.userDataSubject.next(s)}):(this.userData=null,this.userDataSubject.next(null))})}getUserData(){return this.userDataSubject.asObservable()}};e.\u0275fac=function(r){return new(r||e)(N(Vn),N(Ur))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function H4(t,e){if(t&1){let n=Hs();W(0,"div"),we(1,"img",5),W(2,"button",6),pt("click",function(){ks(n);let r=Yn();return Fs(r.logout())}),ce(3,"Logout"),Q(),W(4,"button",7),ce(5),Q()()}if(t&2){let n=Yn();je(),cn("src",n.userData.avatarUrl,Oi),je(4),Jn(n.userData.username)}}var SR=(()=>{let e=class e{constructor(i,r){this.authService=i,this.userService=r,this.userData={}}ngOnInit(){this.userService.getUserData().subscribe(i=>{this.userData=i})}logout(){this.authService.logout()}};e.\u0275fac=function(r){return new(r||e)(se(Qa),se(TR))},e.\u0275cmp=Le({type:e,selectors:[["app-header"]],decls:7,vars:1,consts:[["lang","en","xmlns","http://www.w3.org/1999/html"],["charset","UTF-8"],[1,"header-container"],[4,"ngIf"],[1,"header-banner"],["alt","Avatar",1,"header-logo-placeholder",3,"src"],[1,"rounded-button","rounded-button-login",3,"click"],[1,"rounded-button","rounded-button-user-name"]],template:function(r,o){r&1&&(W(0,"html",0),we(1,"meta",1),W(2,"title"),ce(3,"Header"),Q(),W(4,"div",2),po(5,H4,6,2,"div",3),we(6,"div",4),Q()()),r&2&&(je(5),cn("ngIf",o.userData))},dependencies:[Lh],styles:["@media only screen and (min-width: 1192px){.header-container[_ngcontent-%COMP%]{width:100%;height:84px;display:flex;position:relative;align-items:flex-start;flex-direction:column}.header-logo-placeholder[_ngcontent-%COMP%]{top:14px;left:58px;width:53px;height:53px;position:absolute;align-self:center}.header-banner[_ngcontent-%COMP%]{width:100%;height:100%;align-self:center;background-color:#ff9494}.rounded-button[_ngcontent-%COMP%]{width:186px;height:25px;background-color:#ffe3e1;color:#d40121;padding:0 20px;border:none;border-radius:15px;text-align:center;display:inline-block;font-size:20px;margin:4px 2px;line-height:25px;transition-duration:.4s}.rounded-button-login[_ngcontent-%COMP%]{top:28px;right:143px;position:absolute}.rounded-button-user-name[_ngcontent-%COMP%]{top:28px;left:143px;position:absolute}.rounded-button-login[_ngcontent-%COMP%]:hover{background-color:#ffd1d1;cursor:pointer}}@media only screen and (min-width: 600px) and (max-width: 1191px){.header-container[_ngcontent-%COMP%]{width:100%;height:80px;display:flex;position:relative;align-items:flex-start;flex-direction:column}.header-logo-placeholder[_ngcontent-%COMP%]{top:14px;left:58px;width:53px;height:53px;position:absolute;align-self:center}.header-banner[_ngcontent-%COMP%]{width:100%;height:100%;align-self:center;background-color:#800020}.rounded-button[_ngcontent-%COMP%]{width:186px;height:25px;background-color:#ffe3e1;color:#fff;padding:0 20px;border:none;border-radius:15px;text-align:center;display:inline-block;font-size:16px;margin:4px 2px;line-height:25px;transition-duration:.4s}.rounded-button-login[_ngcontent-%COMP%]{top:28px;right:143px;position:absolute}.rounded-button-user-name[_ngcontent-%COMP%]{top:28px;left:143px;position:absolute}.rounded-button-login[_ngcontent-%COMP%]:hover{background-color:#ffd1d1;cursor:pointer}}@media only screen and (max-width: 600px){.header-container[_ngcontent-%COMP%]{width:100%;height:69px;display:flex;position:relative;align-items:flex-start;flex-direction:column}.header-logo-placeholder[_ngcontent-%COMP%]{top:11px;left:30px;width:48px;height:48px;position:absolute;align-self:center}.header-banner[_ngcontent-%COMP%]{width:100%;height:100%;align-self:center;background-color:#800020}.rounded-button[_ngcontent-%COMP%]{width:150px;height:25px;background-color:#ffe3e1;color:#fff;padding:0 20px;border:none;border-radius:15px;text-align:center;font-size:16px;margin:4px 2px;line-height:25px;transition-duration:.4s}.rounded-button-user-name[_ngcontent-%COMP%]{display:none}.rounded-button-login[_ngcontent-%COMP%]{top:30%;right:30px;position:absolute}.rounded-button-login[_ngcontent-%COMP%]:hover{background-color:#ffd1d1;cursor:pointer}}"]});let t=e;return t})();var xR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Le({type:e,selectors:[["app-footer"]],decls:5,vars:0,consts:[["lang","en"],[1,"footer-container","footer-root-class-name1"],[1,"footer-text"]],template:function(r,o){r&1&&(W(0,"html",0)(1,"footer",1)(2,"span",2)(3,"span"),ce(4,"\xA9 2024 Your recipes Site. Created by: Hania - Magda"),Q()()()())},styles:["@media only screen and (min-width: 1192px){.footer-container[_ngcontent-%COMP%]{width:100%;height:5vh;max-height:5vh;display:grid;position:relative;align-items:flex-start;flex-direction:column;z-index:2;background-color:#ff9494}.footer-footer[_ngcontent-%COMP%]{width:100%;height:100%;z-index:2}.footer-text[_ngcontent-%COMP%]{color:#fff;margin-top:1.5vh;margin-left:40%;position:static;font-size:2vh;font-family:JetBrains Mono;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none;z-index:2}}@media only screen and (min-width: 600px) and (max-width: 1191px){.footer-container[_ngcontent-%COMP%]{width:100%;height:46px;max-height:46px;display:grid;position:relative;align-items:flex-start;flex-direction:column;z-index:2}.footer-footer[_ngcontent-%COMP%]{width:100%;height:100%;z-index:2}.footer-text[_ngcontent-%COMP%]{top:11px;left:624px;color:#fff;height:auto;margin:auto;position:static;font-size:16px;align-self:center;text-align:left;font-family:Jolly Lodger;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none;z-index:2}}@media only screen and (max-width: 600px){.footer-container[_ngcontent-%COMP%]{width:100%;height:31px;bottom:0;max-height:46px;display:grid;position:relative;align-items:flex-start;flex-direction:column}.footer-footer[_ngcontent-%COMP%]{width:100%;height:100%}.footer-text[_ngcontent-%COMP%]{top:8px;left:48px;color:#757575;height:auto;margin:auto;position:static;font-size:14px;align-self:center;text-align:left;font-family:Jolly Lodger;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}}"]});let t=e;return t})();var MR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Le({type:e,selectors:[["app-menu"]],decls:21,vars:0,consts:[["lang","en"],["charset","UTF-8"],[1,"menu-options-frame"],["routerLink","/home",1,"button-rounded","button-home"],["routerLink","/liked",1,"button-rounded","button-liked"],["routerLink","/shake",1,"button-rounded","button-connect"],["role","navigation",1,"menu2"],["id","menuToggle"],["type","checkbox"],["id","menu"],["routerLink","/home",1,"button-roundedP","button-homeP"],["routerLink","/liked",1,"button-roundedP","button-likedP"],["routerLink","/shake",1,"button-roundedP","button-connectP"],["routerLink","/shake",1,"button-roundedP","button-shake"]],template:function(r,o){r&1&&(W(0,"html",0),we(1,"meta",1),W(2,"div",2)(3,"button",3),ce(4,"Home"),Q(),W(5,"button",4),ce(6,"Liked List"),Q(),W(7,"button",5),ce(8,"Random"),Q()(),W(9,"nav",6)(10,"div",7),we(11,"input",8),W(12,"ul",9)(13,"button",10),ce(14,"Home"),Q(),W(15,"button",11),ce(16,"Liked List"),Q(),W(17,"button",12),ce(18,"Get random recipe"),Q(),W(19,"button",13),ce(20,"Shake It!"),Q()()()()())},dependencies:[af],styles:["@media only screen and (min-width: 1192px){.menu2[_ngcontent-%COMP%]{display:none}.menu-container[_ngcontent-%COMP%]{width:32vh;height:100%;display:flex;align-items:flex-start;flex-direction:column;left:0;z-index:1}.menu-options-frame[_ngcontent-%COMP%]{left:-3px;width:15vw;top:84px;bottom:46px;height:83.5vh;min-height:83.5vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;background-color:#ffd1d1}.button-home[_ngcontent-%COMP%]{top:4vh;position:absolute}.button-liked[_ngcontent-%COMP%]{top:14vh;position:absolute}.button-connect[_ngcontent-%COMP%]{top:24vh;position:absolute}.button-rounded[_ngcontent-%COMP%]{width:11vw;height:7vh;font-size:3vh;text-align:center;border-radius:15px;background-color:#fff5e4;margin:2vh;cursor:pointer;transition-duration:.4s;display:inline-block;color:#680d0d;padding:20px;border:none;left:12%}.button-rounded[_ngcontent-%COMP%]:hover{background-color:#ff9494}}@media only screen and (min-width: 600px) and (max-width: 1191px){.menu2[_ngcontent-%COMP%]{display:none}.menu-container[_ngcontent-%COMP%]{width:232px;height:700px;display:flex;align-items:flex-start;flex-direction:column;left:0;z-index:1}.menu-options-frame[_ngcontent-%COMP%]{left:-3px;width:232px;top:80px;bottom:46px;height:700px;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;background-color:#d90416}.button-home[_ngcontent-%COMP%]{top:76px;left:23px;position:absolute}.button-liked[_ngcontent-%COMP%]{top:158px;left:23px;position:absolute}.button-connect[_ngcontent-%COMP%]{top:240px;left:23px;position:absolute}.button-rounded[_ngcontent-%COMP%]{width:186px;height:44px;font-size:20px;text-align:center;border-radius:15px;background-color:#d9b68b;margin:4px 2px;cursor:pointer;transition-duration:.4s;display:inline-block;color:#680d0d;padding:0 20px;border:none}.button-rounded[_ngcontent-%COMP%]:hover{background-color:coral}}@media only screen and (max-width: 600px){.menu-container[_ngcontent-%COMP%]{width:360px;height:245px;display:none;top:69px;align-items:flex-start;flex-direction:column;left:0}.menu-options-frame[_ngcontent-%COMP%]{left:0;top:69px;bottom:46px;width:360px;height:245px;display:none;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;background-color:#d90416}.button-home[_ngcontent-%COMP%]{top:96px;left:41px;position:absolute;display:none}.button-liked[_ngcontent-%COMP%]{top:174px;left:41px;position:absolute;display:none}.button-connect[_ngcontent-%COMP%]{top:250px;left:41px;position:absolute;display:none}.button-rounded[_ngcontent-%COMP%]{width:279px;height:25px;font-size:20px;text-align:center;border-radius:15px;background-color:#d9b68b;margin:4px 2px;cursor:pointer;transition-duration:.4s;display:none;color:#680d0d;padding:0 20px;border:none}.button-rounded[_ngcontent-%COMP%]:hover{background-color:coral}.button-homeP[_ngcontent-%COMP%]{top:56px;left:23px;position:absolute}.button-likedP[_ngcontent-%COMP%]{top:138px;left:23px;position:absolute}.button-connectP[_ngcontent-%COMP%]{top:220px;left:23px;position:absolute}.button-shake[_ngcontent-%COMP%]{top:302px;left:23px;position:absolute}.button-roundedP[_ngcontent-%COMP%]{width:146px;height:50px;font-size:20px;text-align:center;border-radius:15px;background-color:#d9b68b;margin:4px 2px;cursor:pointer;transition-duration:.4s;display:inline-block;color:#680d0d;padding:0 20px;border:none;left:26px}#menuToggle[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;top:25px;left:25px;z-index:1;-webkit-user-select:none;user-select:none}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:flex;position:absolute;top:-784px;left:5px;width:48px;height:48px;cursor:pointer;opacity:0;z-index:2}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;width:29px;height:2px;margin-bottom:5px;position:relative;background:#fff;border-radius:3px;z-index:1;transform-origin:5px 0px;transition:transform .5s cubic-bezier(.77,.2,.05,1),background .5s cubic-bezier(.77,.2,.05,1),opacity .55s ease;top:-642px;left:0}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{transform-origin:0% 0%}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-last-child(2){transform-origin:0% 100%}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]{opacity:1;transform:rotate(45deg) translate(-3px,-1px);background:#36383f}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-last-child(3){opacity:0;transform:rotate(0) scale(.2)}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-last-child(2){transform:rotate(-45deg) translateY(-1px)}#menu[_ngcontent-%COMP%]{position:absolute;width:180px;height:400px;margin:-50px 0 0 -50px;padding:125px 50px 50px;background-color:#800020;-webkit-font-smoothing:antialiased;transform-origin:0% 0%;transform:translate(-100%);transition:transform .5s cubic-bezier(.77,.2,.05,1);top:-676px;left:0;border-bottom-left-radius:5px;border-bottom-right-radius:30px}#menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0;transition-delay:2s}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ ul[_ngcontent-%COMP%]{transform:none}}"]});let t=e;return t})();var AR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Le({type:e,selectors:[["app-footer-header-menu-layout"]],decls:5,vars:0,template:function(r,o){r&1&&(we(0,"app-header")(1,"router-outlet")(2,"app-footer"),W(3,"app-menu"),ce(4,"Menu"),Q())},dependencies:[yl,SR,xR,MR]});let t=e;return t})();var WH="auth";var Gp=class{constructor(){return Cl(WH)}};var zp=function(){return zp=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},zp.apply(this,arguments)};var KH={includeMetadataChanges:!1};function RR(t,e){return e===void 0&&(e=KH),new re(function(n){var i=Ha(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function PR(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:zp(zp({},i),(n={},n[e.idField]=t.id,n))}function OR(t){return RR(t,{includeMetadataChanges:!0}).pipe(Z(function(e){return e.docs}))}function NR(t,e){return e===void 0&&(e={}),OR(t).pipe(Z(function(n){return n.map(function(i){return PR(i,e)})}))}var Yo=class{constructor(e){return e}},kR="firestore",d1=class{constructor(){return Cl(kR)}};var h1=new G("angularfire2.firestore-instances");function YH(t,e){let n=d0(kR,t,e);return n&&new Yo(n)}function JH(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Yo(i)}}var ZH={provide:d1,deps:[[new on,h1]]},XH={provide:Yo,useFactory:YH,deps:[[new on,h1],Do]},e5=(()=>{class t{constructor(){mt("angularfire",Nn.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=de({type:t});static \u0275inj=ue({providers:[XH,ZH]})}return t})();function FR(t,...e){return{ngModule:e5,providers:[{provide:h1,useFactory:JH(t),multi:!0,deps:[fe,ft,kn,Tl,[new on,Gp],[new on,wn],...e]}]}}var VR=Eo(NR,!0);var LR=Eo(gu,!0);var BR=Eo(LA,!0);var QR="firebasestorage.googleapis.com",KR="storageBucket",n5=2*60*1e3,i5=10*60*1e3,r5=1e3;var Ye=class t extends Qu{constructor(e,n,i=0){super(f1(e),`Firebase Storage: ${n} (${f1(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ze=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(ze||{});function f1(t){return"storage/"+t}function b1(){let t="An unknown error occurred, please check the error payload for server response.";return new Ye(ze.UNKNOWN,t)}function o5(t){return new Ye(ze.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function s5(t){return new Ye(ze.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function a5(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ye(ze.UNAUTHENTICATED,t)}function c5(){return new Ye(ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function l5(t){return new Ye(ze.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function YR(){return new Ye(ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JR(){return new Ye(ze.CANCELED,"User canceled the upload/download.")}function u5(t){return new Ye(ze.INVALID_URL,"Invalid URL '"+t+"'.")}function d5(t){return new Ye(ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function h5(){return new Ye(ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+KR+"' property when initializing the app?")}function ZR(){return new Ye(ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function f5(){return new Ye(ze.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function p5(){return new Ye(ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function g5(t){return new Ye(ze.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jo(t){return new Ye(ze.INVALID_ARGUMENT,t)}function XR(){return new Ye(ze.APP_DELETED,"The Firebase app was deleted.")}function E1(t){return new Ye(ze.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Du(t,e){return new Ye(ze.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Eu(t){throw new Ye(ze.INTERNAL_ERROR,"Internal error: "+t)}var Qt=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(i.path==="")return i;throw d5(e)}static makeFromUrl(e,n){let i=null,r="([A-Za-z0-9.\\-_]+)";function o(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+r+s,"i"),c={bucket:1,path:3};function u(U){U.path_=decodeURIComponent(U.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${r}/o${g}`,"i"),D={bucket:1,path:3},x=n===QR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",V=new RegExp(`^https?://${x}/${r}/${T}`,"i"),O=[{regex:a,indices:c,postModify:o},{regex:_,indices:D,postModify:u},{regex:V,indices:{bucket:1,path:2},postModify:u}];for(let U=0;U<O.length;U++){let ee=O[U],Y=ee.regex.exec(e);if(Y){let b=Y[ee.indices.bucket],y=Y[ee.indices.path];y||(y=""),i=new t(b,y),ee.postModify(i);break}}if(i==null)throw u5(e);return i}},g1=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function m5(t,e,n){let i=1,r=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function d(...T){u||(u=!0,e.apply(null,T))}function f(T){r=setTimeout(()=>{r=null,t(_,c())},T)}function g(){o&&clearTimeout(o)}function _(T,...V){if(u){g();return}if(T){g(),d.call(null,T,...V);return}if(c()||s){g(),d.call(null,T,...V);return}i<64&&(i*=2);let O;a===1?(a=2,O=0):O=(i+Math.random())*1e3,f(O)}let D=!1;function x(T){D||(D=!0,g(),!u&&(r!==null?(T||(a=2),clearTimeout(r),f(0)):T||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,x(!0)},n),x}function _5(t){t(!1)}function y5(t){return t!==void 0}function v5(t){return typeof t=="function"}function w5(t){return typeof t=="object"&&!Array.isArray(t)}function Qp(t){return typeof t=="string"||t instanceof String}function jR(t){return D1()&&t instanceof Blob}function D1(){return typeof Blob<"u"}function m1(t,e,n,i){if(i<e)throw Jo(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Jo(`Invalid value for '${t}'. Expected ${n} or less.`)}function $r(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function eP(t){let e=encodeURIComponent,n="?";for(let i in t)if(t.hasOwnProperty(i)){let r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Xa=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Xa||{});function tP(t,e){let n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}var _1=class{constructor(e,n,i,r,o,s,a,c,u,d,f,g=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,D)=>{this.resolve_=_,this.reject_=D,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new Za(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Xa.NO_ERROR,c=o.getStatus();if(!a||tP(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===Xa.ABORT;i(!1,new Za(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;i(!0,new Za(u,o))})},n=(i,r)=>{let o=this.resolve_,s=this.reject_,a=r.connection;if(r.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());y5(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=b1();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(r.canceled){let c=this.appDelete_?XR():JR();s(c)}else{let c=YR();s(c)}};this.canceled_?n(!1,new Za(!1,null,!0)):this.backoffId_=m5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Za=class{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}};function b5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function E5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function D5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function C5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function I5(t,e,n,i,r,o,s=!0){let a=eP(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return D5(u,e),b5(u,n),E5(u,o),C5(u,i),new _1(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,s)}function T5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function S5(...t){let e=T5();if(e!==void 0){let n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(D1())return new Blob(t);throw new Ye(ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function x5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function M5(t){if(typeof atob>"u")throw g5("base-64");return atob(t)}var fn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Cu=class{constructor(e,n){this.data=e,this.contentType=n||null}};function C1(t,e){switch(t){case fn.RAW:return new Cu(nP(e));case fn.BASE64:case fn.BASE64URL:return new Cu(iP(t,e));case fn.DATA_URL:return new Cu(R5(e),P5(e))}throw b1()}function nP(t){let e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=i,s=t.charCodeAt(++n);i=65536|(o&1023)<<10|s&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function A5(t){let e;try{e=decodeURIComponent(t)}catch{throw Du(fn.DATA_URL,"Malformed data URL.")}return nP(e)}function iP(t,e){switch(t){case fn.BASE64:{let r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Du(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case fn.BASE64URL:{let r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Du(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=M5(e)}catch(r){throw r.message.includes("polyfill")?r:Du(t,"Invalid character found")}let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var Wp=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Du(fn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=n[1]||null;i!=null&&(this.base64=O5(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}};function R5(t){let e=new Wp(t);return e.base64?iP(fn.BASE64,e.rest):A5(e.rest)}function P5(t){return new Wp(t).contentType}function O5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var ec=class t{constructor(e,n){let i=0,r="";jR(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(jR(this.data_)){let i=this.data_,r=x5(i,e,n);return r===null?null:new t(r)}else{let i=new Uint8Array(this.data_.buffer,e,n-e);return new t(i,!0)}}static getBlob(...e){if(D1()){let n=e.map(i=>i instanceof t?i.data_:i);return new t(S5.apply(null,n))}else{let n=e.map(s=>Qp(s)?C1(fn.RAW,s).data:s.data_),i=0;n.forEach(s=>{i+=s.byteLength});let r=new Uint8Array(i),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)r[o++]=s[a]}),new t(r,!0)}}uploadData(){return this.data_}};function I1(t){let e;try{e=JSON.parse(t)}catch{return null}return w5(e)?e:null}function N5(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function k5(t,e){let n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function rP(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function F5(t,e){return e}var Mt=class{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||F5}},qp=null;function V5(t){return!Qp(t)||t.length<2?t:rP(t)}function Kp(){if(qp)return qp;let t=[];t.push(new Mt("bucket")),t.push(new Mt("generation")),t.push(new Mt("metageneration")),t.push(new Mt("name","fullPath",!0));function e(o,s){return V5(s)}let n=new Mt("name");n.xform=e,t.push(n);function i(o,s){return s!==void 0?Number(s):s}let r=new Mt("size");return r.xform=i,t.push(r),t.push(new Mt("timeCreated")),t.push(new Mt("updated")),t.push(new Mt("md5Hash",null,!0)),t.push(new Mt("cacheControl",null,!0)),t.push(new Mt("contentDisposition",null,!0)),t.push(new Mt("contentEncoding",null,!0)),t.push(new Mt("contentLanguage",null,!0)),t.push(new Mt("contentType",null,!0)),t.push(new Mt("metadata","customMetadata",!0)),qp=t,qp}function L5(t,e){function n(){let i=t.bucket,r=t.fullPath,o=new Qt(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function B5(t,e,n){let i={};i.type="file";let r=n.length;for(let o=0;o<r;o++){let s=n[o];i[s.local]=s.xform(i,e[s.server])}return L5(i,t),i}function oP(t,e,n){let i=I1(e);return i===null?null:B5(t,i,n)}function j5(t,e,n,i){let r=I1(e);if(r===null||!Qp(r.downloadTokens))return null;let o=r.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(u=>{let d=t.bucket,f=t.fullPath,g="/b/"+s(d)+"/o/"+s(f),_=$r(g,n,i),D=eP({alt:"media",token:u});return _+D})[0]}function T1(t,e){let n={},i=e.length;for(let r=0;r<i;r++){let o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var UR="prefixes",$R="items";function U5(t,e,n){let i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[UR])for(let r of n[UR]){let o=r.replace(/\/$/,""),s=t._makeStorageReference(new Qt(e,o));i.prefixes.push(s)}if(n[$R])for(let r of n[$R]){let o=t._makeStorageReference(new Qt(e,r.name));i.items.push(o)}return i}function $5(t,e,n){let i=I1(n);return i===null?null:U5(t,e,i)}var $n=class{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function mi(t){if(!t)throw b1()}function Yp(t,e){function n(i,r){let o=oP(t,r,e);return mi(o!==null),o}return n}function H5(t,e){function n(i,r){let o=$5(t,e,r);return mi(o!==null),o}return n}function G5(t,e){function n(i,r){let o=oP(t,r,e);return mi(o!==null),j5(o,r,t.host,t._protocol)}return n}function ic(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=c5():r=a5():n.getStatus()===402?r=s5(t.bucket):n.getStatus()===403?r=l5(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Jp(t){let e=ic(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=o5(t.path)),o.serverResponse=r.serverResponse,o}return n}function sP(t,e,n){let i=e.fullServerUrl(),r=$r(i,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new $n(r,o,Yp(t,n),s);return a.errorHandler=Jp(e),a}function z5(t,e,n,i,r){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),i&&(o.pageToken=i),r&&(o.maxResults=r);let s=e.bucketOnlyServerUrl(),a=$r(s,t.host,t._protocol),c="GET",u=t.maxOperationRetryTime,d=new $n(a,c,H5(t,e.bucket),u);return d.urlParams=o,d.errorHandler=ic(e),d}function q5(t,e,n){let i=e.fullServerUrl(),r=$r(i,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new $n(r,o,G5(t,n),s);return a.errorHandler=Jp(e),a}function W5(t,e,n,i){let r=e.fullServerUrl(),o=$r(r,t.host,t._protocol),s="PATCH",a=T1(n,i),c={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,d=new $n(o,s,Yp(t,i),u);return d.headers=c,d.body=a,d.errorHandler=Jp(e),d}function Q5(t,e){let n=e.fullServerUrl(),i=$r(n,t.host,t._protocol),r="DELETE",o=t.maxOperationRetryTime;function s(c,u){}let a=new $n(i,r,s,o);return a.successCodes=[200,204],a.errorHandler=Jp(e),a}function K5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function aP(t,e,n){let i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=K5(null,e)),i}function Y5(t,e,n,i,r){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let O="";for(let U=0;U<2;U++)O=O+Math.random().toString().slice(2);return O}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let u=aP(e,i,r),d=T1(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,g=`\r
--`+c+"--",_=ec.getBlob(f,i,g);if(_===null)throw ZR();let D={name:u.fullPath},x=$r(o,t.host,t._protocol),T="POST",V=t.maxUploadRetryTime,j=new $n(x,T,Yp(t,n),V);return j.urlParams=D,j.headers=s,j.body=_.uploadData(),j.errorHandler=ic(e),j}var tc=class{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}};function S1(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{mi(!1)}return mi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function J5(t,e,n,i,r){let o=e.bucketOnlyServerUrl(),s=aP(e,i,r),a={name:s.fullPath},c=$r(o,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},f=T1(s,n),g=t.maxUploadRetryTime;function _(x){S1(x);let T;try{T=x.getResponseHeader("X-Goog-Upload-URL")}catch{mi(!1)}return mi(Qp(T)),T}let D=new $n(c,u,_,g);return D.urlParams=a,D.headers=d,D.body=f,D.errorHandler=ic(e),D}function Z5(t,e,n,i){let r={"X-Goog-Upload-Command":"query"};function o(u){let d=S1(u,["active","final"]),f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{mi(!1)}f||mi(!1);let g=Number(f);return mi(!isNaN(g)),new tc(g,i.size(),d==="final")}let s="POST",a=t.maxUploadRetryTime,c=new $n(n,s,o,a);return c.headers=r,c.errorHandler=ic(e),c}var HR=256*1024;function X5(t,e,n,i,r,o,s,a){let c=new tc(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=i.size()),i.size()!==c.total)throw f5();let u=c.total-c.current,d=u;r>0&&(d=Math.min(d,r));let f=c.current,g=f+d,_="";d===0?_="finalize":u===d?_="upload, finalize":_="upload";let D={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${c.current}`},x=i.slice(f,g);if(x===null)throw ZR();function T(U,ee){let Y=S1(U,["active","final"]),b=c.current+d,y=i.size(),v;return Y==="final"?v=Yp(e,o)(U,ee):v=null,new tc(b,y,Y==="final",v)}let V="POST",j=e.maxUploadRetryTime,O=new $n(n,V,T,j);return O.headers=D,O.body=x.uploadData(),O.progressCallback=a||null,O.errorHandler=ic(t),O}var cP={STATE_CHANGED:"state_changed"},Lt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function p1(t){switch(t){case"running":case"pausing":case"canceling":return Lt.RUNNING;case"paused":return Lt.PAUSED;case"success":return Lt.SUCCESS;case"canceled":return Lt.CANCELED;case"error":return Lt.ERROR;default:return Lt.ERROR}}var y1=class{constructor(e,n,i){if(v5(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function Ja(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var GR=null,v1=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Eu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(let o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Eu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Eu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Eu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Eu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},w1=class extends v1{initXhr(){this.xhr_.responseType="text"}};function gi(){return GR?GR():new w1}var Iu=class{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=Kp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(ze.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(tP(r.status,[]))if(o)r=YR();else{this.sleepTime=Math.max(this.sleepTime*2,r5),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(ze.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let i=J5(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,gi,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,i)=>{let r=Z5(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,gi,n,i);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=HR*this._chunkMultiplier,n=new tc(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let s;try{s=X5(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,gi,r,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){HR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let i=sP(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,gi,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let i=Y5(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,gi,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=JR(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=p1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){let o=new y1(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(p1(this._state)){case Lt.SUCCESS:Ja(this._resolve.bind(null,this.snapshot))();break;case Lt.CANCELED:case Lt.ERROR:let n=this._reject;Ja(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(p1(this._state)){case Lt.RUNNING:case Lt.PAUSED:e.next&&Ja(e.next.bind(e,this.snapshot))();break;case Lt.SUCCESS:e.complete&&Ja(e.complete.bind(e))();break;case Lt.CANCELED:case Lt.ERROR:e.error&&Ja(e.error.bind(e,this._error))();break;default:e.error&&Ja(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var nc=class t{constructor(e,n){this._service=e,n instanceof Qt?this._location=n:this._location=Qt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rP(this._location.path)}get storage(){return this._service}get parent(){let e=N5(this._location.path);if(e===null)return null;let n=new Qt(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw E1(e)}};function eG(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Iu(t,new ec(e),n)}function tG(t){let e={prefixes:[],items:[]};return lP(t,e).then(()=>e)}function lP(t,e,n){return A(this,null,function*(){let r=yield uP(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&(yield lP(t,e,r.nextPageToken))})}function uP(t,e){e!=null&&typeof e.maxResults=="number"&&m1("options.maxResults",1,1e3,e.maxResults);let n=e||{},i=z5(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,gi)}function nG(t){t._throwIfRoot("getMetadata");let e=sP(t.storage,t._location,Kp());return t.storage.makeRequestWithTokens(e,gi)}function iG(t,e){t._throwIfRoot("updateMetadata");let n=W5(t.storage,t._location,e,Kp());return t.storage.makeRequestWithTokens(n,gi)}function rG(t){t._throwIfRoot("getDownloadURL");let e=q5(t.storage,t._location,Kp());return t.storage.makeRequestWithTokens(e,gi).then(n=>{if(n===null)throw p5();return n})}function oG(t){t._throwIfRoot("deleteObject");let e=Q5(t.storage,t._location);return t.storage.makeRequestWithTokens(e,gi)}function dP(t,e){let n=k5(t._location.path,e),i=new Qt(t._location.bucket,n);return new nc(t.storage,i)}function sG(t){return/^[A-Za-z]+:\/\//.test(t)}function aG(t,e){return new nc(t,e)}function hP(t,e){if(t instanceof Tu){let n=t;if(n._bucket==null)throw h5();let i=new nc(n,n._bucket);return e!=null?hP(i,e):i}else return e!==void 0?dP(t,e):t}function cG(t,e){if(e&&sG(e)){if(t instanceof Tu)return aG(t,e);throw Jo("To use ref(service, url), the first argument must be a Storage instance.")}else return hP(t,e)}function zR(t,e){let n=e?.[KR];return n==null?null:Qt.makeFromBucketSpec(n,t)}function lG(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:qu(r,t.app.options.projectId))}var Tu=class{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=QR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=n5,this._maxUploadRetryTime=i5,this._requests=new Set,r!=null?this._bucket=Qt.makeFromBucketSpec(r,this._host):this._bucket=zR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qt.makeFromBucketSpec(this._url,e):this._bucket=zR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){m1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){m1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return A(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return A(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nc(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new g1(XR());{let s=I5(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return A(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()})}},qR="@firebase/storage",WR="0.12.5";var uG="storage";function fP(t,e,n){return t=xe(t),eG(t,e,n)}function pP(t){return t=xe(t),nG(t)}function gP(t,e){return t=xe(t),iG(t,e)}function mP(t,e){return t=xe(t),uP(t,e)}function _P(t){return t=xe(t),tG(t)}function yP(t){return t=xe(t),rG(t)}function vP(t){return t=xe(t),oG(t)}function x1(t,e){return t=xe(t),cG(t,e)}function wP(t,e){return dP(t,e)}function bP(t,e,n,i={}){lG(t,e,n,i)}function dG(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Tu(n,i,r,e,Ju)}function hG(){Wr(new Tn(uG,dG,"PUBLIC").setMultipleInstances(!0)),mt(qR,WR,""),mt(qR,WR,"esm2017")}hG();var rc=class{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var Zp=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new rc(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new rc(i,this,this._ref))},n)}on(e,n,i,r){let o;return n&&(typeof n=="function"?o=s=>n(new rc(s,this,this._ref)):o={next:n.next?s=>n.next(new rc(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,i||void 0,r||void 0)}},Xp=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Zo(e,this._service))}get items(){return this._delegate.items.map(e=>new Zo(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Zo=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=wP(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Zp(fP(this._delegate,e,n),this)}putString(e,n=fn.RAW,i){this._throwIfRoot("putString");let r=C1(n,e),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),new Zp(new Iu(this._delegate,new ec(r.data,!0),o),this)}listAll(){return _P(this._delegate).then(e=>new Xp(e,this.storage))}list(e){return mP(this._delegate,e||void 0).then(n=>new Xp(n,this.storage))}getMetadata(){return pP(this._delegate)}updateMetadata(e){return gP(this._delegate,e)}getDownloadURL(){return yP(this._delegate)}delete(){return this._throwIfRoot("delete"),vP(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw E1(e)}};var eg=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(EP(e))throw Jo("ref() expected a child path but got a URL, use refFromURL instead.");return new Zo(x1(this._delegate,e),this)}refFromURL(e){if(!EP(e))throw Jo("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qt.makeFromUrl(e,this._delegate.host)}catch{throw Jo("refFromUrl() expected a valid full URL but got an invalid one.")}return new Zo(x1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){bP(this._delegate,e,n,i)}};function EP(t){return/^[A-Za-z]+:\/\//.test(t)}var fG="@firebase/storage-compat",pG="0.3.8";var gG="storage-compat";function mG(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new eg(n,i)}function _G(t){let e={TaskState:Lt,TaskEvent:cP,StringFormat:fn,Storage:eg,Reference:Zo};t.INTERNAL.registerComponent(new Tn(gG,mG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(fG,pG)}_G(Ut);function yG(t){return new re(e=>{let n=s=>e.next(s),i=s=>e.error(s),r=()=>e.complete();n(t.snapshot);let o=t.on("state_changed",n);return t.then(s=>{n(s),r()},s=>{n(t.snapshot),i(s)}),function(){o()}}).pipe(em(0))}function DP(t){let e=yG(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Z(n=>n.bytesTransferred/n.totalBytes*100))}}function tg(t){return{getDownloadURL:()=>J(void 0).pipe(h0,Te(()=>t.getDownloadURL()),bt),getMetadata:()=>J(void 0).pipe(h0,Te(()=>t.getMetadata()),bt),delete:()=>me(t.delete()),child:e=>tg(t.child(e)),updateMetadata:e=>me(t.updateMetadata(e)),put:(e,n)=>{let i=t.put(e,n);return DP(i)},putString:(e,n,i)=>{let r=t.putString(e,n,i);return DP(r)},list:e=>me(t.list(e)),listAll:()=>me(t.listAll())}}var vG=new G("angularfire2.storageBucket"),wG=new G("angularfire2.storage.maxUploadRetryTime"),bG=new G("angularfire2.storage.maxOperationRetryTime"),EG=new G("angularfire2.storage.use-emulator"),Su=(()=>{class t{storage;constructor(n,i,r,o,s,a,c,u,d,f){let g=ia(n,s,i);this.storage=ra(`${g.name}.storage.${r}`,"AngularFireStorage",g.name,()=>{let _=s.runOutsideAngular(()=>g.storage(r||void 0)),D=d;return D&&_.useEmulator(...D),c&&_.setMaxUploadRetryTime(c),u&&_.setMaxOperationRetryTime(u),_},[c,u])}ref(n){return tg(this.storage.ref(n))}refFromURL(n){return tg(this.storage.refFromURL(n))}upload(n,i,r){let o=this.storage.ref(n);return tg(o).put(i,r)}static \u0275fac=function(i){return new(i||t)(N(wr),N(na,8),N(vG,8),N(yt),N(fe),N(kn),N(wG,8),N(bG,8),N(EG,8),N(wn,8))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var DG=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=de({type:t});static \u0275inj=ue({})}return t})(),CP=(()=>{class t{constructor(){Ut.registerVersion("angularfire",Nn.full,"gcs-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=de({type:t});static \u0275inj=ue({providers:[Su],imports:[DG]})}return t})();var oc=(()=>{let e=class e{constructor(i,r,o,s){this.firestore=i,this.storage=r,this.afs=o,this.afAuth=s}getRecipes(){let i=LR(this.firestore,"recipes");return VR(i,{idField:"id"})}getImageUrl(i){return this.storage.refFromURL(i).getDownloadURL()}getRecipeById(i){return this.afs.collection("recipes").doc(i).valueChanges()}getRecipeByCurrentUser(){return this.afAuth.authState.pipe(Te(i=>i?(console.log(i),this.afs.collection("userRecipes",r=>r.where("uid","==",i.uid)).valueChanges()):[]),Te(i=>{let r=i.map(o=>o.recipeId);return this.getRecipesByIds(r)}))}getRecipesByIds(i){let r=i.map(o=>this.getRecipeById(o));return tr(r).pipe(Z(o=>o.filter(s=>s!==void 0)))}deleteRecipeFromCurrentUser(i){return console.log(i),this.afAuth.authState.pipe(Te(r=>r?this.afs.collection("userRecipes",o=>o.where("uid","==",r.uid).where("recipeId","==",i)).get():[]),Te(r=>{let o=this.afs.firestore.batch();return r.docs.forEach(s=>o.delete(s.ref)),o.commit()})).toPromise()}};e.\u0275fac=function(r){return new(r||e)(N(Yo),N(Su),N(Ur),N(Vn))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var CG=["*"];var IG=["dialog"];var TP={animation:!0,transitionTimerDelayMs:5},TG=(()=>{let e=class e{constructor(){this.animation=TP.animation}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SG(t){let{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t),i=parseFloat(e),r=parseFloat(n);return(i+r)*1e3}function SP(t){return typeof t=="string"}function A1(t){return t!=null}function xG(t){return t&&t.then}function xP(t){return(t||document.body).getBoundingClientRect()}function MG(t){return e=>new re(n=>{let i=s=>t.run(()=>n.next(s)),r=s=>t.run(()=>n.error(s)),o=()=>t.run(()=>n.complete());return e.subscribe({next:i,error:r,complete:o})})}var AG=()=>{},{transitionTimerDelayMs:RG}=TP,ng=new Map,Xo=(t,e,n,i)=>{let r=i.context||{},o=ng.get(e);if(o)switch(i.runningTransition){case"continue":return ht;case"stop":t.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),ng.delete(e)}let s=n(e,i.animation,r)||AG;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return t.run(()=>s()),J(void 0).pipe(MG(t));let a=new Me,c=new Me,u=a.pipe(nm(!0));ng.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:r});let d=SG(e);return t.runOutsideAngular(()=>{let f=gn(e,"transitionend").pipe(Nt(u),We(({target:_})=>_===e)),g=Zg(d+RG).pipe(Nt(u));Xg(g,f,c).pipe(Nt(u)).subscribe(()=>{ng.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};var MP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var AP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var RP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})(),PP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var O1=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(O1||{});var hte=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})();var PG=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function OP(t){let e=Array.from(t.querySelectorAll(PG)).filter(n=>n.tabIndex!==-1);return[e[0],e[e.length-1]]}var OG=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{let r=gn(e,"focusin").pipe(Nt(n),Z(o=>o.target));gn(e,"keydown").pipe(Nt(n),We(o=>o.which===O1.Tab),xd(r)).subscribe(([o,s])=>{let[a,c]=OP(e);(s===a||s===e)&&o.shiftKey&&(c.focus(),o.preventDefault()),s===c&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&gn(e,"click").pipe(Nt(n),xd(r),Z(o=>o[1])).subscribe(o=>o.focus())})};var fte=new Date(1882,10,12),pte=new Date(2174,10,25);var gte=1e3*60*60*24;var N1=1080,NG=24*N1,kG=12*N1+793,mte=29*NG+kG,_te=11*N1+204;var NP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var kP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})(),FG=(()=>{let e=class e{constructor(){this._ngbConfig=L(TG),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sc=class{constructor(e,n,i){this.nodes=e,this.viewRef=n,this.componentRef=i}};var VG=(()=>{let e=class e{constructor(){this._document=L(vt)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,o=r.style,{overflow:s,paddingRight:a}=o;if(i>0){let c=parseFloat(window.getComputedStyle(r).paddingRight);o.paddingRight=`${c+i}px`}return o.overflow="hidden",()=>{i>0&&(o.paddingRight=a),o.overflow=s}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),LG=(()=>{let e=class e{constructor(){this._nativeElement=L(en).nativeElement,this._zone=L(fe)}ngOnInit(){this._zone.onStable.asObservable().pipe(Jt(1)).subscribe(()=>{Xo(this._zone,this._nativeElement,(i,r)=>{r&&xP(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Xo(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Le({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,o){r&2&&(Sh("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),$s("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Yc],decls:0,vars:0,template:function(r,o){},encapsulation:2});let t=e;return t})(),ig=class{update(e){}close(e){}dismiss(e){}},BG=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],jG=["animation","backdropClass"],R1=class{_applyWindowOptions(e,n){BG.forEach(i=>{A1(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){jG.forEach(i=>{A1(n[i])&&(e[i]=n[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Nt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Nt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,n,i,r){this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Me,this._dismissed=new Me,this._hidden=new Me,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let n=this._beforeDismiss();xG(n)?n.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):n!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():J(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Mc(e,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},P1=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(P1||{}),UG=(()=>{let e=class e{constructor(){this._document=L(vt),this._elRef=L(en),this._zone=L(fe),this._closed$=new Me,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Qe,this.shown=new Me,this.hidden=new Me}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":SP(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Jt(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,r={animation:this.animation,runningTransition:"stop"},o=Xo(this._zone,i,()=>i.classList.remove("show"),r),s=Xo(this._zone,this._dialogEl.nativeElement,()=>{},r),a=Mc(o,s);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},r=Xo(this._zone,this._elRef.nativeElement,(s,a)=>{a&&xP(s),s.classList.add("show")},i),o=Xo(this._zone,this._dialogEl.nativeElement,()=>{},i);Mc(r,o).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{gn(i,"keydown").pipe(Nt(this._closed$),We(o=>o.which===O1.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(P1.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;gn(this._dialogEl.nativeElement,"mousedown").pipe(Nt(this._closed$),Ze(()=>r=!1),Te(()=>gn(i,"mouseup").pipe(Nt(this._closed$),Jt(1))),We(({target:o})=>i===o)).subscribe(()=>{r=!0}),gn(i,"click").pipe(Nt(this._closed$)).subscribe(({target:o})=>{i===o&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(P1.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let r=i.querySelector("[ngbAutofocus]"),o=OP(i)[0];(r||o||i).focus()}}_restoreFocus(){let i=this._document.body,r=this._elWithFocus,o;r&&r.focus&&i.contains(r)?o=r:o=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Xo(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Le({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(r,o){if(r&1&&_T(IG,7),r&2){let s;X_(s=ey())&&(o._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,o){r&2&&(Us("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),Sh("modal d-block"+(o.windowClass?" "+o.windowClass:"")),$s("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Yc],ngContentSelectors:CG,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,o){r&1&&(gT(),W(0,"div",1,0)(2,"div",2),mT(3),Q()()),r&2&&Sh("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let t=e;return t})(),$G=(()=>{let e=class e{constructor(){this._applicationRef=L(pr),this._injector=L(ft),this._environmentInjector=L(Tt),this._document=L(vt),this._scrollBar=L(VG),this._activeWindowCmptHasChanged=new Me,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Qe;let i=L(fe);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];OG(i,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,r,o){let s=o.container instanceof HTMLElement?o.container:A1(o.container)?this._document.querySelector(o.container):this._document.body;if(!s)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new ig;i=o.injector||i;let c=i.get(Tt,null)||this._environmentInjector,u=this._getContentRef(i,c,r,a,o),d=o.backdrop!==!1?this._attachBackdrop(s):void 0,f=this._attachWindowComponent(s,u.nodes),g=new R1(f,u,d,o.beforeDismiss);return this._registerModalRef(g),this._registerWindowCmpt(f),g.hidden.pipe(Jt(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=_=>{g.close(_)},a.dismiss=_=>{g.dismiss(_)},a.update=_=>{g.update(_)},g.update(o),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),d&&d.instance&&d.changeDetectorRef.detectChanges(),f.changeDetectorRef.detectChanges(),g}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(r=>r.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let r=kh(LG,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_attachWindowComponent(i,r){let o=kh(UG,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_getContentRef(i,r,o,s,a){return o?o instanceof xi?this._createFromTemplateRef(o,s):SP(o)?this._createFromString(o):this._createFromComponent(i,r,o,s,a):new sc([])}_createFromTemplateRef(i,r){let o={$implicit:r,close(a){r.close(a)},dismiss(a){r.dismiss(a)}},s=i.createEmbeddedView(o);return this._applicationRef.attachView(s),new sc([s.rootNodes],s)}_createFromString(i){let r=this._document.createTextNode(`${i}`);return new sc([[r]])}_createFromComponent(i,r,o,s,a){let c=ft.create({providers:[{provide:ig,useValue:s}],parent:i}),u=kh(o,{environmentInjector:r,elementInjector:c}),d=u.location.nativeElement;return a.scrollable&&d.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new sc([[d]],u.hostView,u)}_setAriaHidden(i){let r=i.parentElement;r&&i!==this._document.body&&(Array.from(r.children).forEach(o=>{o!==i&&o.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let r=()=>{let o=this._modalRefs.indexOf(i);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(r,r)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let r=this._windowCmpts.indexOf(i);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),es=(()=>{let e=class e{constructor(){this._injector=L(ft),this._modalStack=L($G),this._config=L(FG)}open(i,r={}){let o=z(Re(z({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,i,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),FP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({providers:[es]});let t=e;return t})();var VP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var LP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var BP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var jP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var UP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var $P=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var HP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var GP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var zP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var yte=new G("live announcer delay",{providedIn:"root",factory:()=>100});var qP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})();var WP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({});let t=e;return t})(),HG=[MP,AP,RP,PP,NP,kP,FP,VP,WP,LP,BP,jP,UP,$P,HP,GP,zP,qP],QP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({imports:[HG,MP,AP,RP,PP,NP,kP,FP,VP,WP,LP,BP,jP,UP,$P,HP,GP,zP,qP]});let t=e;return t})();var KP=(()=>{let e=class e{constructor(i){this.firestore=i}addData(i,r){return A(this,null,function*(){try{yield this.firestore.collection("userRecipes").add({uid:i,recipeId:r}),console.log("Data added to Firestore")}catch(o){throw console.error("Error while loading the data to Firestore:",o),o}})}};e.\u0275fac=function(r){return new(r||e)(N(Ur))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zG(t,e){return Math.floor(Math.random()*(e-t+1))+t}var YP=(()=>{let e=class e{constructor(i,r,o,s){this.recipeService=i,this.modal=r,this.afAuth=o,this.likedRecipesService=s,this.recipes=[]}ngOnInit(){this.recipeService.getRecipes().subscribe(i=>{this.recipes=i,this.loadRecipeData()})}loadRecipeData(){let i=zG(0,this.recipes.length-1);this.title=this.recipes[i].title,this.desc=this.recipes[i].description,this.recipeId=this.recipes[i].id,this.recipes[i].posterUrl&&this.recipeService.getImageUrl(this.recipes[i].posterUrl).subscribe(r=>{this.posterUrl=r,console.log(r)},r=>console.error(r))}addDataToFirestore(){this.afAuth.authState.subscribe(i=>{if(i){let r=i.uid;if(this.recipeId){let o=this.recipeId;this.likedRecipesService.addData(r,o).then(()=>{console.log("Data added to Firestore"),this.loadRecipeData()}).catch(s=>console.error("Error while loading to firestore",s))}}else console.error("No logged in user")})}};e.\u0275fac=function(r){return new(r||e)(se(oc),se(es),se(Vn),se(KP))},e.\u0275cmp=Le({type:e,selectors:[["app-home"]],decls:19,vars:5,consts:[["lang","en"],[1,"home-frame43-home06"],[1,"recipe-container"],[1,"home-poster"],[1,"toggle",3,"src","alt"],[1,"home-info"],[1,"home-text"],[1,"title"],[1,"description"],[1,"arrow","green-arrow",3,"click"],[1,"arrow","red-arrow",3,"click"],["type","checkbox","id","toggle",1,"visually-hidden"]],template:function(r,o){r&1&&(W(0,"html",0)(1,"div",1)(2,"div",2)(3,"div",3),we(4,"img",4),Q(),W(5,"div",5)(6,"span",6),we(7,"span"),Q(),W(8,"span",7)(9,"span"),ce(10),Q()(),W(11,"span",8)(12,"span"),ce(13),Q()()(),W(14,"span",9),pt("click",function(){return o.addDataToFirestore()}),ce(15,"I like it"),Q(),W(16,"span",10),pt("click",function(){return o.loadRecipeData()}),ce(17,"Not for me"),Q()()(),we(18,"input",11),Q()),r&2&&(je(4),Gs("alt","Poster for ",o.title,""),cn("src",o.posterUrl,Oi),je(6),Jn(o.title),je(3),Jn(o.desc))},styles:["@media only screen and (min-width: 1192px){#infoC[_ngcontent-%COMP%]{display:none}.recipe-container[_ngcontent-%COMP%]{position:relative;flex-wrap:wrap;padding-left:32vw;padding-right:10vw;display:grid;grid-template-columns:1fr 1fr;align-items:stretch}.home-info[_ngcontent-%COMP%]{width:27vw;height:auto;display:flex;flex:1;position:relative;align-items:center;flex-shrink:0;background-color:#ffe3e1;padding:2rem;overflow:auto;margin:0 auto;flex-direction:column;justify-content:center}.home-poster[_ngcontent-%COMP%]{width:27vw;margin:0 auto;height:auto;display:flex;flex:1;background-color:#ffd1d1;object-fit:cover}.home-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.home-frame43-home06[_ngcontent-%COMP%]{width:100%;height:83.5vh;display:flex;overflow:hidden;position:relative;align-items:center;flex-shrink:0;justify-content:flex-start;background-color:#fff5e4}.home-text[_ngcontent-%COMP%]{top:462px;left:579px;color:#fff;height:auto;position:absolute;font-size:64px;font-style:Regular;text-align:left;font-family:JetBrains Mono;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.arrow[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);font-size:2vw;z-index:10}.green-arrow[_ngcontent-%COMP%]{right:2%;color:#228b22}.red-arrow[_ngcontent-%COMP%]{left:21%;color:#dc143c}}@media only screen and (min-width: 600px) and (max-width: 1191px){#infoC[_ngcontent-%COMP%]{display:none}.recipe-container[_ngcontent-%COMP%]{position:relative;flex-wrap:wrap;padding-left:25vw;padding-right:10vw;display:grid;grid-template-columns:1fr 1fr;align-items:stretch}.home-info[_ngcontent-%COMP%]{width:380px;height:auto;display:flex;flex:1;position:relative;align-items:center;flex-shrink:0;background-color:#ffe3e1;padding:2rem;overflow:auto;margin:0 auto;flex-direction:column;justify-content:center}.home-poster[_ngcontent-%COMP%]{width:380px;margin:0 auto;height:auto;display:flex;flex:1;background-color:#ffd1d1;object-fit:cover}.home-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.home-frame43-home06[_ngcontent-%COMP%]{width:100%;height:700px;display:flex;overflow:hidden;position:relative;align-items:center;flex-shrink:0;justify-content:flex-start;background-color:#d9b68b}.home-text[_ngcontent-%COMP%]{top:462px;left:579px;color:#fff;height:341px;width:504px;position:absolute;font-size:64px;font-style:Regular;text-align:left;font-family:JetBrains Mono;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.arrow[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);font-size:3vw;z-index:10}.green-arrow[_ngcontent-%COMP%]{right:8%;color:green}.red-arrow[_ngcontent-%COMP%]{left:23%;color:red}}@media only screen and (max-width: 600px){.recipe-container[_ngcontent-%COMP%]{position:relative;flex-wrap:wrap;grid-template-columns:1fr 1fr;align-items:center;width:360px;transition:transform .8s;transform-style:preserve-3d;top:100px;padding-left:15px}.flip[_ngcontent-%COMP%]{transform:rotateY(180deg)}.home-poster[_ngcontent-%COMP%], .home-info[_ngcontent-%COMP%]{position:absolute;-webkit-backface-visibility:hidden;backface-visibility:hidden;top:0;padding-left:0;width:324px;margin:0 auto;height:auto;display:flex;flex:1;background-color:#ffd1d1;object-fit:cover}.home-info[_ngcontent-%COMP%]{transform:rotateY(180deg);background-color:#cb5050}.home-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.home-frame43-home06[_ngcontent-%COMP%]{width:100%;height:700px;display:block;overflow:hidden;position:relative;align-items:center;flex-shrink:0;background-color:#d9b68b}.home-text[_ngcontent-%COMP%]{color:#fff;position:absolute;font-size:64px;font-style:Regular;text-align:left;font-family:JetBrains Mono;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none;background-color:#cb5050}.arrow[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);font-size:30vw;z-index:10}.green-arrow[_ngcontent-%COMP%]{top:620px;right:50px;color:green}.red-arrow[_ngcontent-%COMP%]{top:620px;left:50px;color:red}}.green-arrow[_ngcontent-%COMP%]:hover{cursor:pointer;color:#006400}.red-arrow[_ngcontent-%COMP%]:hover{cursor:pointer;color:#8b0000}"]});let t=e;return t})();function qG(t,e){if(t&1){let n=Hs();W(0,"button",8),pt("click",function(){ks(n);let r=Yn().$implicit,o=Yn();return Fs(o.deleteRecipe(r.id))}),ce(1),Q()}if(t&2){let n=Yn().$implicit;je(),Kc("Delete ",n.title,"")}}function WG(t,e){if(t&1){let n=Hs();W(0,"div")(1,"img",6),pt("click",function(){let r=ks(n).$implicit,o=Yn();return Fs(o.openDeleteRecipeDialog(r.id))}),Q(),po(2,qG,2,1,"button",7),Q()}if(t&2){let n=e.$implicit,i=Yn();je(),Z_("alt",n.title),cn("src",n.posterUrl,Oi),je(),cn("ngIf",i.selectedRecipeId===n.id)}}var JP=(()=>{let e=class e{constructor(i,r){this.recipeService=i,this.modal=r,this.recipes=[],this.selectedRecipeId=null}ngOnInit(){this.recipeService.getRecipeByCurrentUser().subscribe(i=>{this.recipes=i,console.log(this.recipes);for(let r=0;r<this.recipes.length;r++)this.loadRecipeData(r),console.log(this.recipes[r].posterUrl)})}loadRecipeData(i){this.title=this.recipes[i].title,this.desc=this.recipes[i].description,this.recipes[i].posterUrl&&this.recipeService.getImageUrl(this.recipes[i].posterUrl).subscribe(r=>{this.recipes[i].posterUrl=r},r=>console.error(r))}openDeleteRecipeDialog(i){this.selectedRecipeId=i}onDocumentClick(){this.selectedRecipeId=null}deleteRecipe(i){this.recipeService.deleteRecipeFromCurrentUser(i).then(()=>{this.recipes=this.recipes.filter(r=>r.id!==i)}).catch(r=>{console.error("Error while deleting the recipe:",r)})}};e.\u0275fac=function(r){return new(r||e)(se(oc),se(es))},e.\u0275cmp=Le({type:e,selectors:[["app-liked-recipes"]],decls:7,vars:1,consts:[["lang","en"],[1,"liked-container"],[1,"liked-frame43-liked-list04"],[1,"connect-text"],["id","posters-container",1,"posters-container"],[4,"ngFor","ngForOf"],[1,"poster",3,"click","src","alt"],["class","delete-button",3,"click",4,"ngIf"],[1,"delete-button",3,"click"]],template:function(r,o){r&1&&(W(0,"html",0)(1,"div",1)(2,"div",2)(3,"span",3),we(4,"span"),Q(),W(5,"div",4),po(6,WG,3,3,"div",5),Q()()()()),r&2&&(je(6),cn("ngForOf",o.recipes))},dependencies:[BT,Lh],styles:["@media only screen and (min-width: 1192px){.liked-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100%;align-items:center;flex-direction:column}.liked-frame43-liked-list04[_ngcontent-%COMP%]{width:100%;height:83.5vh;display:flex;overflow:hidden;position:relative;align-items:center;flex-shrink:0;justify-content:flex-start;background-color:#fff5e4}.connect-text[_ngcontent-%COMP%]{top:5vh;left:20vw;color:#800020;width:auto;position:absolute;font-size:3vh;font-style:Regular;text-align:center;align-items:center;font-family:Inter}.posters-container[_ngcontent-%COMP%]{padding-top:15vh;padding-bottom:15vh;margin-left:20vw;overflow-y:auto;flex-wrap:wrap;display:flex;gap:5vh;width:100%;height:100%}.poster[_ngcontent-%COMP%]{width:30vh;height:auto}.poster-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.delete-button[_ngcontent-%COMP%]{position:absolute;top:12vh;right:5vw;font-size:2vh;transform:translate(-50%,-50%);padding:2vw 3vh;background-color:red;color:#fff;border:none;border-radius:4vh;cursor:pointer;transition:opacity .3s ease}.delete-button[_ngcontent-%COMP%]:hover{opacity:.8}}@media only screen and (min-width: 600px) and (max-width: 1191px){.liked-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100%;align-items:center;flex-direction:column}.liked-frame43-liked-list04[_ngcontent-%COMP%]{width:100%;height:700px;display:flex;overflow:hidden;position:relative;align-items:center;flex-shrink:0;justify-content:flex-start;background-color:#fff5e4}.connect-text[_ngcontent-%COMP%]{top:5vh;left:25vw;color:#800020;width:auto;position:absolute;font-size:25px;font-style:Regular;text-align:center;align-items:center;font-family:Inter}.posters-container[_ngcontent-%COMP%]{padding-top:55vh;margin-left:25vw;margin-bottom:50vh;overflow-y:auto;flex-wrap:wrap;display:flex;gap:5vh;width:100%;height:1024px}.poster[_ngcontent-%COMP%]{width:20vw;height:auto}}@media only screen and (max-width: 600px){.liked-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100%;align-items:center;flex-direction:column}.liked-frame43-liked-list04[_ngcontent-%COMP%]{width:100%;height:700px;display:flex;overflow:hidden;position:relative;align-items:center;flex-shrink:0;justify-content:flex-start;background-color:#fff5e4}.connect-text[_ngcontent-%COMP%]{top:10px;left:5%;color:#800020;width:auto;position:absolute;font-size:25px;font-style:Regular;text-align:center;align-items:center;font-family:Inter}.posters-container[_ngcontent-%COMP%]{padding-top:200px;padding-bottom:200px;margin-left:17px;overflow-y:auto;flex-wrap:wrap;display:flex;gap:10px;width:100%;height:1024px}.poster[_ngcontent-%COMP%]{width:326px;height:auto}}"]});let t=e;return t})();var ZP=(()=>{let e=class e{constructor(i,r){this.authService=i,this.storage=r,this.username="",this.email="",this.password="",this.confirmPassword="",this.avatarFile=null,this.avatarURL=null}onFileSelected(i){let r=i.target.files[0];if(r){this.avatarFile=r;let o=new FileReader;o.readAsDataURL(r),o.onload=()=>{this.avatarURL=o.result}}}register(){if(this.password!==this.confirmPassword){console.error("Passwords do not match");return}if(this.avatarFile){let i=`avatars/${Date.now()}_${this.avatarFile.name}`,r=this.storage.ref(i);this.storage.upload(i,this.avatarFile).snapshotChanges().pipe(Ei(()=>{r.getDownloadURL().subscribe(s=>{this.authService.signUp(this.email,this.password,s,this.username)})})).subscribe()}else this.authService.signUp(this.email,this.password,null,this.username)}};e.\u0275fac=function(r){return new(r||e)(se(Qa),se(Su))},e.\u0275cmp=Le({type:e,selectors:[["app-register"]],decls:43,vars:4,consts:[["lang","en"],["property","og:title","content","Recipe Match - Login"],["name","viewport","content","width=device-width, initial-scale=1.0"],["charset","utf-8"],["property","twitter:card","content","summary_large_image"],["id","header"],[1,"login-container"],[1,"login-frame43-login02"],["alt","LoginFrame7015","src","assets/img/loginBackground.png",1,"login-login-frame"],["type","text","placeholder","Username",1,"login-input-username",3,"ngModelChange","ngModel"],["type","text","placeholder","Password",1,"login-input-pwd",3,"ngModelChange","ngModel"],["type","text","placeholder","Confirm Password",1,"login-input-confirm-pwd",3,"ngModelChange","ngModel"],["type","text","placeholder","Email",1,"login-input-email",3,"ngModelChange","ngModel"],["type","file","accept","image/*",1,"login-input-avatar",3,"change"],[1,"login-text"],[1,"login-text2"],[1,"login-text3"],[1,"login-text4"],[1,"avatar"],[1,"error-message"],[1,"login-button-confirm-login",3,"click"]],template:function(r,o){r&1&&(W(0,"html",0)(1,"head")(2,"title"),ce(3,"Recipe Match - Register"),Q(),we(4,"meta",1)(5,"meta",2)(6,"meta",3)(7,"meta",4),Q(),W(8,"body"),we(9,"div",5),W(10,"div")(11,"div",6)(12,"div",7),we(13,"img",8),W(14,"label")(15,"input",9),Vi("ngModelChange",function(a){return fr(o.username,a)||(o.username=a),a}),Q()(),W(16,"label")(17,"input",10),Vi("ngModelChange",function(a){return fr(o.password,a)||(o.password=a),a}),Q()(),W(18,"label")(19,"input",11),Vi("ngModelChange",function(a){return fr(o.confirmPassword,a)||(o.confirmPassword=a),a}),Q()(),W(20,"label")(21,"input",12),Vi("ngModelChange",function(a){return fr(o.email,a)||(o.email=a),a}),Q()(),W(22,"label")(23,"input",13),pt("change",function(a){return o.onFileSelected(a)}),Q()(),W(24,"span",14)(25,"span"),ce(26,"Username"),Q()(),W(27,"span",15)(28,"span"),ce(29,"Password"),Q()(),W(30,"span",16)(31,"span"),ce(32,"Confirm Password"),Q()(),W(33,"span",17)(34,"span"),ce(35,"Email"),Q()(),W(36,"span",18)(37,"span"),ce(38,"Avatar"),Q()(),W(39,"span",19),we(40,"span"),Q(),W(41,"button",20),pt("click",function(){return o.register()}),ce(42,"Register"),Q()()()()()()),r&2&&(je(15),Fi("ngModel",o.username),je(2),Fi("ngModel",o.password),je(2),Fi("ngModel",o.confirmPassword),je(2),Fi("ngModel",o.email))},dependencies:[Ya,$p,bu],styles:["@media only screen and (min-width: 1192px){.login-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100%;align-items:center;flex-direction:column;background-color:#fff5e4}.login-frame43-login02[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;overflow:hidden;position:relative;align-items:flex-start;flex-shrink:0}.login-login-frame[_ngcontent-%COMP%]{top:0;left:30%;width:40vw;height:100%;position:absolute}.login-input-confirm-pwd[_ngcontent-%COMP%]{top:50vh;left:35vw;width:30vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-email[_ngcontent-%COMP%]{top:60vh;left:35vw;width:30vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-avatar[_ngcontent-%COMP%]{top:70vh;left:35vw;width:30vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-text[_ngcontent-%COMP%]{top:25vh;left:36vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text2[_ngcontent-%COMP%]{top:35vh;left:36vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text3[_ngcontent-%COMP%]{top:45vh;left:36vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text4[_ngcontent-%COMP%]{top:55vh;left:36vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.avatar[_ngcontent-%COMP%]{top:65vh;left:36vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.error-message[_ngcontent-%COMP%]{top:90vh;left:39%;right:40%;color:#fff;height:auto;position:absolute;font-size:2vh;font-style:Regular;text-align:center;font-family:Inter}.login-button-confirm-login[_ngcontent-%COMP%]{top:80vh;left:42%;width:15vw;height:3vh;font-size:2vh;text-align:center;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#d40121;color:#fff5e4;transition-duration:.4s;border:none;margin:4px 2px;cursor:pointer;display:inline-block;padding:0 20px}.login-button-confirm-login[_ngcontent-%COMP%]:hover{background-color:coral}.login-input-pwd[_ngcontent-%COMP%]{top:40vh;left:35vw;width:30vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-username[_ngcontent-%COMP%]{top:30vh;left:35vw;width:30vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}}@media only screen and (min-width: 600px) and (max-width: 1191px){.login-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100vh;align-items:center;flex-direction:column;background-color:#fff5e4}.login-frame43-login02[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;overflow:hidden;position:relative;align-items:flex-start;flex-shrink:0}.login-login-frame[_ngcontent-%COMP%]{top:0;left:25%;width:50vw;height:100%;position:absolute}.login-button-confirm-login[_ngcontent-%COMP%]{top:70vh;left:42%;width:15vw;height:3vh;font-size:2vh;text-align:center;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#d9b68b;color:#680d0d;transition-duration:.4s;border:none;margin:4px 2px;cursor:pointer;display:inline-block;padding:0 20px}.login-button-confirm-login[_ngcontent-%COMP%]:hover{background-color:coral}.login-input-username[_ngcontent-%COMP%]{top:30vh;left:31vw;width:38vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-pwd[_ngcontent-%COMP%]{top:40vh;left:31vw;width:38vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-confirm-pwd[_ngcontent-%COMP%]{top:50vh;left:31vw;width:38vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-email[_ngcontent-%COMP%]{top:60vh;left:31vw;width:38vw;height:3vh;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-text[_ngcontent-%COMP%]{top:25vh;left:32vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text2[_ngcontent-%COMP%]{top:35vh;left:32vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text3[_ngcontent-%COMP%]{top:45vh;left:32vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text4[_ngcontent-%COMP%]{top:55vh;left:32vw;color:#fff;height:auto;position:absolute;font-size:4vh;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.error-message[_ngcontent-%COMP%]{top:76vh;left:30%;right:30%;color:#fff;height:auto;position:absolute;font-size:2vh;font-style:Regular;text-align:center;font-family:Inter}}@media only screen and (max-width: 600px){.login-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100vh;align-items:center;flex-direction:column;background-color:#fff5e4}.login-frame43-login02[_ngcontent-%COMP%]{width:100%;height:800px;display:flex;overflow:hidden;position:relative;align-items:flex-start;flex-shrink:0}.login-login-frame[_ngcontent-%COMP%]{top:0;left:0;width:625px;height:800px;position:absolute}.login-button-confirm-login[_ngcontent-%COMP%]{top:527px;left:120px;width:111px;height:25px;font-size:18px;text-align:center;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#d9b68b;color:#680d0d;transition-duration:.4s;border:none;margin:4px 2px;cursor:pointer;display:inline-block;padding:0 20px}.login-button-confirm-login[_ngcontent-%COMP%]:hover{background-color:coral}.login-input-username[_ngcontent-%COMP%]{top:240px;left:62px;width:225px;height:20px;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-pwd[_ngcontent-%COMP%]{top:297px;left:62px;width:225px;height:20px;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-confirm-pwd[_ngcontent-%COMP%]{top:361px;left:62px;width:225px;height:20px;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-input-email[_ngcontent-%COMP%]{top:423px;left:62px;width:225px;height:20px;display:flex;overflow:hidden;position:absolute;align-items:flex-start;flex-shrink:0;border-radius:500px;background-color:#fff}.login-text[_ngcontent-%COMP%]{top:209px;left:69px;color:#fff;height:auto;position:absolute;font-size:18px;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text2[_ngcontent-%COMP%]{top:270px;left:69px;color:#fff;height:auto;position:absolute;font-size:18px;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text3[_ngcontent-%COMP%]{top:331px;left:69px;color:#fff;height:auto;position:absolute;font-size:18px;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.login-text4[_ngcontent-%COMP%]{top:393px;left:69px;color:#fff;height:auto;position:absolute;font-size:18px;font-style:Regular;text-align:left;font-family:Inter;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}.error-message[_ngcontent-%COMP%]{top:600px;left:5px;color:#fff;height:auto;position:absolute;font-size:18px;font-style:Regular;text-align:center;font-family:Inter}}"]});let t=e;return t})();function QG(t,e){return Math.floor(Math.random()*(e-t+1))+t}var XP=(()=>{let e=class e{constructor(i,r){this.recipeService=i,this.modal=r,this.recipes=[]}ngOnInit(){this.recipeService.getRecipes().subscribe(i=>{this.recipes=i,this.loadRecipeData()})}loadRecipeData(){let i=QG(0,this.recipes.length-1);this.title=this.recipes[i].title,this.synopsis=this.recipes[i].description,this.recipes[i].posterUrl&&this.recipeService.getImageUrl(this.recipes[i].posterUrl).subscribe(r=>{this.posterUrl=r,console.log(r)},r=>console.error(r))}};e.\u0275fac=function(r){return new(r||e)(se(oc),se(es))},e.\u0275cmp=Le({type:e,selectors:[["app-shaker"]],decls:16,vars:5,consts:[["lang","en"],[1,"shake-container"],[1,"shake-frame43-shake-result05"],["onclick","toggleRecipeContainer()",1,"recipe-container"],[1,"home-poster"],[3,"src","alt"],[1,"home-info"],[1,"home-text"],[1,"title"],[1,"description"],[1,"exit_flip"]],template:function(r,o){r&1&&(W(0,"html",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),we(5,"img",5),Q(),W(6,"div",6)(7,"span",7),we(8,"span"),Q(),W(9,"span",8)(10,"span"),ce(11),Q()(),W(12,"span",9)(13,"span"),ce(14),Q()()()()()(),we(15,"div",10),Q()),r&2&&(je(5),Gs("alt","Poster for ",o.title,""),cn("src",o.posterUrl,Oi),je(6),Jn(o.title),je(3),Jn(o.synopsis))},styles:["@media only screen and (min-width: 1192px){#infoC[_ngcontent-%COMP%]{display:none}.shake-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100%;align-items:center;flex-direction:column}.shake-frame43-shake-result05[_ngcontent-%COMP%]{width:100%;height:83.5vh;display:flex;overflow:hidden;position:relative;align-items:center;flex-shrink:0;justify-content:flex-start;background-color:#fff5e4}.recipe-container[_ngcontent-%COMP%]{position:relative;flex-wrap:wrap;padding-left:32vw;padding-right:10vw;display:grid;grid-template-columns:1fr 1fr;align-items:stretch}.home-info[_ngcontent-%COMP%]{width:27vw;height:auto;display:flex;flex:1;position:relative;align-items:center;flex-shrink:0;background-color:#ffe3e1;padding:2rem;overflow:auto;margin:0 auto;flex-direction:column;justify-content:center}.home-poster[_ngcontent-%COMP%]{width:27vw;margin:0 auto;height:auto;display:flex;flex:1;background-color:#ffd1d1;object-fit:cover}.home-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.home-frame43-home06[_ngcontent-%COMP%]{width:100%;height:83.5vh;display:flex;overflow:hidden;position:relative;align-items:center;flex-shrink:0;justify-content:flex-start;background-color:#d9b68b}.home-text[_ngcontent-%COMP%]{top:462px;left:579px;color:#fff;height:auto;position:absolute;font-size:64px;font-style:Regular;text-align:left;font-family:JetBrains Mono;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}}@media only screen and (min-width: 600px) and (max-width: 1191px){#infoC[_ngcontent-%COMP%]{display:none}.shake-container[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;min-height:100%;align-items:center;flex-direction:column}.shake-frame43-shake-result05[_ngcontent-%COMP%]{width:100%;height:86vh;display:flex;overflow:hidden;position:relative;align-items:center;flex-shrink:0;justify-content:flex-start;background-color:#fff5e4}.recipe-container[_ngcontent-%COMP%]{position:relative;flex-wrap:wrap;padding-left:25vw;padding-right:10vw;display:grid;grid-template-columns:1fr 1fr;align-items:stretch}.home-info[_ngcontent-%COMP%]{width:380px;height:auto;display:flex;flex:1;position:relative;align-items:center;flex-shrink:0;background-color:#ffe3e1;padding:2rem;overflow:auto;margin:0 auto;flex-direction:column;justify-content:center}.home-poster[_ngcontent-%COMP%]{width:380px;margin:0 auto;height:auto;display:flex;flex:1;background-color:#ffd1d1;object-fit:cover}.home-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.home-frame43-home06[_ngcontent-%COMP%]{width:100%;height:700px;display:flex;overflow:hidden;position:relative;align-items:center;flex-shrink:0;justify-content:flex-start;background-color:#fff5e4}.home-text[_ngcontent-%COMP%]{top:462px;left:579px;color:#fff;height:341px;width:504px;position:absolute;font-size:64px;font-style:Regular;text-align:left;font-family:JetBrains Mono;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none}}@media only screen and (max-width: 600px){.exit_flip[_ngcontent-%COMP%]{height:101px;width:360px;background-color:#fff5e4;bottom:1px}.shake-frame43-shake-result05[_ngcontent-%COMP%]{width:100%;height:600px;display:block;overflow:hidden;position:relative;align-items:center;flex-shrink:0;background-color:#fff5e4}.recipe-container[_ngcontent-%COMP%]{position:relative;flex-wrap:wrap;grid-template-columns:1fr 1fr;align-items:center;width:360px;transition:transform .8s;transform-style:preserve-3d;top:100px;padding-left:15px}.flip[_ngcontent-%COMP%]{transform:rotateY(180deg)}.home-poster[_ngcontent-%COMP%], .home-info[_ngcontent-%COMP%]{position:absolute;-webkit-backface-visibility:hidden;backface-visibility:hidden;top:0;padding-left:0;width:324px;margin:0 auto;height:auto;display:flex;flex:1;background-color:#ffd1d1;object-fit:cover}.home-info[_ngcontent-%COMP%]{transform:rotateY(180deg);background-color:#cb5050}.home-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.home-frame43-home06[_ngcontent-%COMP%]{width:100%;height:700px;display:block;overflow:hidden;position:relative;align-items:center;flex-shrink:0;background-color:#fff5e4}.home-text[_ngcontent-%COMP%]{color:#fff;position:absolute;font-size:64px;font-style:Regular;text-align:left;font-family:JetBrains Mono;font-weight:400;line-height:normal;font-stretch:normal;text-decoration:none;background-color:#cb5050}}"]});let t=e;return t})();var KG=[{path:"",component:$S},{path:"login",component:IR},{path:"register",component:ZP},{path:"",component:AR,children:[{path:"home",component:YP},{path:"liked",component:JP},{path:"shake",component:XP}]}],eO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e}),e.\u0275inj=ue({imports:[l0.forRoot(KG),l0]});let t=e;return t})();var tO=(()=>{let e=class e{constructor(){this.title="yourRecipes"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Le({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,o){r&1&&we(0,"router-outlet")},dependencies:[yl]});let t=e;return t})();var F1={isProduction:!1,firebase:{apiKey:"AIzaSyD4WQWKHcmW87IZsiRU28g8J5hGondsqak",authDomain:"your-recipes-3338e.firebaseapp.com",projectId:"your-recipes-3338e",storageBucket:"your-recipes-3338e.appspot.com",messagingSenderId:"570183639693",appId:"1:570183639693:web:99c6a8480b412f549e38c4",measurementId:"G-56XPY1B4EM"}};var nO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=de({type:e,bootstrap:[tO]}),e.\u0275inj=ue({providers:[{provide:wr,useValue:F1.firebase}],imports:[JT,eO,QP,HS(()=>GS(F1.firebase)),FR(()=>BR()),CP,rx,DR]});let t=e;return t})();YT().bootstrapModule(nO).catch(t=>console.error(t));
